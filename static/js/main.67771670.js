/*! For license information please see main.67771670.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function z(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ce(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Te(e,t,n)}finally{De=!1,(null!==xe||null!==Se)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Ve=!1,Ue=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,St,Et,It=!1,Ct=[],Tt=null,Nt=null,Dt=null,At=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function jt(){It=!1,null!==Tt&&Vt(Tt)&&(Tt=null),null!==Nt&&Vt(Nt)&&(Nt=null),null!==Dt&&Vt(Dt)&&(Dt=null),At.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Nt&&zt(Nt,e),null!==Dt&&zt(Dt,e),At.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=_.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=F({},ln,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(F({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(In),Tn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=an(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),Pn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Vr(e,0)}function Yn(e){if(H(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=c&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Ir=Er("animationend"),Cr=Er("animationiteration"),Tr=Er("animationstart"),Nr=Er("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Dr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Or=Ar[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Tr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var c=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,l=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,l),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,l=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,l),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Cn;break;case"focusin":l="focus",s=yn;break;case"focusout":l="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Cr:case Tr:s=mn;break;case Nr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var c=0!==(4&t),f=!c&&"scroll"===e,h=c?null!==u?u+"Capture":null:u;c=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Re(v,h))&&c.push(Gr(v,p,d)))),f)break;v=v.return}0<c.length&&(u=new s(u,l,null,n,i),o.push({event:u,listeners:c}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(f=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(s=null,l=r),s!==l)){if(c=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:_i(s),d=null==l?u:_i(l),(u=new c(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((c=new c(h,v+"enter",l,n,i)).target=d,c.relatedTarget=f,p=c),f=p,s&&l)e:{for(h=l,v=0,d=c=s;d;d=Hr(d))v++;for(d=0,p=h;p;p=Hr(p))d++;for(;0<v-d;)c=Hr(c),v--;for(;0<d-v;)h=Hr(h),d--;for(;v--;){if(c===h||null!==h&&c===h.alternate)break e;c=Hr(c),h=Hr(h)}c=null}else c=null;null!==s&&Qr(o,u,s,c,!1),null!==l&&null!==f&&Qr(o,f,l,c,!0)}if("select"===(s=(u=r?_i(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Kn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?_i(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(m=Wr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,l=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==l&&(u=l,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ii(e,t){xi++,bi[xi]=e.current,e.current=t}var Ci={},Ti=Si(Ci),Ni=Si(!1),Di=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ni),Ei(Ti)}function Oi(e,t,n){if(Ti.current!==Ci)throw Error(a(168));Ii(Ti,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Di=Ti.current,Ii(Ti,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ti),Ii(Ti,e)):Ei(Ni),Ii(Ni,n)}var Vi=null,Ui=!1,ji=!1;function zi(e){null===Vi?Vi=[e]:Vi.push(e)}function Bi(){if(!ji&&null!==Vi){ji=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,Bi),i}finally{kt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=_.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,_a=null;function wa(){_a=ka=ga=null}function ba(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_u=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ca(e){null===Ia?Ia=[e]:Ia.push(e)}function Ta(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,l=s.next;s.next=null,null===o?a=l:o.next=l,o=s;var c=e.alternate;null!==c&&((u=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===u?c.firstBaseUpdate=l:u.next=l,c.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,c=l=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===c?(l=c=d,s=f):c=c.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(s=f),i.baseState=s,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rl(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rl(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rl(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Di:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Di:Ti.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case b:return(t=Ul(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case b:return n.key===i?c(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function p(i,a,u,s){for(var l=null,c=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===c?l=m:c.sibling=m,c=m,f=y}if(p===u.length)return n(i,f),ia&&Ji(i,p),l;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===c?l=f:c.sibling=f,c=f);return ia&&Ji(i,p),l}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===c?l=y:c.sibling=y,c=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),l}function y(i,u,s,l){var c=L(s);if("function"!==typeof c)throw Error(a(150));if(null==(s=c.call(s)))throw Error(a(151));for(var f=c=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,l);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?c=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),ia&&Ji(i,y),c;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,l))&&(u=o(g,u,y),null===f?c=g:f.sibling=g,f=g);return ia&&Ji(i,y),c}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,l))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?c=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),c}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&Qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Wa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=Ml(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Ll(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ul(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(c=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Vl(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ii(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var fo=_.ReactCurrentDispatcher,ho=_.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,_o=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=lu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==_o;return _o=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function Co(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function To(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,l=null,c=o;do{var f=c.lane;if((vo&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=h,u=r):l=l.next=h,po.lanes|=f,Fs|=f}c=c.next}while(null!==c&&c!==o);null===l?u=r:l.next=s,ur(r,t.memoizedState)||(_u=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(_u=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=po,r=Co(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,_u=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&vo)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rl(t,e,1,-1)}function Vo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Co().memoizedState}function zo(e,t,n,r){var i=Io();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Wo(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,_u=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Co().memoizedState}function tu(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ta(e,t,n,r))){rl(n,e,r,tl()),au(n,t,r)}}function nu(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ca(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ta(e,t,i,r))&&(rl(n,e,r,i=tl()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&vo)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ds.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Xo,useReducer:No,useRef:jo,useState:function(){return No(To)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Co(),yo.memoizedState,e)},useTransition:function(){return[No(To)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},lu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Xo,useReducer:Do,useRef:jo,useState:function(){return Do(To)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Do(To)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function cu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ws=r),hu(0,t)},n}function pu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Il.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=_.ReactCurrentOwner,_u=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||_u?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Ol(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(_u=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(_u=!0)}}return Cu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Os,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Os,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Os,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Os,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Ri(n)?Di:Ti.current;return a=Ai(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||_u?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Tu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ea(l):l=Ai(t,l=Ri(n)?Di:Ti.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==l)&&Ka(t,o,r,l),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Da?("function"===typeof c&&(ja(t,n,c,r),s=t.memoizedState),(u=Da||Ba(t,n,u,r,h,s,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=l,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,l=t.type===t.elementType?u:ya(t.type,u),o.props=l,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ai(t,s=Ri(n)?Di:Ti.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Ni.current||Da?("function"===typeof d&&(ja(t,n,d,r),v=t.memoizedState),(l=Da||Ba(t,n,l,r,h,v,s)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Pu,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fl(s,i,0,null),e=Ml(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),_u||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rl(r,e,i,-1))}return yl(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Ol(r,u):(u=Ml(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Ol(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&va(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ti),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ul(aa),aa=null))),Pu(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var l=o[s];"children"===s?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):u.hasOwnProperty(s)&&null!=l&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ye(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&k(e,o,c,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(ul(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yl())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Pu(e,t),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return ba(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ti),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(u.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(u.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ur("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){El(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){El(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){El(e,e.return,y)}try{rs(5,e,e.return)}catch(y){El(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){El(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var c=ke(s,o);for(u=0;u<l.length;u+=2){var f=l[u],h=l[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,c)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){El(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){El(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){El(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(c=Xu)||f,ys(t,e),Xu=c):ys(t,e),gs(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){El(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){bs(h);continue}}null!==v?(v.return=d,Zu=v):bs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,s.style.display=pe("display",u))}catch(y){El(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){El(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ls(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){El(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,_s(e,t,n)}function _s(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var l=Xu;if($u=o,(Xu=s)&&!l)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,_s(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=l}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){El(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function bs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){El(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){El(t,i,s)}}var a=t.return;try{as(t)}catch(s){El(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){El(t,o,s)}}}catch(s){El(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Es=Math.ceil,Is=_.ReactCurrentDispatcher,Cs=_.ReactCurrentOwner,Ts=_.ReactCurrentBatchConfig,Ns=0,Ds=null,As=null,Rs=0,Ps=0,Os=Si(0),Ls=0,Ms=null,Fs=0,Vs=0,Us=0,js=null,zs=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Ws=null,Hs=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,el=0;function tl(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Rs?Rs&-Rs:null!==pa.transition?(0===el&&(el=pt()),el):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rl(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Ns)&&e===Ds||(e===Ds&&(0===(2&Ns)&&(Vs|=n),4===Ls&&sl(e,Rs)),il(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Xe()+500,Ui&&Bi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(Zs=-1,el=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xl()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Ns;Ns|=2;var o=pl();for(Ds===e&&Rs===t||(Ks=null,qs=Xe()+500,dl(e,t));;)try{kl();break}catch(s){vl(e,s)}wa(),Is.current=o,Ns=i,null!==As?t=0:(Ds=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Ms,dl(e,0),sl(e,r),il(e,Xe()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=vt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Ms,dl(e,0),sl(e,r),il(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bl(e,zs,Ks);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bl.bind(null,e,zs,Ks),t);break}bl(e,zs,Ks);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(bl.bind(null,e,zs,Ks),r);break}bl(e,zs,Ks);break;default:throw Error(a(329))}}}return il(e,Xe()),e.callbackNode===n?al.bind(null,e):null}function ol(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=zs,zs=n,null!==t&&ul(t)),e}function ul(e){null===zs?zs=e:zs.push.apply(zs,e)}function sl(e,t){for(t&=~Us,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Ns))throw Error(a(327));xl();var t=ht(e,0);if(0===(1&t))return il(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Ms,dl(e,0),sl(e,t),il(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bl(e,zs,Ks),il(e,Xe()),null}function cl(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Xe()+500,Ui&&Bi())}}function fl(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xl();var t=Ns;Ns|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Ns=t))&&Bi()}}function hl(){Ps=Os.current,Ei(Os)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ni),Ei(Ti),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:ba(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Ds=e,As=e=Ol(e.current,null),Rs=Ps=t,Ls=0,Ms=null,Us=Vs=Fs=0,zs=js=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function vl(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,_o=0,Cs.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,l=t;if(t=Rs,s.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,c,t),l=c;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(l),t.updateQueue=y}else p.add(l);break e}if(0===(1&t)){yu(o,c,t),yl();break e}l=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(cu(l,s));break e}}o=l=cu(l,s),4!==Ls&&(Ls=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,l,t));break e;case 1:s=l;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(_){t=_,As===n&&null!==n&&(As=n=n.return);continue}break}}function pl(){var e=Is.current;return Is.current=ou,null===e?ou:e}function yl(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ds||0===(268435455&Fs)&&0===(268435455&Vs)||sl(Ds,Rs)}function ml(e,t){var n=Ns;Ns|=2;var r=pl();for(Ds===e&&Rs===t||(Ks=null,dl(e,t));;)try{gl();break}catch(i){vl(e,i)}if(wa(),Ns=n,Is.current=r,null!==As)throw Error(a(261));return Ds=null,Rs=0,Ls}function gl(){for(;null!==As;)_l(As)}function kl(){for(;null!==As&&!Ye();)_l(As)}function _l(e){var t=Ss(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wl(e):As=t,Cs.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ps)))return void(As=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function bl(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xl()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(As=Ds=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Dl(tt,(function(){return xl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Cs.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,l=-1,c=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(l=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++c===i&&(s=u),d===o&&++f===r&&(l=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(w){El(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ms(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Ts.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ws,Ws=null,e;0!==(1&$s)&&0!==e.tag&&xl(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xl(){if(null!==Ys){var e=_t($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(Zu=c;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===c){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var _=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==_)_.return=u,Zu=_;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(b){El(s,s.return,b)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function Sl(e,t,n){e=Oa(e,t=vu(0,t=cu(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),il(e,t))}function El(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=pu(t,e=cu(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),il(t,e));break}}t=t.return}}function Il(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Xe()-Bs?dl(e,0):Us|=n),il(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Na(e,t))&&(mt(e,t,n),il(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cl(e,n)}function Dl(e,t){return He(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Al(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pl(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Ml(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Rl(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Rl(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Rl(19,n,t,i)).elementType=D,e.lanes=o,e;case P:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case C:u=9;break e;case T:u=11;break e;case A:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rl(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Vl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,a,o,u,s){return e=new jl(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,a,o,u,s){return(e=zl(n,r,!0,e,0,a,0,u,s)).context=Bl(null),n=e.current,(a=Pa(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),il(e,r),e}function Kl(e,t,n,r){var i=t.current,a=tl(),o=nl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rl(e,i,o,a),La(e,i,o)),o}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Wl(e,t),(e=e.alternate)&&Wl(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_u=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _u=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);_u=0!==(131072&e.flags)}else _u=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ai(t,Ti.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Tu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=cu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=cu(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&la(t),null;case 13:return Vu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Pa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gl(o);u.call(e)}}Kl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gl(o);a.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[vi]=o.current,Br(8===e.nodeType?e.parentNode:e),fl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gl(s);u.call(e)}}var s=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=s,e[vi]=s.current,Br(8===e.nodeType?e.parentNode:e),fl((function(){Kl(t,s,n,r)})),s}(n,t,e,i,r);return Gl(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fl((function(){Kl(null,e,null,null)})),t[vi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),il(t,Xe()),0===(6&Ns)&&(qs=Xe()+500,Bi()))}break;case 13:fl((function(){var t=Na(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Hl(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rl(t,e,134217728,tl());Hl(e,134217728)}},xt=function(e){if(13===e.tag){var t=nl(e),n=Na(e,t);if(null!==n)rl(n,e,t,tl());Hl(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cl,Ne=fl;var tc={usingClientEntryPoint:!1,Events:[ki,_i,wi,Ie,Ce,cl]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(fl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:u.current}}t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,p(_,m.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+T(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+T(u=e[l],l);s+=N(u,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,c=a+T(u,l++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)b.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],l=u+1,c=e[l];if(0>a(s,n))l<i&&0>a(c,s)?(e[r]=c,e[l]=n,r=l):(e[r]=s,e[u]=n,r=u);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var l=[],c=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(y=!1,_(e),!p)if(null!==r(l))p=!0,P(b);else{var t=r(c);null!==t&&O(w,t.startTime-e)}}function b(e,n){p=!1,y&&(y=!1,g(I),I=-1),v=!0;var a=d;try{for(_(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(l)&&i(l),_(n)}else i(l);h=r(l)}if(null!==h)var s=!0;else{var f=r(c);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,I=-1,C=5,T=-1;function N(){return!(t.unstable_now()-T<C)}function D(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=D,x=function(){R.postMessage(null)}}else x=function(){m(D,0)};function P(e){E=e,S||(S=!0,x())}function O(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,P(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(y?(g(I),I=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(l,e),p||v||(p=!0,P(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".5139712e.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="make-words:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var f=l[c];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmake_words=self.webpackChunkmake_words||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return bt},SDK_VERSION:function(){return Vn},_DEFAULT_ENTRY_NAME:function(){return En},_addComponent:function(){return Nn},_addOrOverwriteComponent:function(){return Dn},_apps:function(){return Cn},_clearComponents:function(){return On},_components:function(){return Tn},_getProvider:function(){return Rn},_registerComponent:function(){return An},_removeServiceInstance:function(){return Pn},deleteApp:function(){return Bn},getApp:function(){return jn},getApps:function(){return zn},initializeApp:function(){return Un},onLog:function(){return Gn},registerVersion:function(){return Kn},setLogLevel:function(){return Wn}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return u}}(e,t)||s(e,t)||l()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||f(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){var t=w();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function S(e,t,n){return S=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},S.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return S(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)},E(e)}function I(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var T,N="popstate";function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function A(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function P(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?L(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function O(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function L(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function M(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,l=void 0!==s&&s,c=u.history,f=t.Pop,h=null,d=v();function v(){return(c.state||{idx:null}).idx}function p(){f=t.Pop;var e=v(),n=null==e?null:e-d;d=e,h&&h({action:f,location:m.location,delta:n})}function y(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:O(e);return D(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,c.replaceState(C({},c.state,{idx:d}),""));var m={get action(){return f},get location(){return e(u,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(N,p),h=e,function(){u.removeEventListener(N,p),h=null}},createHref:function(e){return n(u,e)},createURL:y,encodeLocation:function(e){var t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=P(m.location,e,n);r&&r(i,e);var a=R(i,d=v()+1),o=m.createHref(i);try{c.pushState(a,"",o)}catch(Nw){if(Nw instanceof DOMException&&"DataCloneError"===Nw.name)throw Nw;u.location.assign(o)}l&&h&&h({action:f,location:m.location,delta:1})},replace:function(e,n){f=t.Replace;var i=P(m.location,e,n);r&&r(i,e);var a=R(i,d=v()),o=m.createHref(i);c.replaceState(a,"",o),l&&h&&h({action:f,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?L(t):t).pathname||"/",n);if(null==r)return null;var i=V(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Q(i[o],$(r));return a}function V(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(D(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=te([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),V(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:H(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=I(U(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function U(e){var t=e.split("/");if(0===t.length)return[];var n,r=o(n=t)||f(n)||s(n)||l(),i=r[0],a=r.slice(1),u=i.endsWith("?"),c=i.replace(/\?$/,"");if(0===a.length)return u?[c,""]:[c];var d=U(a.join("/")),v=[];return v.push.apply(v,h(d.map((function(e){return""===e?c:[c,e].join("/")})))),u&&v.push.apply(v,h(d)),v.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var j=/^:\w+$/,z=3,B=2,q=1,K=10,G=-2,W=function(e){return"*"===e};function H(e,t){var n=e.split("/"),r=n.length;return n.some(W)&&(r+=G),t&&(r+=B),n.filter((function(e){return!W(e)})).reduce((function(e,t){return e+(j.test(t)?z:""===t?q:K)}),r)}function Q(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Y({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);var f=u.route;a.push({params:r,pathname:te([i,c.pathname]),pathnameBase:ne(te([i,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(i=te([i,c.pathnameBase]))}return a}function Y(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);A("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Nw){return A(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Nw+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:u,pathnameBase:s,pattern:e}}function $(e){try{return decodeURI(e)}catch(Nw){return A(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Nw+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function J(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Z(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ee(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=L(e):(D(!(i=C({},e)).pathname||!i.pathname.includes("?"),J("?","pathname","search",i)),D(!i.pathname||!i.pathname.includes("#"),J("#","pathname","hash",i)),D(!i.search||!i.search.includes("#"),J("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var l=u.split("/");".."===l[0];)l.shift(),s-=1;i.pathname=l.join("/")}a=s>=0?t[s]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?L(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:re(a),hash:ie(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!f&&!h||(c.pathname+="/"),c}var te=function(e){return e.join("/").replace(/\/\/+/g,"/")},ne=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},re=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ie=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ae=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(E(Error));function oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ue=["post","put","patch","delete"],se=(new Set(ue),["get"].concat(ue));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var ce=r.createContext(null);var fe=r.createContext(null);var he=r.createContext(null);var de=r.createContext(null);var ve=r.createContext(null);var pe=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ye=r.createContext(null);function me(){return null!=r.useContext(ve)}function ge(){return me()||D(!1),r.useContext(ve).location}function ke(e){r.useContext(de).static||r.useLayoutEffect(e)}function _e(){return r.useContext(pe).isDataRoute?function(){var e=De(Te.UseNavigateStable).router,t=Re(Ne.UseNavigateStable),n=r.useRef(!1);ke((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return i}():function(){me()||D(!1);var e=r.useContext(ce),t=r.useContext(de),n=t.basename,i=t.navigator,a=r.useContext(pe).matches,o=ge().pathname,u=JSON.stringify(Z(a).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);return ke((function(){s.current=!0})),r.useCallback((function(t,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof t){var a=ee(t,JSON.parse(u),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:te([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,u,o,e])}()}function we(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(pe).matches,a=ge().pathname,o=JSON.stringify(Z(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return ee(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function be(e,n,i){me()||D(!1);var a,o=r.useContext(de).navigator,u=r.useContext(pe).matches,s=u[u.length-1],l=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,ge());if(n){var h,d="string"===typeof n?L(n):n;"/"===c||(null==(h=d.pathname)?void 0:h.startsWith(c))||D(!1),a=d}else a=f;var v=a.pathname||"/",p=F(e,{pathname:"/"===c?v:v.slice(c.length)||"/"});var y=Ce(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:te([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:te([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&y?r.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},y):y}function xe(){var e=function(){var e,t=r.useContext(ye),n=Ae(Ne.UseRouteError),i=Re(Ne.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=oe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Se=r.createElement(xe,null),Ee=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return m(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(pe.Provider,{value:this.props.routeContext},r.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ie(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ce);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(pe.Provider,{value:t},i)}function Ce(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||D(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,l=null;n&&(l=i.route.errorElement||Se);var c=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?l:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ie,{match:i,routeContext:{outlet:e,matches:c,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Ee,{location:n.location,revalidation:n.revalidation,component:l,error:s,children:f(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):f()}),null)}var Te=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Te||{}),Ne=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ne||{});function De(e){var t=r.useContext(ce);return t||D(!1),t}function Ae(e){var t=r.useContext(fe);return t||D(!1),t}function Re(e){var t=function(e){var t=r.useContext(pe);return t||D(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||D(!1),n.route.id}i.startTransition;function Pe(e){D(!1)}function Oe(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,l=void 0===s?t.Pop:s,c=e.navigator,f=e.static,h=void 0!==f&&f;me()&&D(!1);var d=i.replace(/^\/*/,"/"),v=r.useMemo((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof u&&(u=L(u));var p=u,y=p.pathname,m=void 0===y?"/":y,g=p.search,k=void 0===g?"":g,_=p.hash,w=void 0===_?"":_,b=p.state,x=void 0===b?null:b,S=p.key,E=void 0===S?"default":S,I=r.useMemo((function(){var e=X(m,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:E},navigationType:l}}),[d,m,k,w,x,E,l]);return null==I?null:r.createElement(de.Provider,{value:v},r.createElement(ve.Provider,{children:o,value:I}))}function Le(e){var t=e.children,n=e.location;return be(Ve(t),n)}var Me=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Me||{}),Fe=new Promise((function(){}));r.Component;function Ve(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(h(t),[i]);if(e.type!==r.Fragment){e.type!==Pe&&D(!1),e.props.index&&e.props.children&&D(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),n.push(o)}else n.push.apply(n,Ve(e.props.children,a))}})),n}function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ue.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var ze=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var Be=i.startTransition;function qe(e){var t,n=e.basename,i=e.children,a=e.future,o=e.window,u=r.useRef();null==u.current&&(u.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),M((function(e,t){var n=e.location;return P("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:O(t)}),null,t)));var s=u.current,l=c(r.useState({action:s.action,location:s.location}),2),f=l[0],h=l[1],d=(a||{}).v7_startTransition,v=r.useCallback((function(e){d&&Be?Be((function(){return h(e)})):h(e)}),[h,d]);return r.useLayoutEffect((function(){return s.listen(v)}),[s,v]),r.createElement(Oe,{basename:n,children:i,location:f.location,navigationType:f.action,navigator:s})}var Ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,l=e.target,c=e.to,f=e.preventScrollReset,h=je(e,ze),d=r.useContext(de).basename,v=!1;if("string"===typeof c&&Ge.test(c)&&(n=c,Ke))try{var p=new URL(window.location.href),y=c.startsWith("//")?new URL(p.protocol+c):new URL(c),m=X(y.pathname,d);y.origin===p.origin&&null!=m?c=m+y.search+y.hash:v=!0}catch(_){}var g=function(e,t){var n=(void 0===t?{}:t).relative;me()||D(!1);var i=r.useContext(de),a=i.basename,o=i.navigator,u=we(e,{relative:n}),s=u.hash,l=u.pathname,c=u.search,f=l;return"/"!==a&&(f="/"===l?a:te([a,l])),o.createHref({pathname:f,search:c,hash:s})}(c,{relative:a}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,l=_e(),c=ge(),f=we(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:O(c)===O(f);l(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[c,l,f,a,o,i,e,u,s])}(c,{replace:u,state:s,target:l,preventScrollReset:f,relative:a});return r.createElement("a",Ue({},h,{href:n||g,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:t,target:l}))}));var He,Qe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(He||(He={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qe||(Qe={}));var Ye=n(184);var $e=function(){var e=parseInt(sessionStorage.getItem("remainingTime"))||100,t=c((0,r.useState)(e),2),n=t[0],i=t[1],a=c((0,r.useState)(!1),2),o=a[0],u=a[1];return(0,r.useEffect)((function(){var e=setInterval((function(){n>0?i(n-1):(clearInterval(e),u(!0))}),1e3);return function(){return clearInterval(e)}}),[n]),(0,r.useEffect)((function(){sessionStorage.setItem("remainingTime",n.toString())}),[n]),o?(window.location.href="/studentdashboard",null):(0,Ye.jsxs)("p",{children:["Time remaining: ",n," seconds"]})};function Xe(){Xe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),u=new A(r||[]);return i(o,"_invoke",{value:C(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",m={};function g(){}function k(){}function _(){}var w={};l(w,o,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(R([])));x&&x!==n&&r.call(x,o)&&(w=x);var S=_.prototype=g.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=f(e[i],e,a);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==v(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=h;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=T(u,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=f(t,n,r);if("normal"===l.type){if(i=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(v(t)+" is not iterable")}return k.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:k,configurable:!0}),k.displayName=l(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(I.prototype),l(I.prototype,u,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),l(S,s,"Generator"),l(S,o,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Je(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Nw){return void n(Nw)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Je(a,r,i,o,u,"next",e)}function u(e){Je(a,r,i,o,u,"throw",e)}o(void 0)}))}}function et(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tt=!1,nt=!1,rt="${JSCORE_VERSION}",it=function(e,t){if(!e)throw at(t)},at=function(e){return new Error("Firebase Database ("+rt+") INTERNAL ASSERT FAILED: "+e)},ot=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ut={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ot(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new st;var l=a<<2|o>>4;if(r.push(l),64!==u){var c=o<<4&240|u>>2;if(r.push(c),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},st=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return m(n)}(E(Error)),lt=function(e){var t=ot(e);return ut.encodeByteArray(t,!0)},ct=function(e){return lt(e).replace(/\./g,"")},ft=function(e){try{return ut.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ht(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ht(e[n],t[n]));return e}var dt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},vt=function(){try{return dt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ft(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},pt=function(){var e;return null===(e=vt())||void 0===e?void 0:e.config},yt=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function mt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function gt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function kt(){return!0===tt||!0===nt}function _t(){return!function(){var e,t=null===(e=vt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var bt=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),xt.prototype.create),a}return m(n)}(E(Error)),xt=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(St,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new bt(n,a,t)}}]),e}();var St=/\{\$([^}]+)}/g;function Et(e){return JSON.parse(e)}function It(e){return JSON.stringify(e)}var Ct=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Et(ft(a[0])||""),n=Et(ft(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Dt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function At(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Rt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Pt(u)&&Pt(s)){if(!Rt(u,s))return!1}else if(u!==s)return!1}for(var l=0,c=r;l<c.length;l++){var f=c[l];if(!n.includes(f))return!1}return!0}function Pt(e){return null!==e&&"object"===typeof e}var Ot=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return m(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,l=this.chain_[0],c=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],v=0;v<80;v++){v<40?v<20?(u=h^c&(f^h),s=1518500249):(u=c^f^h,s=1859775393):v<60?(u=c&f|h&(c|f),s=2400959708):(u=c^f^h,s=3395469782);var p=(l<<5|l>>>27)+u+d+s+n[v]&4294967295;d=h,h=f,f=4294967295&(c<<30|c>>>2),c=l,l=p}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Lt(e,t){var n=new Mt(e,t);return n.subscribe.bind(n)}var Mt=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=I(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ft),void 0===r.error&&(r.error=Ft),void 0===r.complete&&(r.complete=Ft);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ft(){}function Vt(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Ut=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function jt(e){return e&&e._delegate?e._delegate:e}var zt=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Bt="[DEFAULT]",qt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new yt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bt})}catch(s){}var t,n=I(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ze(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=I(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Bt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.component?this.component.multipleInstances?e:Bt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Kt,Gt,Wt=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new qt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ht=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gt||(Gt={}));var Qt={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},Yt=Gt.INFO,$t=(et(Kt={},Gt.DEBUG,"log"),et(Kt,Gt.VERBOSE,"log"),et(Kt,Gt.INFO,"info"),et(Kt,Gt.WARN,"warn"),et(Kt,Gt.ERROR,"error"),Kt),Xt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=$t[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Jt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Yt,this._logHandler=Xt,this._userLogHandler=null,Ht.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Gt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Qt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Gt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Gt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gt.INFO].concat(t)),this._logHandler.apply(this,[this,Gt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gt.WARN].concat(t)),this._logHandler.apply(this,[this,Gt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gt.ERROR].concat(t)),this._logHandler.apply(this,[this,Gt.ERROR].concat(t))}}]),e}();function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tn,nn,rn=function(e,t){return t.some((function(t){return e instanceof t}))};var an=new WeakMap,on=new WeakMap,un=new WeakMap,sn=new WeakMap,ln=new WeakMap;var cn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return on.get(e);if("objectStoreNames"===t)return e.objectStoreNames||un.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function fn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(nn||(nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(vn(this),n),dn(an.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dn(e.apply(vn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[vn(this),t].concat(r));return un.set(a,t.sort?t.sort():[t]),dn(a)}}function hn(e){return"function"===typeof e?fn(e):(e instanceof IDBTransaction&&function(e){if(!on.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));on.set(e,t)}}(e),rn(e,tn||(tn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,cn):e)}function dn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(dn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&an.set(t,e)})).catch((function(){})),ln.set(t,e),t}(e);if(sn.has(e))return sn.get(e);var t=hn(e);return t!==e&&(sn.set(e,t),ln.set(t,e)),t}var vn=function(e){return ln.get(e)};var pn,yn,mn=["get","getKey","getAll","getAllKeys","count"],gn=["put","add","delete","clear"],kn=new Map;function _n(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(kn.get(t))return kn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=gn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||mn.includes(n))){var a=function(){var e=Ze(Xe().mark((function e(t){var a,o,u,s,l,c,f=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=f[c];return r&&(u=u.index(l.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return kn.set(t,a),a}}}cn=function(e){return en(en({},e),{},{get:function(t,n,r){return _n(t,n)||e.get(t,n,r)},has:function(t,n){return!!_n(t,n)||e.has(t,n)}})}(cn);var wn=function(){function e(t){d(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var bn="@firebase/app",xn="0.9.17",Sn=new Jt("@firebase/app"),En="[DEFAULT]",In=(et(pn={},bn,"fire-core"),et(pn,"@firebase/app-compat","fire-core-compat"),et(pn,"@firebase/analytics","fire-analytics"),et(pn,"@firebase/analytics-compat","fire-analytics-compat"),et(pn,"@firebase/app-check","fire-app-check"),et(pn,"@firebase/app-check-compat","fire-app-check-compat"),et(pn,"@firebase/auth","fire-auth"),et(pn,"@firebase/auth-compat","fire-auth-compat"),et(pn,"@firebase/database","fire-rtdb"),et(pn,"@firebase/database-compat","fire-rtdb-compat"),et(pn,"@firebase/functions","fire-fn"),et(pn,"@firebase/functions-compat","fire-fn-compat"),et(pn,"@firebase/installations","fire-iid"),et(pn,"@firebase/installations-compat","fire-iid-compat"),et(pn,"@firebase/messaging","fire-fcm"),et(pn,"@firebase/messaging-compat","fire-fcm-compat"),et(pn,"@firebase/performance","fire-perf"),et(pn,"@firebase/performance-compat","fire-perf-compat"),et(pn,"@firebase/remote-config","fire-rc"),et(pn,"@firebase/remote-config-compat","fire-rc-compat"),et(pn,"@firebase/storage","fire-gcs"),et(pn,"@firebase/storage-compat","fire-gcs-compat"),et(pn,"@firebase/firestore","fire-fst"),et(pn,"@firebase/firestore-compat","fire-fst-compat"),et(pn,"fire-js","fire-js"),et(pn,"firebase","fire-js-all"),pn),Cn=new Map,Tn=new Map;function Nn(e,t){try{e.container.addComponent(t)}catch(n){Sn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Dn(e,t){e.container.addOrOverwriteComponent(t)}function An(e){var t=e.name;if(Tn.has(t))return Sn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tn.set(t,e);var n,r=I(Cn.values());try{for(r.s();!(n=r.n()).done;){Nn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Rn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Pn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:En;Rn(e,t).clearInstance(n)}function On(){Tn.clear()}var Ln=(et(yn={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),et(yn,"bad-app-name","Illegal App name: '{$appName}"),et(yn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),et(yn,"app-deleted","Firebase App named '{$appName}' already deleted"),et(yn,"no-options","Need to provide options, when not being deployed to hosting via source."),et(yn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),et(yn,"invalid-log-argument","First argument to `onLog` must be null or a function."),et(yn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),et(yn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),et(yn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),et(yn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),yn),Mn=new xt("app","Firebase",Ln),Fn=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zt("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}}]),e}(),Vn="10.3.0";function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:En,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Mn.create("bad-app-name",{appName:String(i)});if(n||(n=pt()),!n)throw Mn.create("no-options");var a=Cn.get(i);if(a){if(Rt(n,a.options)&&Rt(r,a.config))return a;throw Mn.create("duplicate-app",{appName:i})}var o,u=new Wt(i),s=I(Tn.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;u.addComponent(l)}}catch(f){s.e(f)}finally{s.f()}var c=new Fn(n,r,u);return Cn.set(i,c),c}function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,t=Cn.get(e);if(!t&&e===En&&pt())return Un();if(!t)throw Mn.create("no-app",{appName:e});return t}function zn(){return Array.from(Cn.values())}function Bn(e){return qn.apply(this,arguments)}function qn(){return(qn=Ze(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Cn.has(n)){e.next=6;break}return Cn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kn(e,t,n){var r,i=null!==(r=In[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Sn.warn(u.join(" "))}An(new zt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Gn(e,t){if(null!==e&&"function"!==typeof e)throw Mn.create("invalid-log-argument");!function(e,t){var n,r=I(Ht);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Qt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Gt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Wn(e){var t;t=e,Ht.forEach((function(e){e.setLogLevel(t)}))}var Hn="firebase-heartbeat-database",Qn=1,Yn="firebase-heartbeat-store",$n=null;function Xn(){return $n||($n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=dn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(dn(u.result),e.oldVersion,e.newVersion,dn(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Hn,Qn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Yn)}}).catch((function(e){throw Mn.create("idb-open",{originalErrorMessage:e.message})}))),$n}function Jn(e){return Zn.apply(this,arguments)}function Zn(){return Zn=Ze(Xe().mark((function e(t){var n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xn();case 3:return n=e.sent,e.next=6,n.transaction(Yn).objectStore(Yn).get(nr(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof bt?Sn.warn(e.t0.message):(i=Mn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Sn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Zn.apply(this,arguments)}function er(e,t){return tr.apply(this,arguments)}function tr(){return tr=Ze(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xn();case 3:return r=e.sent,i=r.transaction(Yn,"readwrite"),a=i.objectStore(Yn),e.next=8,a.put(n,nr(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof bt?Sn.warn(e.t0.message):(o=Mn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Sn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),tr.apply(this,arguments)}function nr(e){return"".concat(e.name,"!").concat(e.options.appId)}var rr=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new sr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=Ze(Xe().mark((function e(){var t,n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ir(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ze(Xe().mark((function e(){var t,n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ir(),n=ar(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ct(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ir(){return(new Date).toISOString().substring(0,10)}function ar(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=I(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),lr(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),lr(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var or,ur,sr=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Nw){t(Nw)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ze(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Jn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ze(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",er(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ze(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",er(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function lr(e){return ct(JSON.stringify({version:2,heartbeats:e})).length}or="",An(new zt("platform-logger",(function(e){return new wn(e)}),"PRIVATE")),An(new zt("heartbeat",(function(e){return new rr(e)}),"PRIVATE")),Kn(bn,xn,or),Kn(bn,xn,"esm2017"),Kn("fire-js","");var cr=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Nn(t,new zt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Bn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:En;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:En;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Nn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Dn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),fr=(et(ur={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),et(ur,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ur),hr=new xt("app-compat","Firebase",fr);var dr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Un(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Tt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Kn,setLogLevel:Wn,onLog:Gn,apps:null,SDK_VERSION:Vn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(An(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw hr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ht(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Tt(n,e=e||En))throw hr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(cr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ht(n,e)},createSubscribe:Lt,ErrorFactory:xt,deepExtend:ht}),n}(),vr=new Jt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){vr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var pr=self.firebase.SDK_VERSION;pr&&pr.indexOf("LITE")>=0&&vr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var yr=dr;!function(e){Kn("@firebase/app-compat","0.2.17",e)}();function mr(){return mr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mr.apply(this,arguments)}yr.registerVersion("firebase","10.3.0","app-compat");var gr,kr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_r={},wr=wr||{},br=kr||self;function xr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Sr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Er="closure_uid_"+(1e9*Math.random()>>>0),Ir=0;function Cr(e,t,n){return e.call.apply(e.bind,arguments)}function Tr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Nr(e,t,n){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cr:Tr).apply(null,arguments)}function Dr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ar(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Rr(){this.s=this.s,this.o=this.o}Rr.prototype.s=!1,Rr.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Er)&&e[Er]||(e[Er]=++Ir))},Rr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Pr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Or(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Lr(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(xr(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Mr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Mr.prototype.h=function(){this.defaultPrevented=!0};var Fr=function(){if(!br.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{br.addEventListener("test",(function(){}),t),br.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Vr(e){return/^[\s\xa0]*$/.test(e)}function Ur(){var e=br.navigator;return e&&(e=e.userAgent)?e:""}function jr(e){return-1!=Ur().indexOf(e)}function zr(e){return zr[" "](e),e}zr[" "]=function(){};var Br,qr,Kr=jr("Opera"),Gr=jr("Trident")||jr("MSIE"),Wr=jr("Edge"),Hr=Wr||Gr,Qr=jr("Gecko")&&!(-1!=Ur().toLowerCase().indexOf("webkit")&&!jr("Edge"))&&!(jr("Trident")||jr("MSIE"))&&!jr("Edge"),Yr=-1!=Ur().toLowerCase().indexOf("webkit")&&!jr("Edge");function $r(){var e=br.document;return e?e.documentMode:void 0}e:{var Xr="",Jr=function(){var e=Ur();return Qr?/rv:([^\);]+)(\)|;)/.exec(e):Wr?/Edge\/([\d\.]+)/.exec(e):Gr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Yr?/WebKit\/(\S+)/.exec(e):Kr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Jr&&(Xr=Jr?Jr[1]:""),Gr){var Zr=$r();if(null!=Zr&&Zr>parseFloat(Xr)){Br=String(Zr);break e}}Br=Xr}if(br.document&&Gr){var ei=$r();qr=ei||(parseInt(Br,10)||void 0)}else qr=void 0;var ti=qr;function ni(e,t){if(Mr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Qr){e:{try{zr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ri[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ni.$.h.call(this)}}Ar(ni,Mr);var ri={2:"touch",3:"pen",4:"mouse"};ni.prototype.h=function(){ni.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ii="closure_listenable_"+(1e6*Math.random()|0),ai=0;function oi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++ai,this.fa=this.ia=!1}function ui(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function si(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function li(e){var t={};for(var n in e)t[n]=e[n];return t}var ci="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fi(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ci.length;a++)n=ci[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function hi(e){this.src=e,this.g={},this.h=0}function di(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Pr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ui(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function vi(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}hi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=vi(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new oi(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var pi="closure_lm_"+(1e6*Math.random()|0),yi={};function mi(e,t,n,r,i){if(r&&r.once)return ki(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)mi(e,t[a],n,r,i);return null}return n=Ii(n),e&&e[ii]?e.O(t,n,Sr(r)?!!r.capture:!!r,i):gi(e,t,n,!1,r,i)}function gi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Sr(i)?!!i.capture:!!i,u=Si(e);if(u||(e[pi]=u=new hi(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Fr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ki(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ki(e,t[a],n,r,i);return null}return n=Ii(n),e&&e[ii]?e.P(t,n,Sr(r)?!!r.capture:!!r,i):gi(e,t,n,!0,r,i)}function _i(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)_i(e,t[a],n,r,i);else r=Sr(r)?!!r.capture:!!r,n=Ii(n),e&&e[ii]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=vi(a=e.g[t],n,r,i))&&(ui(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Si(e))&&(t=e.g[t.toString()],e=-1,t&&(e=vi(t,n,r,i)),(n=-1<e?t[e]:null)&&wi(n))}function wi(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ii])di(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Si(t))?(di(n,e),0==n.h&&(n.src=null,t[pi]=null)):ui(e)}}}function bi(e){return e in yi?yi[e]:yi[e]="on"+e}function xi(e,t){if(e.fa)e=!0;else{t=new ni(t,this);var n=e.listener,r=e.la||e.src;e.ia&&wi(e),e=n.call(r,t)}return e}function Si(e){return(e=e[pi])instanceof hi?e:null}var Ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ii(e){return"function"===typeof e?e:(e[Ei]||(e[Ei]=function(t){return e.handleEvent(t)}),e[Ei])}function Ci(){Rr.call(this),this.i=new hi(this),this.S=this,this.J=null}function Ti(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Mr(t,e);else if(t instanceof Mr)t.target=t.target||e;else{var i=t;fi(t=new Mr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ni(o,r,!0,t)&&i}if(i=Ni(o=t.g=e,r,!0,t)&&i,i=Ni(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ni(o=t.g=n[a],r,!1,t)&&i}function Ni(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&di(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ar(Ci,Rr),Ci.prototype[ii]=!0,Ci.prototype.removeEventListener=function(e,t,n,r){_i(this,e,t,n,r)},Ci.prototype.N=function(){if(Ci.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ui(n[r]);delete t.g[e],t.h--}}this.J=null},Ci.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ci.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Di=br.JSON.stringify,Ai=function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Ri(){var e=ji,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pi=function(){function e(){d(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=Oi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Oi=new Ai((function(){return new Li}),(function(e){return e.reset()})),Li=function(){function e(){d(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Mi(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Fi(e){br.setTimeout((function(){throw e}),0)}var Vi,Ui=!1,ji=new Pi,zi=function(){var e=br.Promise.resolve(void 0);Vi=function(){e.then(Bi)}},Bi=function(){for(var e;e=Ri();){try{e.h.call(e.g)}catch(n){Fi(n)}var t=Oi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ui=!1};function qi(e,t){Ci.call(this),this.h=e||1,this.g=t||br,this.j=Nr(this.qb,this),this.l=Date.now()}function Ki(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Gi(e,t,n){if("function"===typeof e)n&&(e=Nr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Nr(e.handleEvent,e)}return 2147483647<Number(t)?-1:br.setTimeout(e,t||0)}function Wi(e){e.g=Gi((function(){e.g=null,e.i&&(e.i=!1,Wi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ar(qi,Ci),(gr=qi.prototype).ga=!1,gr.T=null,gr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ti(this,"tick"),this.ga&&(Ki(this),this.start()))}},gr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gr.N=function(){qi.$.N.call(this),Ki(this),delete this.g};var Hi=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Wi(this)}},{key:"N",value:function(){mr(_(n.prototype),"N",this).call(this),this.g&&(br.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Rr);function Qi(e){Rr.call(this),this.h=e,this.g={}}Ar(Qi,Rr);var Yi=[];function $i(e,t,n,r){Array.isArray(n)||(n&&(Yi[0]=n.toString()),n=Yi);for(var i=0;i<n.length;i++){var a=mi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Xi(e){si(e.g,(function(e,t){this.g.hasOwnProperty(t)&&wi(e)}),e),e.g={}}function Ji(){this.g=!0}function Zi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Di(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Qi.prototype.N=function(){Qi.$.N.call(this),Xi(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ji.prototype.Ea=function(){this.g=!1},Ji.prototype.info=function(){};var ea={},ta=null;function na(){return ta=ta||new Ci}function ra(e){Mr.call(this,ea.Ta,e)}function ia(e){var t=na();Ti(t,new ra(t))}function aa(e,t){Mr.call(this,ea.STAT_EVENT,e),this.stat=t}function oa(e){var t=na();Ti(t,new aa(t,e))}function ua(e,t){Mr.call(this,ea.Ua,e),this.size=t}function sa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return br.setTimeout((function(){e()}),t)}ea.Ta="serverreachability",Ar(ra,Mr),ea.STAT_EVENT="statevent",Ar(aa,Mr),ea.Ua="timingevent",Ar(ua,Mr);var la={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ca={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fa(){}function ha(e){return e.h||(e.h=e.i())}function da(){}fa.prototype.h=null;var va,pa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ya(){Mr.call(this,"d")}function ma(){Mr.call(this,"c")}function ga(){}function ka(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Qi(this),this.P=wa,e=Hr?125:void 0,this.V=new qi(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _a}function _a(){this.i=null,this.g="",this.h=!1}Ar(ya,Mr),Ar(ma,Mr),Ar(ga,fa),ga.prototype.g=function(){return new XMLHttpRequest},ga.prototype.i=function(){return{}},va=new ga;var wa=45e3,ba={},xa={};function Sa(e,t,n){e.L=1,e.v=qa(Va(t)),e.s=n,e.S=!0,Ea(e,null)}function Ea(e,t){e.G=Date.now(),Na(e),e.A=Va(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),no(n.i,"t",r),e.C=0,n=e.l.J,e.h=new _a,e.g=iu(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Hi(Nr(e.Pa,e,e.g),e.O)),$i(e.U,e.g,"readystatechange",e.nb),t=e.I?li(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ia(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var l=u[s].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&"type"==f[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ia(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ca(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Ta(e,n))==xa){4==t&&(e.o=4,oa(14),i=!1),Zi(e.j,e.m,null,"[Incomplete Response]");break}if(r==ba){e.o=4,oa(15),Zi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Zi(e.j,e.m,r,null),Oa(e,r)}Ia(e)&&r!=xa&&r!=ba&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,oa(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$o(t),t.M=!0,oa(11))):(Zi(e.j,e.m,n,"[Invalid Chunked Response]"),Pa(e),Ra(e))}function Ta(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?xa:(n=Number(t.substring(n,r)),isNaN(n)?ba:(r+=1)+n>t.length?xa:(t=t.slice(r,r+n),e.C=r+n,t))}function Na(e){e.Y=Date.now()+e.P,Da(e,e.P)}function Da(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=sa(Nr(e.lb,e),t)}function Aa(e){e.B&&(br.clearTimeout(e.B),e.B=null)}function Ra(e){0==e.l.H||e.J||Zo(e.l,e)}function Pa(e){Aa(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ki(e.V),Xi(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Oa(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||lo(n.i,e)))if(!e.K&&lo(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Jo(n),Bo(n)}Yo(n),oa(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=sa(Nr(n.ib,n),6e3));if(1>=so(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else tu(n,11)}else if((e.K||n.g==e)&&Jo(n),!Vr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var f=r.i;f.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(co(f,f.h),f.h=null))}if(r.F){var h=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Ba(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=ru(r,r.J?r.pa:null,r.Y),d.K){fo(r.i,d);var v=d,p=r.L;p&&v.setTimeout(p),v.B&&(Aa(v),Na(v)),r.g=d}else Qo(r);0<n.j.length&&Ko(n)}else"stop"!=a[0]&&"close"!=a[0]||tu(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?tu(n,7):zo(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}ia()}catch(a){}}function La(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(xr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(xr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(gr=ka.prototype).setTimeout=function(e){this.P=e},gr.nb=function(e){e=e.target;var t=this.M;t&&3==Lo(e)?t.l():this.Pa(e)},gr.Pa=function(e){try{if(e==this.g)e:{var t=Lo(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Hr||this.g&&(this.h.h||this.g.ja()||Mo(this.g)))){this.J||4!=t||7==n||ia(),Aa(this);var r=this.g.da();this.ca=r;t:if(Ia(this)){var i=Mo(this.g);e="";var a=i.length,o=4==Lo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Pa(this),Ra(this);var u="";break t}this.h.i=new br.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vr(s)){var c=s;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,oa(12),Pa(this),Ra(this);break e}Zi(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oa(this,r)}this.S?(Ca(this,t,u),Hr&&this.i&&3==t&&($i(this.U,this.V,"tick",this.mb),this.V.start())):(Zi(this.j,this.m,u,null),Oa(this,u)),4==t&&Pa(this),this.i&&!this.J&&(4==t?Zo(this.l,this):(this.i=!1,Na(this)))}else(function(e){var t={};e=(e.g&&2<=Lo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Vr(e[n])){var r=Mi(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,oa(12)):(this.o=0,oa(13)),Pa(this),Ra(this)}}}catch(t){}},gr.mb=function(){if(this.g){var e=Lo(this.g),t=this.g.ja();this.C<t.length&&(Aa(this),Ca(this,e,t),this.i&&4!=e&&Na(this))}},gr.cancel=function(){this.J=!0,Pa(this)},gr.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(ia(),oa(17)),Pa(this),this.o=2,Ra(this)):Da(this,this.Y-e)};var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fa(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Fa){this.h=e.h,Ua(this,e.j),this.s=e.s,this.g=e.g,ja(this,e.m),this.l=e.l;var t=e.i,n=new Ja;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),za(this,n),this.o=e.o}else e&&(t=String(e).match(Ma))?(this.h=!1,Ua(this,t[1]||"",!0),this.s=Ka(t[2]||""),this.g=Ka(t[3]||"",!0),ja(this,t[4]),this.l=Ka(t[5]||"",!0),za(this,t[6]||"",!0),this.o=Ka(t[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}function Va(e){return new Fa(e)}function Ua(e,t,n){e.j=n?Ka(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ja(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function za(e,t,n){t instanceof Ja?(e.i=t,function(e,t){t&&!e.j&&(Za(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(eo(this,t),no(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ga(t,$a)),e.i=new Ja(t,e.h))}function Ba(e,t,n){e.i.set(t,n)}function qa(e){return Ba(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ka(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ga(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ga(t,Ha,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ga(t,Ha,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ga(n,"/"==n.charAt(0)?Ya:Qa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ga(n,Xa)),e.join("")};var Ha=/[#\/\?@]/g,Qa=/[#\?:]/g,Ya=/[#\?]/g,$a=/[#\?@]/g,Xa=/#/g;function Ja(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Za(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function eo(e,t){Za(e),t=ro(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function to(e,t){return Za(e),t=ro(e,t),e.g.has(t)}function no(e,t,n){eo(e,t),0<n.length&&(e.i=null,e.g.set(ro(e,t),Or(n)),e.h+=n.length)}function ro(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(gr=Ja.prototype).add=function(e,t){Za(this),this.i=null,e=ro(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},gr.forEach=function(e,t){Za(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},gr.ta=function(){Za(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},gr.Z=function(e){Za(this);var t=[];if("string"===typeof e)to(this,e)&&(t=t.concat(this.g.get(ro(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},gr.set=function(e,t){return Za(this),this.i=null,to(this,e=ro(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},gr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},gr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var io=m((function e(t,n){d(this,e),this.g=t,this.map=n}));function ao(e){this.l=e||oo,br.PerformanceNavigationTiming?e=0<(e=br.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(br.g&&br.g.Ka&&br.g.Ka()&&br.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var oo=10;function uo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function so(e){return e.h?1:e.g?e.g.size:0}function lo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function co(e,t){e.g?e.g.add(t):e.h=t}function fo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ho(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=I(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Or(e.i)}ao.prototype.cancel=function(){if(this.i=ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=I(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var vo,po=function(){function e(){d(this,e)}return m(e,[{key:"stringify",value:function(e){return br.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return br.JSON.parse(e,void 0)}}]),e}();function yo(){this.g=new po}function mo(e,t,n){var r=n||"";try{La(e,(function(e,n){var i=e;Sr(e)&&(i=Di(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function go(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ko(e){this.l=e.fc||null,this.j=e.ob||!1}function _o(e,t){Ci.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=wo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ar(ko,fa),ko.prototype.g=function(){return new _o(this.l,this.j)},ko.prototype.i=(vo={},function(){return vo}),Ar(_o,Ci);var wo=0;function bo(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function xo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,So(e)}function So(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(gr=_o.prototype).open=function(e,t){if(this.readyState!=wo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,So(this)},gr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||br).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},gr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xo(this)),this.readyState=wo},gr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,So(this)),this.g&&(this.readyState=3,So(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof br.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bo(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},gr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xo(this):So(this),3==this.readyState&&bo(this)}},gr.Za=function(e){this.g&&(this.response=this.responseText=e,xo(this))},gr.Ya=function(e){this.g&&(this.response=e,xo(this))},gr.ka=function(){this.g&&xo(this)},gr.setRequestHeader=function(e,t){this.v.append(e,t)},gr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},gr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Eo=br.JSON.parse;function Io(e){Ci.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Co,this.L=this.M=!1}Ar(Io,Ci);var Co="",To=/^https?$/i,No=["POST","PUT"];function Do(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ao(e),Po(e)}function Ao(e){e.F||(e.F=!0,Ti(e,"complete"),Ti(e,"error"))}function Ro(e){if(e.h&&"undefined"!=typeof wr&&(!e.C[1]||4!=Lo(e)||2!=e.da()))if(e.v&&4==Lo(e))Gi(e.La,0,e);else if(Ti(e,"readystatechange"),4==Lo(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Ma)[1]||null;!a&&br.self&&br.self.location&&(a=br.self.location.protocol.slice(0,-1)),i=!To.test(a?a.toLowerCase():"")}t=i}if(t)Ti(e,"complete"),Ti(e,"success");else{e.m=6;try{var o=2<Lo(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Ao(e)}}finally{Po(e)}}}function Po(e,t){if(e.g){Oo(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Ti(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Oo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(br.clearTimeout(e.A),e.A=null)}function Lo(e){return e.g?e.g.readyState:0}function Mo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Co:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(qu){return null}}function Fo(e){var t="";return si(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Vo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Fo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ba(e,t,n))}function Uo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function jo(e){this.Ga=0,this.j=[],this.l=new Ji,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uo("baseRetryDelayMs",5e3,e),this.hb=Uo("retryDelaySeedMs",1e4,e),this.eb=Uo("forwardChannelMaxRetries",2,e),this.xa=Uo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ao(e&&e.concurrentRequestLimit),this.Ja=new yo,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function zo(e){if(qo(e),3==e.H){var t=e.W++,n=Va(e.I);if(Ba(n,"SID",e.K),Ba(n,"RID",t),Ba(n,"TYPE","terminate"),Wo(e,n),(t=new ka(e,e.l,t)).L=2,t.v=qa(Va(n)),n=!1,br.navigator&&br.navigator.sendBeacon)try{n=br.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&br.Image&&((new Image).src=t.v,n=!0),n||(t.g=iu(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Na(t)}nu(e)}function Bo(e){e.g&&($o(e),e.g.cancel(),e.g=null)}function qo(e){Bo(e),e.u&&(br.clearTimeout(e.u),e.u=null),Jo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&br.clearTimeout(e.m),e.m=null)}function Ko(e){if(!uo(e.i)&&!e.m){e.m=!0;var t=e.Na;Vi||zi(),Ui||(Vi(),Ui=!0),ji.add(t,e),e.C=0}}function Go(e,t){var n;n=t?t.m:e.W++;var r=Va(e.I);Ba(r,"SID",e.K),Ba(r,"RID",n),Ba(r,"AID",e.V),Wo(e,r),e.o&&e.s&&Vo(r,e.o,e.s),n=new ka(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ho(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),co(e.i,n),Sa(n,r,t)}function Wo(e,t){e.na&&si(e.na,(function(e,n){Ba(t,n,e)})),e.h&&La({},(function(e,n){Ba(t,n,e)}))}function Ho(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Nr(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var l=i[s].g,c=i[s].map;if(0>(l-=a))a=Math.max(0,i[s].g-100),u=!1;else try{mo(c,o,"req"+l+"_")}catch(ul){r&&r(c)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Qo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Vi||zi(),Ui||(Vi(),Ui=!0),ji.add(t,e),e.A=0}}function Yo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=sa(Nr(e.Ma,e),eu(e,e.A)),e.A++,!0)}function $o(e){null!=e.B&&(br.clearTimeout(e.B),e.B=null)}function Xo(e){e.g=new ka(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Va(e.wa);Ba(t,"RID","rpc"),Ba(t,"SID",e.K),Ba(t,"AID",e.V),Ba(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ba(t,"TO",e.qa),Ba(t,"TYPE","xmlhttp"),Wo(e,t),e.o&&e.s&&Vo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=qa(Va(t)),n.s=null,n.S=!0,Ea(n,e)}function Jo(e){null!=e.v&&(br.clearTimeout(e.v),e.v=null)}function Zo(e,t){var n=null;if(e.g==t){Jo(e),$o(e),e.g=null;var r=2}else{if(!lo(e.i,t))return;n=t.F,fo(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Ti(r=na(),new ua(r,n)),Ko(e)}else Qo(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(so(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=sa(Nr(e.Na,e,t),eu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Yo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:tu(e,5);break;case 4:tu(e,10);break;case 3:tu(e,6);break;default:tu(e,2)}}function eu(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function tu(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Nr(e.pb,e);n||(n=new Fa("//www.google.com/images/cleardot.gif"),br.location&&"http"==br.location.protocol||Ua(n,"https"),qa(n)),function(e,t){var n=new Ji;if(br.Image){var r=new Image;r.onload=Dr(go,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Dr(go,n,r,"TestLoadImage: error",!1,t),r.onabort=Dr(go,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Dr(go,n,r,"TestLoadImage: timeout",!1,t),br.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else oa(2);e.H=0,e.h&&e.h.za(t),nu(e),qo(e)}function nu(e){if(e.H=0,e.ma=[],e.h){var t=ho(e.i);0==t.length&&0==e.j.length||(Lr(e.ma,t),Lr(e.ma,e.j),e.i.i.length=0,Or(e.j),e.j.length=0),e.h.ya()}}function ru(e,t,n){var r=n instanceof Fa?Va(n):new Fa(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ja(r,r.m);else{var i=br.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Fa(null);r&&Ua(a,r),t&&(a.g=t),i&&ja(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Ba(r,n,t),Ba(r,"VER",e.ra),Wo(e,r),r}function iu(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Io(new ko({ob:!0})):new Io(e.va)).Oa(e.J),t}function au(){}function ou(){if(Gr&&!(10<=Number(ti)))throw Error("Environmental error: no available transport.")}function uu(e,t){Ci.call(this),this.g=new jo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Vr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Vr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new cu(this)}function su(e){ya.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lu(){ma.call(this),this.status=1}function cu(e){this.g=e}function fu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function hu(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function du(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(gr=Io.prototype).Oa=function(e){this.M=e},gr.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():va.g(),this.C=this.u?ha(this.u):ha(va),this.g.onreadystatechange=Nr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Do(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=I(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=br.FormData&&e instanceof br.FormData,!(0<=Pr(No,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=I(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){l.e(v)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Oo(this),0<this.B&&((this.L=function(e){return Gr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.ua,this)):this.A=Gi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Do(this,u)}},gr.ua=function(){"undefined"!=typeof wr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ti(this,"timeout"),this.abort(8))},gr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ti(this,"complete"),Ti(this,"abort"),Po(this))},gr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Po(this,!0)),Io.$.N.call(this)},gr.La=function(){this.s||(this.G||this.v||this.l?Ro(this):this.kb())},gr.kb=function(){Ro(this)},gr.isActive=function(){return!!this.g},gr.da=function(){try{return 2<Lo(this)?this.g.status:-1}catch(vo){return-1}},gr.ja=function(){try{return this.g?this.g.responseText:""}catch(vo){return""}},gr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Eo(t)}},gr.Ia=function(){return this.m},gr.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(gr=jo.prototype).ra=8,gr.H=1,gr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new ka(this,this.l,e),n=this.s;if(this.U&&(n?fi(n=li(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ho(this,t,r),Ba(i=Va(this.I),"RID",e),Ba(i,"CVER",22),this.F&&Ba(i,"X-HTTP-Session-Id",this.F),Wo(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Fo(n)))+"&"+r:this.o&&Vo(i,this.o,n)),co(this.i,t),this.bb&&Ba(i,"TYPE","init"),this.P?(Ba(i,"$req",r),Ba(i,"SID","null"),t.aa=!0,Sa(t,i,null)):Sa(t,i,r),this.H=2}}else 3==this.H&&(e?Go(this,e):0==this.j.length||uo(this.i)||Go(this))},gr.Ma=function(){if(this.u=null,Xo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=sa(Nr(this.jb,this),e)}},gr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,oa(10),Bo(this),Xo(this))},gr.ib=function(){null!=this.v&&(this.v=null,Bo(this),Yo(this),oa(19))},gr.pb=function(e){e?(this.l.info("Successfully pinged google.com"),oa(2)):(this.l.info("Failed to ping google.com"),oa(1))},gr.isActive=function(){return!!this.h&&this.h.isActive(this)},(gr=au.prototype).Ba=function(){},gr.Aa=function(){},gr.za=function(){},gr.ya=function(){},gr.isActive=function(){return!0},gr.Va=function(){},ou.prototype.g=function(e,t){return new uu(e,t)},Ar(uu,Ci),uu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;oa(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ru(e,null,e.Y),Ko(e)},uu.prototype.close=function(){zo(this.g)},uu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Di(e),e=n);t.j.push(new io(t.fb++,e)),3==t.H&&Ko(t)},uu.prototype.N=function(){this.g.h=null,delete this.j,zo(this.g),delete this.g,uu.$.N.call(this)},Ar(su,ya),Ar(lu,ma),Ar(cu,au),cu.prototype.Ba=function(){Ti(this.g,"a")},cu.prototype.Aa=function(e){Ti(this.g,new su(e))},cu.prototype.za=function(e){Ti(this.g,new lu)},cu.prototype.ya=function(){Ti(this.g,"b")},Ar(fu,(function(){this.blockSize=-1})),fu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},fu.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)hu(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){hu(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){hu(this,r),i=0;break}}this.h=i,this.i+=t},fu.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var vu={};function pu(e){return-128<=e&&128>e?function(e,t){var n=vu;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new du([0|e],0>e?-1:0)})):new du([0|e],0>e?-1:0)}function yu(e){if(isNaN(e)||!isFinite(e))return gu;if(0>e)return xu(yu(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=mu;return new du(t,0)}var mu=4294967296,gu=pu(0),ku=pu(1),_u=pu(16777216);function wu(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function bu(e){return-1==e.h}function xu(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new du(n,~e.h).add(ku)}function Su(e,t){return e.add(xu(t))}function Eu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Iu(e,t){this.g=e,this.h=t}function Cu(e,t){if(wu(t))throw Error("division by zero");if(wu(e))return new Iu(gu,gu);if(bu(e))return t=Cu(xu(e),t),new Iu(xu(t.g),xu(t.h));if(bu(t))return t=Cu(e,xu(t)),new Iu(xu(t.g),t.h);if(30<e.g.length){if(bu(e)||bu(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ku,r=t;0>=r.X(e);)n=Tu(n),r=Tu(r);var i=Nu(n,1),a=Nu(r,1);for(r=Nu(r,2),n=Nu(n,2);!wu(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Nu(r,1),n=Nu(n,1)}return t=Su(e,i.R(t)),new Iu(i,t)}for(i=gu;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=yu(n)).R(t);bu(o)||0<o.X(e);)o=(a=yu(n-=r)).R(t);wu(a)&&(a=ku),i=i.add(a),e=Su(e,o)}return new Iu(i,e)}function Tu(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new du(n,e.h)}function Nu(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new du(i,e.h)}(gr=du.prototype).ea=function(){if(bu(this))return-xu(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:mu+r)*t,t*=mu}return e},gr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(wu(this))return"0";if(bu(this))return"-"+xu(this).toString(e);for(var t=yu(Math.pow(e,6)),n=this,r="";;){var i=Cu(n,t).g,a=((0<(n=Su(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(wu(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},gr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},gr.X=function(e){return bu(e=Su(this,e))?-1:wu(e)?0:1},gr.abs=function(){return bu(this)?xu(this):this},gr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new du(n,-2147483648&n[n.length-1]?-1:0)},gr.R=function(e){if(wu(this)||wu(e))return gu;if(bu(this))return bu(e)?xu(this).R(xu(e)):xu(xu(this).R(e));if(bu(e))return xu(this.R(xu(e)));if(0>this.X(_u)&&0>e.X(_u))return yu(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Eu(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Eu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Eu(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Eu(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new du(n,0)},gr.gb=function(e){return Cu(this,e).h},gr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new du(n,this.h&e.h)},gr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new du(n,this.h|e.h)},gr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new du(n,this.h^e.h)},ou.prototype.createWebChannel=ou.prototype.g,uu.prototype.send=uu.prototype.u,uu.prototype.open=uu.prototype.m,uu.prototype.close=uu.prototype.close,la.NO_ERROR=0,la.TIMEOUT=8,la.HTTP_ERROR=6,ca.COMPLETE="complete",da.EventType=pa,pa.OPEN="a",pa.CLOSE="b",pa.ERROR="c",pa.MESSAGE="d",Ci.prototype.listen=Ci.prototype.O,Io.prototype.listenOnce=Io.prototype.P,Io.prototype.getLastError=Io.prototype.Sa,Io.prototype.getLastErrorCode=Io.prototype.Ia,Io.prototype.getStatus=Io.prototype.da,Io.prototype.getResponseJson=Io.prototype.Wa,Io.prototype.getResponseText=Io.prototype.ja,Io.prototype.send=Io.prototype.ha,Io.prototype.setWithCredentials=Io.prototype.Oa,fu.prototype.digest=fu.prototype.l,fu.prototype.reset=fu.prototype.reset,fu.prototype.update=fu.prototype.j,du.prototype.add=du.prototype.add,du.prototype.multiply=du.prototype.R,du.prototype.modulo=du.prototype.gb,du.prototype.compare=du.prototype.X,du.prototype.toNumber=du.prototype.ea,du.prototype.toString=du.prototype.toString,du.prototype.getBits=du.prototype.D,du.fromNumber=yu,du.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return xu(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=yu(Math.pow(n,8)),i=gu,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=yu(Math.pow(n,o)),i=i.R(o).add(yu(u))):i=(i=i.R(r)).add(yu(u))}return i};var Du=_r.createWebChannelTransport=function(){return new ou},Au=_r.getStatEventTarget=function(){return na()},Ru=_r.ErrorCode=la,Pu=_r.EventType=ca,Ou=_r.Event=ea,Lu=_r.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Mu=(_r.FetchXmlHttpFactory=ko,_r.WebChannel=da),Fu=_r.XhrIo=Io,Vu=_r.Md5=fu,Uu=_r.Integer=du,ju="@firebase/firestore",zu=function(){function e(t){d(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();zu.UNAUTHENTICATED=new zu(null),zu.GOOGLE_CREDENTIALS=new zu("google-credentials-uid"),zu.FIRST_PARTY=new zu("first-party-uid"),zu.MOCK_USER=new zu("mock-user");var Bu="10.3.0",qu=new Jt("@firebase/firestore");function Ku(){return qu.logLevel}function Gu(e){if(qu.logLevel<=Gt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qu);qu.debug.apply(qu,["Firestore (".concat(Bu,"): ").concat(e)].concat(h(i)))}}function Wu(e){if(qu.logLevel<=Gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qu);qu.error.apply(qu,["Firestore (".concat(Bu,"): ").concat(e)].concat(h(i)))}}function Hu(e){if(qu.logLevel<=Gt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qu);qu.warn.apply(qu,["Firestore (".concat(Bu,"): ").concat(e)].concat(h(i)))}}function Qu(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Yu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Bu,") INTERNAL ASSERTION FAILED: ")+e;throw Wu(t),new Error(t)}function $u(e,t){e||Yu()}function Xu(e,t){return e}var Ju={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Zu=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(bt),es=m((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ts=m((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ns=function(){function e(){d(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),rs=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),is=function(){function e(t){d(this,e),this.t=t,this.currentUser=zu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new es;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new es,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Gu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Gu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new es)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Gu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?($u("string"==typeof n.accessToken),new ts(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return $u(null===e||"string"==typeof e),new zu(e)}}]),e}(),as=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=zu.FIRST_PARTY,this.I=new Map}return m(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),os=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new as(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),us=m((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ss=function(){function e(t){d(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Gu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,Gu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Gu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):Gu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?($u("string"==typeof t.token),e.R=t.token,new us(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ls(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var cs=function(){function e(){d(this,e)}return m(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=ls(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function fs(e,t){return e<t?-1:e>t?1:0}function hs(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ds(e){return e+"\0"}var vs=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Zu(Ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?fs(this.nanoseconds,e.nanoseconds):fs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ps=function(){function e(t){d(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new vs(0,0))}},{key:"max",value:function(){return new e(new vs(253402300799,999999999))}}]),e}(),ys=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Yu(),void 0===r?r=t.length-n:r>t.length-n&&Yu(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ms=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ys),gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ks=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return gs.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Zu(Ju.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Zu(Ju.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Zu(Ju.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ys),_s=function(){function e(t){d(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ms.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ms.fromString(t))}},{key:"fromName",value:function(t){return new e(ms.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ms.emptyPath())}},{key:"comparator",value:function(e,t){return ms.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ms(t.slice()))}}]),e}(),ws=m((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function bs(e){return e.fields.find((function(e){return 2===e.kind}))}function xs(e){return e.fields.filter((function(e){return 2!==e.kind}))}ws.UNKNOWN_ID=-1;var Ss=m((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Es=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return m(e,null,[{key:"empty",value:function(){return new e(0,Ts.min())}}]),e}();function Is(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ps.fromTimestamp(1e9===r?new vs(n+1,0):new vs(n,r));return new Ts(i,_s.empty(),t)}function Cs(e){return new Ts(e.readTime,e.key,-1)}var Ts=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(ps.min(),_s.empty(),-1)}},{key:"max",value:function(){return new e(ps.max(),_s.empty(),-1)}}]),e}();function Ns(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=_s.comparator(e.documentKey,t.documentKey))?n:fs(e.largestBatchId,t.largestBatchId)}var Ds="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",As=function(){function e(){d(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Rs(e){return Ps.apply(this,arguments)}function Ps(){return(Ps=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ju.FAILED_PRECONDITION&&t.message===Ds){e.next=2;break}throw t;case 2:Gu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Os=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Yu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=I(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Ls=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new es,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new Vs(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=qs(e.target.error);r.m.reject(new Vs(t,n))}}return m(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(Gu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new js(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Vs(n,t)}}}]),e}(),Ms=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(mt())&&Wu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return m(e,[{key:"N",value:function(){var e=Ze(Xe().mark((function e(t){var n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Gu("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Vs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Zu(Ju.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Zu(Ju.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Vs(t,n))},i.onupgradeneeded=function(e){Gu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){Gu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ze(Xe().mark((function e(t,n,r,i){var a,o,u,s,l=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=Xe().mark((function e(){var n,u,s,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,l.N(t);case 4:return l.db=e.sent,n=Ls.open(l.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),Os.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,c="FirebaseError"!==s.name&&o<3,Gu("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),l.close(),c){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Gu("SimpleDb","Removing database:",e),zs(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!wt())return!1;if(e.C())return!0;var t=mt(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Fs=function(){function e(t){d(this,e),this.q=t,this.K=!1,this.$=null}return m(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return zs(this.q.delete())}}]),e}(),Vs=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Ju.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return m(n)}(Zu);function Us(e){return"IndexedDbTransactionError"===e.name}var js=function(){function e(t){d(this,e),this.store=t}return m(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Gu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Gu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),zs(n)}},{key:"add",value:function(e){return Gu("SimpleDb","ADD",this.store.name,e,e),zs(this.store.add(e))}},{key:"get",value:function(e){var t=this;return zs(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Gu("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Gu("SimpleDb","DELETE",this.store.name,e),zs(this.store.delete(e))}},{key:"count",value:function(){return Gu("SimpleDb","COUNT",this.store.name),zs(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Os((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Os((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Gu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Os((function(n,r){t.onerror=function(e){var t=qs(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new Os((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Fs(i),o=t(i.primaryKey,i.value,a);if(o instanceof Os){var u=o.catch((function(e){return a.done(),Os.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Os.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function zs(e){return new Os((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=qs(e.target.error);n(t)}}))}var Bs=!1;function qs(e){var t=Ms.D(mt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Zu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Bs||(Bs=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ks=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return m(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;Gu("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Gu,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Us(e.t4)){e.next=17;break}Gu("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Rs(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Gs=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return m(e,[{key:"ne",value:function(){var e=Ze(Xe().mark((function e(){var t,n=this,r=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Os.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Gu("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return Gu("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Cs(t);Ns(r,n)>0&&(n=r)})),new Ts(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Ws=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function Hs(e){return null==e}function Qs(e){return 0===e&&1/e==-1/0}function Ys(e){return"number"==typeof e&&Number.isInteger(e)&&!Qs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function $s(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Js(t)),t=Xs(e.get(n),t);return Js(t)}function Xs(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Js(e){return e+"\x01\x01"}function Zs(e){var t=e.length;if($u(t>=2),2===t)return $u("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ms.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Yu(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Yu()}a=o+2}return new ms(r)}Ws.ae=-1;var el=["userId","batchId"];function tl(e,t){return[e,$s(t)]}function nl(e,t,n){return[e,$s(t),n]}var rl={},il=["prefixPath","collectionGroup","readTime","documentId"],al=["prefixPath","collectionGroup","documentId"],ol=["collectionGroup","readTime","prefixPath","documentId"],ul=["canonicalId","targetId"],sl=["targetId","path"],ll=["path","targetId"],cl=["collectionId","parent"],fl=["indexId","uid"],hl=["uid","sequenceNumber"],dl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vl=["indexId","uid","orderedDocumentKey"],pl=["userId","collectionPath","documentId"],yl=["userId","collectionPath","largestBatchId"],ml=["userId","collectionGroup","largestBatchId"],gl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),kl=[].concat(h(gl),["documentOverlays"]),_l=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wl=_l,bl=[].concat(wl,["indexConfiguration","indexState","indexEntries"]),xl=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return m(n)}(As);function Sl(e,t){var n=Xu(e);return Ms.O(n.ue,t)}function El(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Il(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cl(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Tl=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Dl.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Dl.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Dl.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Nl(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Nl(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Nl(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Nl(this.root,e,this.comparator,!0)}}]),e}(),Nl=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Dl=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Yu();if(this.right.isRed())throw Yu();var e=this.left.check();if(e!==this.right.check())throw Yu();return e+(this.isRed()?0:1)}}]),e}();Dl.EMPTY=null,Dl.RED=!0,Dl.BLACK=!1,Dl.EMPTY=new(function(){function e(){d(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw Yu()}},{key:"value",get:function(){throw Yu()}},{key:"color",get:function(){throw Yu()}},{key:"left",get:function(){throw Yu()}},{key:"right",get:function(){throw Yu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Dl(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Al=function(){function e(t){d(this,e),this.comparator=t,this.data=new Tl(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Rl(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Rl(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Rl=function(){function e(t){d(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Pl(e){return e.hasNext()?e.getNext():void 0}var Ol=function(){function e(t){d(this,e),this.fields=t,t.sort(ks.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new Al(ks.comparator),i=I(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,u=I(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(l){u.e(l)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=I(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return hs(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ll=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return m(n)}(E(Error));var Ml=function(e){function t(e){d(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return fs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ll("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ml.EMPTY_BYTE_STRING=new Ml("");var Fl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(e){if($u(!!e),"string"==typeof e){var t=0,n=Fl.exec(e);if($u(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ul(e.seconds),nanos:Ul(e.nanos)}}function Ul(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function jl(e){return"string"==typeof e?Ml.fromBase64String(e):Ml.fromUint8Array(e)}function zl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bl(e){var t=e.mapValue.fields.__previous_value__;return zl(t)?Bl(t):t}function ql(e){var t=Vl(e.mapValue.fields.__local_write_time__.timestampValue);return new vs(t.seconds,t.nanos)}var Kl=m((function e(t,n,r,i,a,o,u,s,l){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=l})),Gl=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hl={nullValue:"NULL_VALUE"};function Ql(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zl(e)?4:sc(e)?9007199254740991:10:Yu()}function Yl(e,t){if(e===t)return!0;var n=Ql(e);if(n!==Ql(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ql(e).isEqual(ql(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Vl(e.timestampValue),r=Vl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return jl(e.bytesValue).isEqual(jl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ul(e.geoPointValue.latitude)===Ul(t.geoPointValue.latitude)&&Ul(e.geoPointValue.longitude)===Ul(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ul(e.integerValue)===Ul(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ul(e.doubleValue),r=Ul(t.doubleValue);return n===r?Qs(n)===Qs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hs(e.arrayValue.values||[],t.arrayValue.values||[],Yl);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(El(n)!==El(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yl(n[i],r[i])))return!1;return!0}(e,t);default:return Yu()}}function $l(e,t){return void 0!==(e.values||[]).find((function(e){return Yl(e,t)}))}function Xl(e,t){if(e===t)return 0;var n=Ql(e),r=Ql(t);if(n!==r)return fs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ul(e.integerValue||e.doubleValue),r=Ul(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jl(e.timestampValue,t.timestampValue);case 4:return Jl(ql(e),ql(t));case 5:return fs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=jl(e),r=jl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=fs(n[i],r[i]);if(0!==a)return a}return fs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=fs(Ul(e.latitude),Ul(t.latitude));return 0!==n?n:fs(Ul(e.longitude),Ul(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xl(n[i],r[i]);if(a)return a}return fs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Wl.mapValue&&t===Wl.mapValue)return 0;if(e===Wl.mapValue)return 1;if(t===Wl.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=fs(r[o],a[o]);if(0!==u)return u;var s=Xl(n[r[o]],i[a[o]]);if(0!==s)return s}return fs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Yu()}}function Jl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fs(e,t);var n=Vl(e),r=Vl(t),i=fs(n.seconds,r.seconds);return 0!==i?i:fs(n.nanos,r.nanos)}function Zl(e){return ec(e)}function ec(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Vl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return jl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return _s.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=I(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ec(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=I(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ec(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Yu()}function tc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nc(e){return!!e&&"integerValue"in e}function rc(e){return!!e&&"arrayValue"in e}function ic(e){return!!e&&"nullValue"in e}function ac(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oc(e){return!!e&&"mapValue"in e}function uc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Il(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=uc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=uc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function sc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function lc(e){return"nullValue"in e?Hl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?tc(Gl.empty(),_s.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Yu()}function cc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?tc(Gl.empty(),_s.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Wl:Yu()}function fc(e,t){var n=Xl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function hc(e,t){var n=Xl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var dc=function(){function e(t){d(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!oc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}},{key:"setAll",value:function(e){var t=this,n=ks.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=uc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());oc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Yl(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];oc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Il(t,(function(t,n){return e[t]=n}));var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(uc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function vc(e){var t=[];return Il(e.fields,(function(e,n){var r=new ks([e]);if(oc(n)){var i=vc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=I(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Ol(t)}var pc=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ps.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=dc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=dc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ps.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ps.min(),ps.min(),ps.min(),dc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ps.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ps.min(),ps.min(),dc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ps.min(),ps.min(),dc.empty(),2)}}]),e}(),yc=m((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function mc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?_s.comparator(_s.fromName(o.referenceValue),n.key):Xl(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function gc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Yl(e.position[n],t.position[n]))return!1;return!0}var kc=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function _c(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var wc=m((function e(){d(this,e)})),bc=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xl(t,this.value)):null!==t&&Ql(this.value)===Ql(t)&&this.matchesComparison(Xl(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yu()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Rc(e,t,r):"array-contains"===t?new Mc(e,r):"in"===t?new Fc(e,r):"not-in"===t?new Vc(e,r):"array-contains-any"===t?new Uc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Pc(e,n):new Oc(e,n)}}]),n}(wc),xc=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return m(n,[{key:"matches",value:function(e){return Sc(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=I(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(wc);function Sc(e){return"and"===e.op}function Ec(e){return"or"===e.op}function Ic(e){return Cc(e)&&Sc(e)}function Cc(e){var t,n=I(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof xc)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Tc(e){if(e instanceof bc)return e.field.canonicalString()+e.op.toString()+Zl(e.value);if(Ic(e))return e.filters.map((function(e){return Tc(e)})).join(",");var t=e.filters.map((function(e){return Tc(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Nc(e,t){return e instanceof bc?function(e,t){return t instanceof bc&&e.op===t.op&&e.field.isEqual(t.field)&&Yl(e.value,t.value)}(e,t):e instanceof xc?function(e,t){return t instanceof xc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Nc(n,t.filters[r])}),!0)}(e,t):void Yu()}function Dc(e,t){var n=e.filters.concat(t);return xc.create(n,e.op)}function Ac(e){return e instanceof bc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zl(e.value))}(e):e instanceof xc?function(e){return e.op.toString()+" {"+e.getFilters().map(Ac).join(" ,")+"}"}(e):"Filter"}var Rc=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=_s.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=_s.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(bc),Pc=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Lc("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bc),Oc=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Lc("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bc);function Lc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return _s.fromName(e.referenceValue)}))}var Mc=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return rc(t)&&$l(t.arrayValue,this.value)}}]),n}(bc),Fc=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&$l(this.value.arrayValue,t)}}]),n}(bc),Vc=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!$l(this.value.arrayValue,t)}}]),n}(bc),Uc=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!rc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return $l(t.value.arrayValue,e)}))}}]),n}(bc),jc=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function zc(e){return new jc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bc(e){var t=Xu(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Tc(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Hs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Zl(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Zl(e)})).join(",")),t.he=n}return t.he}function qc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!_c(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Nc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gc(e.startAt,t.startAt)&&gc(e.endAt,t.endAt)}function Kc(e){return _s.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Gc(e,t){return e.filters.filter((function(e){return e instanceof bc&&e.field.isEqual(t)}))}function Wc(e,t,n){var r,i=Hl,a=!0,o=I(Gc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Hl,l=!0;switch(u.op){case"<":case"<=":s=lc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,l=!1;break;case"!=":case"not-in":s=Hl}fc({value:i,inclusive:a},{value:s,inclusive:l})<0&&(i=s,a=l)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var f=n.position[c];fc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Hc(e,t,n){var r,i=Wl,a=!0,o=I(Gc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Wl,l=!0;switch(u.op){case">=":case">":s=cc(u.value),l=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,l=!1;break;case"!=":case"not-in":s=Wl}hc({value:i,inclusive:a},{value:s,inclusive:l})>0&&(i=s,a=l)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var f=n.position[c];hc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Qc=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}));function Yc(e,t,n,r,i,a,o,u){return new Qc(e,t,n,r,i,a,o,u)}function $c(e){return new Qc(e)}function Xc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Zc(e){var t,n=I(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function ef(e){return null!==e.collectionGroup}function tf(e){var t=Xu(e);if(null===t.Pe){t.Pe=[];var n=Zc(t),r=Jc(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new kc(n)),t.Pe.push(new kc(ks.keyField(),"asc"));else{var i,a=!1,o=I(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new kc(ks.keyField(),s))}}}return t.Pe}function nf(e){var t=Xu(e);return t.Ie||(t.Ie=rf(t,tf(e))),t.Ie}function rf(e,t){if("F"===e.limitType)return zc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new kc(e.field,t)}));var n=e.endAt?new yc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new yc(e.startAt.position,e.startAt.inclusive):null;return zc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function af(e,t){t.getFirstInequalityField(),Zc(e);var n=e.filters.concat([t]);return new Qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function of(e,t,n){return new Qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function uf(e,t){return qc(nf(e),nf(t))&&e.limitType===t.limitType}function sf(e){return"".concat(Bc(nf(e)),"|lt:").concat(e.limitType)}function lf(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ac(e)})).join(", "),"]")),Hs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Zl(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Zl(e)})).join(",")),"Target(".concat(t,")")}(nf(e)),"; limitType=").concat(e.limitType,")")}function cf(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):_s.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=I(tf(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=I(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=mc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tf(e),t))&&!(e.endAt&&!function(e,t,n){var r=mc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tf(e),t))}(e,t)}function ff(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hf(e){return function(t,n){var r,i=!1,a=I(tf(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=df(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function df(e,t,n){var r=e.field.isKeyField()?_s.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xl(r,i):Yu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yu()}}var vf=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Il(this.inner,(function(t,n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Cl(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),pf=new Tl(_s.comparator);function yf(){return pf}var mf=new Tl(_s.comparator);function gf(){for(var e=mf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function kf(e){var t=mf;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function _f(){return bf()}function wf(){return bf()}function bf(){return new vf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var xf=new Tl(_s.comparator),Sf=new Al(_s.comparator);function Ef(){for(var e=Sf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var If=new Al(fs);function Cf(){return If}function Tf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qs(t)?"-0":t}}function Nf(e){return{integerValue:""+e}}function Df(e,t){return Ys(t)?Nf(t):Tf(e,t)}var Af=m((function e(){d(this,e),this._=void 0}));function Rf(e,t,n){return e instanceof Lf?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zl(t)&&(t=Bl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mf?Ff(e,t):e instanceof Vf?Uf(e,t):function(e,t){var n=Of(e,t),r=zf(n)+zf(e.Ee);return nc(n)&&nc(e.Ee)?Nf(r):Tf(e.serializer,r)}(e,t)}function Pf(e,t,n){return e instanceof Mf?Ff(e,t):e instanceof Vf?Uf(e,t):n}function Of(e,t){return e instanceof jf?function(e){return nc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Lf=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(Af),Mf=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Af);function Ff(e,t){var n,r=Bf(t),i=I(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Yl(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vf=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Af);function Uf(e,t){var n,r=Bf(t),i=I(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Yl(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var jf=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.Ee=r,i}return m(n)}(Af);function zf(e){return Ul(e.integerValue||e.doubleValue)}function Bf(e){return rc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var qf=m((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Kf=m((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Gf=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Wf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Hf=m((function e(){d(this,e)}));function Qf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new oh(e.key,Gf.none()):new Zf(e.key,e.data,Gf.none());var n,r=e.data,i=dc.empty(),a=new Al(ks.comparator),o=I(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(l){o.e(l)}finally{o.f()}return new eh(e.key,i,new Ol(a.toArray()),Gf.none())}function Yf(e,t,n){e instanceof Zf?function(e,t,n){var r=e.value.clone(),i=nh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof eh?function(e,t,n){if(Wf(e.precondition,t)){var r=nh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(th(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $f(e,t,n,r){return e instanceof Zf?function(e,t,n,r){if(!Wf(e.precondition,t))return n;var i=e.value.clone(),a=rh(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof eh?function(e,t,n,r){if(!Wf(e.precondition,t))return n;var i=rh(e.fieldTransforms,r,t),a=t.data;return a.setAll(th(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Wf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xf(e,t){var n,r=null,i=I(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Of(a.transform,o||null);null!=u&&(null===r&&(r=dc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Jf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hs(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mf&&t instanceof Mf||e instanceof Vf&&t instanceof Vf?hs(e.elements,t.elements,Yl):e instanceof jf&&t instanceof jf?Yl(e.Ee,t.Ee):e instanceof Lf&&t instanceof Lf}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Zf=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hf),eh=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Hf);function th(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function nh(e,t,n){var r=new Map;$u(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Pf(o,u,n[i]))}return r}function rh(e,t,n){var r,i=new Map,a=I(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Rf(u,s,t))}}catch(l){a.e(l)}finally{a.f()}return i}var ih,ah,oh=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hf),uh=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hf),sh=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Yf(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=I(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=$f(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=I(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=$f(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=wf();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Qf(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ps.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ef())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&hs(this.mutations,e.mutations,(function(e,t){return Jf(e,t)}))&&hs(this.baseMutations,e.baseMutations,(function(e,t){return Jf(e,t)}))}}]),e}(),lh=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){$u(t.mutations.length===r.length);for(var i=xf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ch=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),fh=m((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function hh(e){switch(e){default:return Yu();case Ju.CANCELLED:case Ju.UNKNOWN:case Ju.DEADLINE_EXCEEDED:case Ju.RESOURCE_EXHAUSTED:case Ju.INTERNAL:case Ju.UNAVAILABLE:case Ju.UNAUTHENTICATED:return!1;case Ju.INVALID_ARGUMENT:case Ju.NOT_FOUND:case Ju.ALREADY_EXISTS:case Ju.PERMISSION_DENIED:case Ju.FAILED_PRECONDITION:case Ju.ABORTED:case Ju.OUT_OF_RANGE:case Ju.UNIMPLEMENTED:case Ju.DATA_LOSS:return!0}}function dh(e){if(void 0===e)return Wu("GRPC error has no .code"),Ju.UNKNOWN;switch(e){case ih.OK:return Ju.OK;case ih.CANCELLED:return Ju.CANCELLED;case ih.UNKNOWN:return Ju.UNKNOWN;case ih.DEADLINE_EXCEEDED:return Ju.DEADLINE_EXCEEDED;case ih.RESOURCE_EXHAUSTED:return Ju.RESOURCE_EXHAUSTED;case ih.INTERNAL:return Ju.INTERNAL;case ih.UNAVAILABLE:return Ju.UNAVAILABLE;case ih.UNAUTHENTICATED:return Ju.UNAUTHENTICATED;case ih.INVALID_ARGUMENT:return Ju.INVALID_ARGUMENT;case ih.NOT_FOUND:return Ju.NOT_FOUND;case ih.ALREADY_EXISTS:return Ju.ALREADY_EXISTS;case ih.PERMISSION_DENIED:return Ju.PERMISSION_DENIED;case ih.FAILED_PRECONDITION:return Ju.FAILED_PRECONDITION;case ih.ABORTED:return Ju.ABORTED;case ih.OUT_OF_RANGE:return Ju.OUT_OF_RANGE;case ih.UNIMPLEMENTED:return Ju.UNIMPLEMENTED;case ih.DATA_LOSS:return Ju.DATA_LOSS;default:return Yu()}}(ah=ih||(ih={}))[ah.OK=0]="OK",ah[ah.CANCELLED=1]="CANCELLED",ah[ah.UNKNOWN=2]="UNKNOWN",ah[ah.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ah[ah.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ah[ah.NOT_FOUND=5]="NOT_FOUND",ah[ah.ALREADY_EXISTS=6]="ALREADY_EXISTS",ah[ah.PERMISSION_DENIED=7]="PERMISSION_DENIED",ah[ah.UNAUTHENTICATED=16]="UNAUTHENTICATED",ah[ah.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ah[ah.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ah[ah.ABORTED=10]="ABORTED",ah[ah.OUT_OF_RANGE=11]="OUT_OF_RANGE",ah[ah.UNIMPLEMENTED=12]="UNIMPLEMENTED",ah[ah.INTERNAL=13]="INTERNAL",ah[ah.UNAVAILABLE=14]="UNAVAILABLE",ah[ah.DATA_LOSS=15]="DATA_LOSS";var vh=null;function ph(){return new TextEncoder}var yh=new Uu([4294967295,4294967295],0);function mh(e){var t=ph().encode(e),n=new Vu;return n.update(t),new Uint8Array(n.digest())}function gh(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Uu([n,r],0),new Uu([i,a],0)]}var kh=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _h("Invalid padding: ".concat(n));if(r<0)throw new _h("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new _h("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new _h("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=Uu.fromNumber(this.Ae)}return m(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(Uu.fromNumber(n)));return 1===r.compare(yh)&&(r=new Uu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=c(gh(mh(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=c(gh(mh(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),_h=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return m(n)}(E(Error)),wh=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,bh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ps.min(),i,new Tl(fs),yf(),Ef())}}]),e}(),bh=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Ef(),Ef(),Ef())}}]),e}(),xh=m((function e(t,n,r,i){d(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i})),Sh=m((function e(t,n){d(this,e),this.targetId=t,this.ye=n})),Eh=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ml.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ih=function(){function e(){d(this,e),this.we=0,this.Se=Nh(),this.be=Ml.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}return m(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"Ce",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.ve}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}},{key:"xe",value:function(){var e=Ef(),t=Ef(),n=Ef();return this.Se.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Yu()}})),new bh(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.ve=!1,this.Se=Nh()}},{key:"Ne",value:function(e,t){this.ve=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.ve=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.ve=!0,this.De=!0}}]),e}(),Ch=function(){function e(t){d(this,e),this.Qe=t,this.Ke=new Map,this.$e=yf(),this.Ue=Th(),this.We=new Tl(fs)}return m(e,[{key:"Ge",value:function(e){var t,n=I(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(u){n.e(u)}finally{n.f()}var i,a=I(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.je(o,e.key,e.pe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:Yu()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((function(e,r){n.Ye(r)&&t(r)}))}},{key:"Xe",value:function(e){var t=e.targetId,n=e.ye.count,r=this.et(t);if(r){var i=r.target;if(Kc(i))if(0===n){var a=new _s(i.path);this.je(t,a,pc.newNoDocument(a,ps.min()))}else $u(1===n);else{var o=this.tt(t);if(o!==n){var u=this.nt(e),s=u?this.rt(u,e,o):1;if(0!==s){this.Ze(t);var l=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(t,l)}null==vh||vh.it(function(e,t,n,r,i){var a,o,u,s,l,c,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(c=null===(l=null==h?void 0:h.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ye,this.Qe.st(),u,s))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,l=t.hashCount,c=void 0===l?0:l;try{n=jl(o).toUint8Array()}catch(e){if(e instanceof Ll)return Hu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new kh(n,s,c)}catch(e){return Hu(e instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.ot(e,t.targetId)?0:2}},{key:"ot",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Qe.st(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.je(t,r,null),i++)})),i}},{key:"_t",value:function(e){var t=this,n=new Map;this.Ke.forEach((function(r,i){var a=t.et(i);if(a){if(r.current&&Kc(a.target)){var o=new _s(a.target.path);null!==t.$e.get(o)||t.ut(i,o)||t.je(i,o,pc.newNoDocument(o,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}}));var r=Ef();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$e.forEach((function(t,n){return n.setReadTime(e)}));var i=new wh(e,n,this.We,this.$e,r);return this.$e=yf(),this.Ue=Th(),this.We=new Tl(fs),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this.ut(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new Ih,this.Ke.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new Al(fs),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||Gu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.Ce?null:this.Qe.lt(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new Ih),this.Qe.getRemoteKeysForTarget(e).forEach((function(n){t.je(e,n,null)}))}},{key:"ut",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function Th(){return new Tl(_s.comparator)}function Nh(){return new Tl(_s.comparator)}var Dh={asc:"ASCENDING",desc:"DESCENDING"},Ah={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rh={and:"AND",or:"OR"},Ph=m((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function Oh(e,t){return e.useProto3Json||Hs(t)?t:{value:t}}function Lh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fh(e,t){return Lh(e,t.toTimestamp())}function Vh(e){return $u(!!e),ps.fromTimestamp(function(e){var t=Vl(e);return new vs(t.seconds,t.nanos)}(e))}function Uh(e,t){return function(e){return new ms(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jh(e){var t=ms.fromString(e);return $u(ld(t)),t}function zh(e,t){return Uh(e.databaseId,t.path)}function Bh(e,t){var n=jh(t);if(n.get(1)!==e.databaseId.projectId)throw new Zu(Ju.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Zu(Ju.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new _s(Wh(n))}function qh(e,t){return Uh(e.databaseId,t)}function Kh(e){var t=jh(e);return 4===t.length?ms.emptyPath():Wh(t)}function Gh(e){return new ms(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wh(e){return $u(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hh(e,t,n){return{name:zh(e,t),fields:n.value.mapValue.fields}}function Qh(e,t,n){var r=Bh(e,t.name),i=Vh(t.updateTime),a=t.createTime?Vh(t.createTime):ps.min(),o=new dc({mapValue:{fields:t.fields}}),u=pc.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Yh(e,t){return"found"in t?function(e,t){$u(!!t.found),t.found.name,t.found.updateTime;var n=Bh(e,t.found.name),r=Vh(t.found.updateTime),i=t.found.createTime?Vh(t.found.createTime):ps.min(),a=new dc({mapValue:{fields:t.found.fields}});return pc.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){$u(!!t.missing),$u(!!t.readTime);var n=Bh(e,t.missing),r=Vh(t.readTime);return pc.newNoDocument(n,r)}(e,t):Yu()}function $h(e,t){var n;if(t instanceof Zf)n={update:Hh(e,t.key,t.value)};else if(t instanceof oh)n={delete:zh(e,t.key)};else if(t instanceof eh)n={update:Hh(e,t.key,t.data),updateMask:sd(t.fieldMask)};else{if(!(t instanceof uh))return Yu();n={verify:zh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Lf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jf)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw Yu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yu()}(e,t.precondition)),n}function Xh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gf.updateTime(Vh(e.updateTime)):void 0!==e.exists?Gf.exists(e.exists):Gf.none()}(t.currentDocument):Gf.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)$u("REQUEST_TIME"===t.setToServerValue),n=new Lf;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Mf(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Vf(i)}else"increment"in t?n=new jf(e,t.increment):Yu();var a=ks.fromServerFormat(t.fieldPath);return new qf(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Bh(e,t.update.name),a=new dc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ol(t.map((function(e){return ks.fromServerFormat(e)})))}(t.updateMask);return new eh(i,a,o,n,r)}return new Zf(i,a,n,r)}if(t.delete){var u=Bh(e,t.delete);return new oh(u,n)}if(t.verify){var s=Bh(e,t.verify);return new uh(s,n)}return Yu()}function Jh(e,t){return{documents:[qh(e,t.path)]}}function Zh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=qh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=qh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ud(xc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ad(e.field),direction:nd(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Oh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ed(e){var t=Kh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$u(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=td(e);return t instanceof xc&&Ic(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new kc(od(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return Hs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new yc(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new yc(n,t)}(n.endAt)),Yc(t,i,u,o,s,"F",l,c)}function td(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=od(e.unaryFilter.field);return bc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=od(e.unaryFilter.field);return bc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=od(e.unaryFilter.field);return bc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=od(e.unaryFilter.field);return bc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Yu()}}(e):void 0!==e.fieldFilter?function(e){return bc.create(od(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return xc.create(e.compositeFilter.filters.map((function(e){return td(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Yu()}}(e.compositeFilter.op))}(e):Yu()}function nd(e){return Dh[e]}function rd(e){return Ah[e]}function id(e){return Rh[e]}function ad(e){return{fieldPath:e.canonicalString()}}function od(e){return ks.fromServerFormat(e.fieldPath)}function ud(e){return e instanceof bc?function(e){if("=="===e.op){if(ac(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NAN"}};if(ic(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ac(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NOT_NAN"}};if(ic(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ad(e.field),op:rd(e.op),value:e.value}}}(e):e instanceof xc?function(e){var t=e.getFilters().map((function(e){return ud(e)}));return 1===t.length?t[0]:{compositeFilter:{op:id(e.op),filters:t}}}(e):Yu()}function sd(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ld(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var cd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ps.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ps.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ml.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),fd=m((function e(t){d(this,e),this.ht=t}));function hd(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Lh(e,t.version.toTimestamp()),createTime:Lh(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:vd(t.version)};else{if(!t.isUnknownDocument())return Yu();r.unknownDocument={path:n.path.toArray(),version:vd(t.version)}}return r}function dd(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function vd(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function pd(e){var t=new vs(e.seconds,e.nanoseconds);return ps.fromTimestamp(t)}function yd(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Xh(e.ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Xh(e.ht,t)})),u=vs.fromMillis(t.localWriteTimeMs);return new sh(t.batchId,u,n,o)}function md(e){var t,n=pd(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?pd(e.lastLimboFreeSnapshotVersion):ps.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return $u(1===e.documents.length),nf($c(Kh(e.documents[0])))}(e.query):function(e){return nf(ed(e))}(e.query),new cd(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Ml.fromBase64String(e.resumeToken))}function gd(e,t){var n,r=vd(t.snapshotVersion),i=vd(t.lastLimboFreeSnapshotVersion);n=Kc(t.target)?Jh(e.ht,t.target):Zh(e.ht,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Bc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function kd(e){var t=ed({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?of(t,t.limit,"L"):t}function _d(e,t){return new ch(t.largestBatchId,Xh(e.ht,t.overlayMutation))}function wd(e,t){var n=t.path.lastSegment();return[e,$s(t.path.popLast()),n]}function bd(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:vd(r.readTime),documentKey:$s(r.documentKey.path),largestBatchId:r.largestBatchId}}var xd=function(){function e(){d(this,e)}return m(e,[{key:"getBundleMetadata",value:function(e,t){return Sd(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:pd(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Sd(e).put(function(e){return{bundleId:e.id,createTime:vd(Vh(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Ed(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:kd(e.bundledQuery),readTime:pd(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Ed(e).put(function(e){return{name:e.name,readTime:vd(Vh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Sd(e){return Sl(e,"bundles")}function Ed(e){return Sl(e,"namedQueries")}var Id=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return m(e,[{key:"getOverlay",value:function(e,t){var n=this;return Cd(e).get(wd(this.userId,t)).next((function(e){return e?_d(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=_f();return Os.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new ch(t,a);i.push(r.It(e,o))})),Os.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add($s(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Cd(e).J("collectionPathOverlayIndex",i))})),Os.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=_f(),a=$s(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Cd(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=_d(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=_f(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cd(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=_d(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"It",value:function(e,t){return Cd(e).put(function(e,t,n){var r=c(wd(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:$h(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"Pt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Cd(e){return Sl(e,"documentOverlays")}var Td=function(){function e(){d(this,e)}return m(e,[{key:"Tt",value:function(e,t){this.Et(e,t),t.dt()}},{key:"Et",value:function(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(Ul(e.integerValue));else if("doubleValue"in e){var n=Ul(e.doubleValue);isNaN(n)?this.At(t,13):(this.At(t,15),Qs(n)?t.Rt(0):t.Rt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt("".concat(r.seconds||"")),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(jl(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.At(t,45),t.Rt(i.latitude||0),t.Rt(i.longitude||0)}else"mapValue"in e?sc(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):Yu()}},{key:"ft",value:function(e,t){this.At(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Vt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.At(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ft(a,t),this.Et(n[a],t)}}},{key:"bt",value:function(e,t){var n=e.values||[];this.At(t,50);var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Et(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"wt",value:function(e,t){var n=this;this.At(t,37),_s.fromName(e).path.forEach((function(e){n.At(t,60),n.Dt(e,t)}))}},{key:"At",value:function(e,t){e.Rt(t)}},{key:"gt",value:function(e){e.Rt(2)}}]),e}();function Nd(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Dd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Nd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Td.vt=new Td;var Ad=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return m(e,[{key:"Ct",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Bt",value:function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Lt",value:function(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=Dd(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=Dd(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Rd=function(){function e(t){d(this,e),this.jt=t}return m(e,[{key:"yt",value:function(e){this.jt.Ct(e)}},{key:"Vt",value:function(e){this.jt.Bt(e)}},{key:"Rt",value:function(e){this.jt.kt(e)}},{key:"dt",value:function(){this.jt.$t()}}]),e}(),Pd=function(){function e(t){d(this,e),this.jt=t}return m(e,[{key:"yt",value:function(e){this.jt.xt(e)}},{key:"Vt",value:function(e){this.jt.Lt(e)}},{key:"Rt",value:function(e){this.jt.Kt(e)}},{key:"dt",value:function(){this.jt.Wt()}}]),e}(),Od=function(){function e(){d(this,e),this.jt=new Ad,this.Ht=new Rd(this.jt),this.Jt=new Pd(this.jt)}return m(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),Ld=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return m(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Md(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Fd(e.arrayValue,t.arrayValue))?n:0!==(n=Fd(e.directionalValue,t.directionalValue))?n:_s.comparator(e.documentKey,t.documentKey)}function Fd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Vd=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Xt=t.orderBy,this.en=[];var n,r=I(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.tn=i:this.en.push(i)}}catch(a){r.e(a)}finally{r.f()}}return m(e,[{key:"nn",value:function(e){$u(e.collectionGroup===this.collectionId);var t=bs(e);if(void 0!==t&&!this.rn(t))return!1;for(var n=xs(e),r=new Set,i=0,a=0;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.tn){if(!r.has(this.tn.field.canonicalString())){var o=n[i];if(!this.sn(this.tn,o)||!this.on(this.Xt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Xt.length||!this.on(this.Xt[a++],u))return!1}return!0}},{key:"rn",value:function(e){var t,n=I(this.en);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.sn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"sn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"on",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Ud(e){var t,n;if($u(e instanceof bc||e instanceof xc),e instanceof bc){if(e instanceof Fc){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return bc.create(e.field,"==",t)})))||[];return xc.create(r,"or")}return e}var i=e.filters.map((function(e){return Ud(e)}));return xc.create(i,e.op)}function jd(e){if(0===e.getFilters().length)return[];var t=Kd(Ud(e));return $u(qd(t)),zd(t)||Bd(t)?[t]:t.getFilters()}function zd(e){return e instanceof bc}function Bd(e){return e instanceof xc&&Ic(e)}function qd(e){return zd(e)||Bd(e)||function(e){if(e instanceof xc&&Ec(e)){var t,n=I(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!zd(r)&&!Bd(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Kd(e){if($u(e instanceof bc||e instanceof xc),e instanceof bc)return e;if(1===e.filters.length)return Kd(e.filters[0]);var t=e.filters.map((function(e){return Kd(e)})),n=xc.create(t,e.op);return qd(n=Hd(n))?n:($u(n instanceof xc),$u(Sc(n)),$u(n.filters.length>1),n.filters.reduce((function(e,t){return Gd(e,t)})))}function Gd(e,t){var n;return $u(e instanceof bc||e instanceof xc),$u(t instanceof bc||t instanceof xc),n=e instanceof bc?t instanceof bc?function(e,t){return xc.create([e,t],"and")}(e,t):Wd(e,t):t instanceof bc?Wd(t,e):function(e,t){if($u(e.filters.length>0&&t.filters.length>0),Sc(e)&&Sc(t))return Dc(e,t.getFilters());var n=Ec(e)?e:t,r=Ec(e)?t:e,i=n.filters.map((function(e){return Gd(e,r)}));return xc.create(i,"or")}(e,t),Hd(n)}function Wd(e,t){if(Sc(t))return Dc(t,e.getFilters());var n=t.filters.map((function(t){return Gd(e,t)}));return xc.create(n,"or")}function Hd(e){if($u(e instanceof bc||e instanceof xc),e instanceof bc)return e;var t=e.getFilters();if(1===t.length)return Hd(t[0]);if(Cc(e))return e;var n=t.map((function(e){return Hd(e)})),r=[];return n.forEach((function(t){t instanceof bc?r.push(t):t instanceof xc&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:xc.create(r,e.op)}var Qd=function(){function e(){d(this,e),this._n=new Yd}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this._n.add(t),Os.resolve()}},{key:"getCollectionParents",value:function(e,t){return Os.resolve(this._n.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Os.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Os.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Os.resolve(null)}},{key:"getIndexType",value:function(e,t){return Os.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Os.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Os.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Os.resolve(Ts.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Os.resolve(Ts.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Os.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Os.resolve()}}]),e}(),Yd=function(){function e(){d(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Al(ms.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Al(ms.comparator)).toArray()}}]),e}(),$d=new Uint8Array(0),Xd=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.an=new Yd,this.un=new vf((function(e){return Bc(e)}),(function(e,t){return qc(e,t)})),this.uid=t.uid||""}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.an.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.an.add(t)}));var a={collectionId:r,parent:$s(i)};return Jd(e).put(a)}return Os.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ds(t),""],!1,!0);return Jd(e).G(r).next((function(e){var r,i=I(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Zs(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ev(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=tv(e);return a.next((function(e){o.put(bd(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ev(e),r=tv(e),i=Zd(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Zd(e),i=!0,a=new Map;return Os.forEach(this.cn(t),(function(t){return n.ln(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Ef(),o=[];return Os.forEach(a,(function(i,a){Gu("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(Bc(t)));var u=function(e,t){var n=bs(t);if(void 0===n)return null;var r,i=I(Gc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=I(xs(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=I(Gc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(l){u.e(l)}finally{u.f()}}}catch(l){i.e(l)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=I(xs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Wc(e,o.fieldPath,e.startAt):Hc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new yc(r,i)}(a,i),c=function(e,t){var n,r=[],i=!0,a=I(xs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Hc(e,o.fieldPath,e.endAt):Wc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new yc(r,i)}(a,i),f=n.hn(i,a,l),h=n.hn(i,a,c),d=n.Pn(i,a,s),v=n.In(i.indexId,u,f,l.inclusive,h,c.inclusive,d);return Os.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=_s.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Os.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:jd(xc.create(e.filters,"and")).map((function(t){return zc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"In",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),c=[],f=function(){var s=t?u.Tn(t[d/l]):$d,f=u.En(e,s,n[d%l],r),v=u.dn(e,s,i[d%l],a),p=o.map((function(t){return u.En(e,s,t,!0)}));c.push.apply(c,h(u.createRange(f,v,p)))},d=0;d<s;++d)f();return c}},{key:"En",value:function(e,t,n,r){var i=new Ld(e,_s.empty(),t,n);return r?i:i.Zt()}},{key:"dn",value:function(e,t,n,r){var i=new Ld(e,_s.empty(),t,n);return r?i.Zt():i}},{key:"ln",value:function(e,t){var n=new Vd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=I(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.nn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Os.forEach(i,(function(t){return n.ln(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Al(ks.comparator),r=!1,i=I(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=I(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,l=I(e.orderBy);try{for(l.s();!(s=l.n()).done;){var c=s.value;c.field.isKeyField()||(n=n.add(c.field))}}catch(f){l.e(f)}finally{l.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"An",value:function(e,t){var n,r=new Od,i=I(xs(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Yt(a.kind);Td.vt.Tt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"Tn",value:function(e){var t=new Od;return Td.vt.Tt(e,t.Yt(0)),t.zt()}},{key:"Rn",value:function(e,t){var n=new Od;return Td.vt.Tt(tc(this.databaseId,t),n.Yt(function(e){var t=xs(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"Pn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Od);var i,a=0,o=I(xs(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,l=n[a++],c=I(r);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(this.Vn(t,s.fieldPath)&&rc(l))r=this.mn(r,s,l);else{var h=f.Yt(s.kind);Td.vt.Tt(l,h)}}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"hn",value:function(e,t,n){return this.Pn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"mn",value:function(e,t,n){var r,i=h(e),a=[],o=I(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,l=I(i);try{for(l.s();!(u=l.n()).done;){var c=u.value,f=new Od;f.seed(c.zt()),Td.vt.Tt(s,f.Yt(t.kind)),a.push(f)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"Vn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof bc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ev(e),i=tv(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return Os.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Es(t.sequenceNumber,new Ts(pd(t.readTime),new _s(Zs(t.documentKey)),t.largestBatchId)):Es.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Ss(ks.fromServerFormat(n),r)}));return new ws(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:fs(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ev(e),a=tv(e);return this.gn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Os.forEach(t,(function(t){return a.put(bd(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Os.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Os.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Os.forEach(a,(function(r){return n.pn(e,t,r).next((function(t){var a=n.yn(i,r);return t.isEqual(a)?Os.resolve():n.wn(e,i,r,t,a)}))}))}))}))}},{key:"Sn",value:function(e,t,n,r){return Zd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"bn",value:function(e,t,n,r){return Zd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}},{key:"pn",value:function(e,t,n){var r=Zd(e),i=new Al(Md);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},(function(e,r){i=i.add(new Ld(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"yn",value:function(e,t){var n=new Al(Md),r=this.An(t,e);if(null==r)return n;var i=bs(t);if(null!=i){var a=e.data.field(i.fieldPath);if(rc(a)){var o,u=I(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Ld(t.indexId,e.key,this.Tn(s),r))}}catch(l){u.e(l)}finally{u.f()}}}else n=n.add(new Ld(t.indexId,e.key,$d,r));return n}},{key:"wn",value:function(e,t,n,r,i){var a=this;Gu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Pl(a),s=Pl(o);u||s;){var l=!1,c=!1;if(u&&s){var f=n(u,s);f<0?c=!0:f>0&&(l=!0)}else null!=u?c=!0:l=!0;l?(r(s),s=Pl(o)):c?(i(u),u=Pl(a)):(u=Pl(a),s=Pl(o))}}(r,i,Md,(function(r){o.push(a.Sn(e,t,n,r))}),(function(r){o.push(a.bn(e,t,n,r))})),Os.waitFor(o)}},{key:"gn",value:function(e){var t=1;return tv(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Md(e,t)})).filter((function(e,t,n){return!t||0!==Md(e,n[t-1])}));var r=[];r.push(e);var i,a=I(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Md(o,e),s=Md(o,t);if(0===u)r[0]=e.Zt();else if(u>0&&s<0)r.push(o),r.push(o.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var l=[],c=0;c<r.length;c+=2){if(this.Dn(r[c],r[c+1]))return[];var f=[r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,$d,[]],h=[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,$d,[]];l.push(IDBKeyRange.bound(f,h))}return l}},{key:"Dn",value:function(e,t){return Md(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(nv)}},{key:"getMinOffset",value:function(e,t){var n=this;return Os.mapArray(this.cn(t),(function(t){return n.ln(e,t).next((function(e){return e||Yu()}))})).next(nv)}}]),e}();function Jd(e){return Sl(e,"collectionParents")}function Zd(e){return Sl(e,"indexEntries")}function ev(e){return Sl(e,"indexConfiguration")}function tv(e){return Sl(e,"indexState")}function nv(e){$u(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Ns(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ts(t.readTime,t.documentKey,n)}var rv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iv=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function av(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){$u(1===u)})));var l,c=[],f=I(n.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value,d=nl(t,h.key.path,n.batchId);a.push(i.delete(d)),c.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Os.waitFor(a).next((function(){return c}))}function ov(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Yu();t=e.noDocument}return JSON.stringify(t).length}iv.DEFAULT_COLLECTION_PERCENTILE=10,iv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,iv.DEFAULT=new iv(41943040,iv.DEFAULT_COLLECTION_PERCENTILE,iv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),iv.DISABLED=new iv(-1,0,0);var uv=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}return m(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lv(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=cv(e),o=lv(e);return o.add({}).next((function(u){$u("number"==typeof u);var s,l=new sh(u,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return $h(e.ht,t)})),i=n.mutations.map((function(t){return $h(e.ht,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,l),f=[],h=new Al((function(e,t){return fs(e.canonicalString(),t.canonicalString())})),d=I(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=nl(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(c)),f.push(a.put(p,rl))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.vn[u]=l.keys()})),Os.waitFor(f).next((function(){return l}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return lv(e).get(t).next((function(e){return e?($u(e.userId===n.userId),yd(n.serializer,e)):null}))}},{key:"Cn",value:function(e,t){var n=this;return this.vn[t]?Os.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return lv(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&($u(t.batchId>=r),a=yd(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return lv(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lv(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return yd(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=tl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return cv(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Zs(l);if(s===n.userId&&t.path.isEqual(h))return lv(e).get(f).next((function(e){if(!e)throw Yu();$u(e.userId===n.userId),a.push(yd(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Al(fs),i=[];return t.forEach((function(t){var a=tl(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=cv(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Zs(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Os.waitFor(i).next((function(){return n.Fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=tl(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Al(fs);return cv(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Zs(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Fn(e,u)}))}},{key:"Fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(lv(e).get(t).next((function(e){if(null===e)throw Yu();$u(e.userId===n.userId),r.push(yd(n.serializer,e))})))})),Os.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return av(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Mn(t.batchId)})),Os.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Mn",value:function(e){delete this.vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Os.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return cv(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Zs(e[1]);i.push(a)}else r.done()})).next((function(){$u(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return sv(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return fv(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Pt",value:function(t,n,r,i){return $u(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function sv(e,t,n){var r=tl(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return cv(e).Z({range:a,Y:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function lv(e){return Sl(e,"mutations")}function cv(e){return Sl(e,"documentMutations")}function fv(e){return Sl(e,"mutationQueues")}var hv=function(){function e(t){d(this,e),this.On=t}return m(e,[{key:"next",value:function(){return this.On+=2,this.On}}],[{key:"Nn",value:function(){return new e(0)}},{key:"Bn",value:function(){return new e(-1)}}]),e}(),dv=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return m(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ln(e).next((function(n){var r=new hv(n.highestTargetId);return n.highestTargetId=r.next(),t.kn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ln(e).next((function(e){return ps.fromTimestamp(new vs(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ln(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ln(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.kn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.qn(e,t).next((function(){return n.Ln(e).next((function(r){return r.targetCount+=1,n.Qn(t,r),n.kn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return vv(e).delete(t.targetId)})).next((function(){return n.Ln(e)})).next((function(t){return $u(t.targetCount>0),t.targetCount-=1,n.kn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return vv(e).Z((function(o,u){var s=md(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Os.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return vv(e).Z((function(e,n){var r=md(n);t(r)}))}},{key:"Ln",value:function(e){return pv(e).get("targetGlobalKey").next((function(e){return $u(null!==e),e}))}},{key:"kn",value:function(e,t){return pv(e).put("targetGlobalKey",t)}},{key:"qn",value:function(e,t){return vv(e).put(gd(this.serializer,t))}},{key:"Qn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ln(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Bc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vv(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=md(n);qc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=yv(e);return t.forEach((function(t){var o=$s(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Os.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=yv(e);return Os.forEach(t,(function(t){var a=$s(t.path);return Os.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=yv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=yv(e),i=Ef();return r.Z({range:n,Y:!0},(function(e,t,n){var r=Zs(e[1]),a=new _s(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=$s(t.path),r=IDBKeyRange.bound([n],[ds(n)],!1,!0),i=0;return yv(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"lt",value:function(e,t){return vv(e).get(t).next((function(e){return e?md(e):null}))}}]),e}();function vv(e){return Sl(e,"targets")}function pv(e){return Sl(e,"targetGlobal")}function yv(e){return Sl(e,"targetDocuments")}function mv(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=fs(r,o);return 0===s?fs(i,u):s}var gv=function(){function e(t){d(this,e),this.Kn=t,this.buffer=new Al(mv),this.$n=0}return m(e,[{key:"Un",value:function(){return++this.$n}},{key:"Wn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();mv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),kv=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return m(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"zn",value:function(e){var t=this;Gu("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Us(e.t0)){e.next=12;break}Gu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Rs(e.t0);case 14:return e.next=16,t.zn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),_v=function(){function e(t,n){d(this,e),this.jn=t,this.params=n}return m(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.Hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Os.resolve(Ws.ae);var r=new gv(t);return this.jn.forEachTarget(e,(function(e){return r.Wn(e.sequenceNumber)})).next((function(){return n.jn.Jn(e,(function(e){return r.Wn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Gu("LruGarbageCollector","Garbage collection skipped; disabled"),Os.resolve(rv)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Gu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),rv):n.Yn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Yn",value:function(e,t){var n,r,i,a,o,u,s,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(Gu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(l.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ku()<=Gt.DEBUG&&Gu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-c,"ms")),Os.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function wv(e,t){return new _v(e,t)}var bv=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=wv(this,n)}return m(e,[{key:"Hn",value:function(e){var t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Zn",value:function(e){var t=0;return this.Jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Jn",value:function(e,t){return this.Xn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return xv(e,n)}},{key:"removeReference",value:function(e,t,n){return xv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return xv(e,t)}},{key:"er",value:function(e,t){return function(e,t){var n=!1;return fv(e).X((function(r){return sv(e,r,t).next((function(e){return e&&(n=!0),Os.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Xn(e,(function(o,u){if(u<=t){var s=n.er(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ps.min()),yv(e).delete(function(e){return[0,$s(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Os.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return xv(e,t)}},{key:"Xn",value:function(e,t){var n,r=yv(e),i=Ws.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ws.ae&&t(new _s(Zs(n)),i),i=s,n=u):i=Ws.ae})).next((function(){i!==Ws.ae&&t(new _s(Zs(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function xv(e,t){return yv(e).put(function(e,t){return{targetId:0,path:$s(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Sv=function(){function e(){d(this,e),this.changes=new vf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,pc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Os.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ev=function(){function e(t){d(this,e),this.serializer=t}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Nv(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Nv(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],dd(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.tr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=pc.newInvalidDocument(t);return Nv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Dv(t))},(function(e,i){r=n.nr(t,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r={size:0,document:pc.newInvalidDocument(t)};return Nv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Dv(t))},(function(e,i){r={document:n.nr(t,i),size:ov(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=yf();return this.ir(e,t,(function(e,t){var i=n.nr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"sr",value:function(e,t){var n=this,r=yf(),i=new Tl(_s.comparator);return this.ir(e,t,(function(e,t){var a=n.nr(e,t);r=r.insert(e,a),i=i.insert(e,ov(t))})).next((function(){return{documents:r,_r:i}}))}},{key:"ir",value:function(e,t,n){if(t.isEmpty())return Os.resolve();var r=new Al(Rv);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Dv(r.first()),Dv(r.last())),a=r.getIterator(),o=a.getNext();return Nv(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=_s.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Rv(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(Dv(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),dd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nv(e).G(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=yf(),o=I(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.nr(_s.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(cf(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(l){o.e(l)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=yf(),o=Av(t,n),u=Av(t,Ts.max());return Nv(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.nr(_s.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Cv(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Tv(e).get("remoteDocumentGlobalKey").next((function(e){return $u(!!e),e}))}},{key:"tr",value:function(e,t){return Tv(e).put("remoteDocumentGlobalKey",t)}},{key:"nr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Qh(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=_s.fromSegments(t.noDocument.path),i=pd(t.noDocument.readTime);n=pc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Yu();var a=_s.fromSegments(t.unknownDocument.path),o=pd(t.unknownDocument.version);n=pc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new vs(e[0],e[1]);return ps.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(ps.min()))return n}return pc.newInvalidDocument(e)}}]),e}();function Iv(e){return new Ev(e)}var Cv=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ar=e,i.trackRemovals=r,i.ur=new vf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Al((function(e,t){return fs(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ur.get(a);if(n.push(t.ar.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=hd(t.ar.serializer,o);i=i.add(a.path.popLast());var l=ov(s);r+=l-u.size,n.push(t.ar.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var c=hd(t.ar.serializer,o.convertToNoDocument(ps.min()));n.push(t.ar.addEntry(e,a,c))}})),i.forEach((function(r){n.push(t.ar.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ar.updateMetadata(e,r)),Os.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ar.rr(e,t).next((function(e){return n.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ar.sr(e,t).next((function(e){var t=e.documents;return e._r.forEach((function(e,r){n.ur.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Sv);function Tv(e){return Sl(e,"remoteDocumentGlobal")}function Nv(e){return Sl(e,"remoteDocumentsV14")}function Dv(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Av(e,t){var n=t.documentKey.path.toArray();return[e,dd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Rv(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=fs(n[a],r[a]))return i;return(i=fs(n.length,r.length))||((i=fs(n[n.length-2],r[r.length-2]))||fs(n[n.length-1],r[r.length-1]))}var Pv=m((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Ov=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&$f(r.mutation,e,Ol.empty(),vs.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Ef()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ef(),i=_f();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=gf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=_f();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Ef())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=yf(),a=bf(),o=bf();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof eh)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),$f(o.mutation,t,o.mutation.getFieldMask(),vs.now())):a.set(t.key,Ol.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Pv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=bf(),i=new Tl((function(e,t){return e-t})),a=Ef();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=I(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ol.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Ef()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,l=i.value,c=wf();l.forEach((function(e){if(!a.has(e)){var n=Qf(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,c))};u.hasNext();)s();return Os.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return _s.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ef(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Os.resolve(_f()),u=-1,s=a;return o.next((function(t){return Os.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Os.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Ef())})).next((function(e){return{batchId:u,changes:kf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new _s(t)).next((function(e){var t=gf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=gf();return this.indexManager.getCollectionParents(e,i).next((function(o){return Os.forEach(o,(function(o){var u=function(e,t){return new Qc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,pc.newInvalidDocument(r)))}));var n=gf();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&$f(a.mutation,i,Ol.empty(),vs.now()),cf(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Lv=function(){function e(t){d(this,e),this.serializer=t,this.cr=new Map,this.lr=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return Os.resolve(this.cr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Vh(e.createTime)}}(t)),Os.resolve()}},{key:"getNamedQuery",value:function(e,t){return Os.resolve(this.lr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:kd(e.bundledQuery),readTime:Vh(e.readTime)}}(t)),Os.resolve()}}]),e}(),Mv=function(){function e(){d(this,e),this.overlays=new Tl(_s.comparator),this.hr=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return Os.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=_f();return Os.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.It(e,t,i)})),Os.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hr.delete(n)),Os.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=_f(),i=t.length+1,a=new _s(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Os.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Tl((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=_f(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=_f(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Os.resolve(s)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ch(t,n));var a=this.hr.get(t);void 0===a&&(a=Ef(),this.hr.set(t,a)),this.hr.set(t,a.add(n.key))}}]),e}(),Fv=function(){function e(){d(this,e),this.Pr=new Al(Vv.Ir),this.Tr=new Al(Vv.Er)}return m(e,[{key:"isEmpty",value:function(){return this.Pr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Vv(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ar(new Vv(e,t))}},{key:"Rr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Vr",value:function(e){var t=this,n=new _s(new ms([])),r=new Vv(n,e),i=new Vv(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Ar(e),a.push(e.key)})),a}},{key:"mr",value:function(){var e=this;this.Pr.forEach((function(t){return e.Ar(t)}))}},{key:"Ar",value:function(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}},{key:"gr",value:function(e){var t=new _s(new ms([])),n=new Vv(t,e),r=new Vv(t,e+1),i=Ef();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Vv(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Vv=function(){function e(t,n){d(this,e),this.key=t,this.pr=n}return m(e,null,[{key:"Ir",value:function(e,t){return _s.comparator(e.key,t.key)||fs(e.pr,t.pr)}},{key:"Er",value:function(e,t){return fs(e.pr,t.pr)||_s.comparator(e.key,t.key)}}]),e}(),Uv=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Al(Vv.Ir)}return m(e,[{key:"checkEmpty",value:function(e){return Os.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new sh(i,t,n,r);this.mutationQueue.push(a);var o,u=I(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.wr=this.wr.add(new Vv(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return Os.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Os.resolve(this.Sr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.br(n),i=r<0?0:r;return Os.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Os.resolve(0===this.mutationQueue.length?-1:this.yr-1)}},{key:"getAllMutationBatches",value:function(e){return Os.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Vv(t,0),i=new Vv(t,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([r,i],(function(e){var t=n.Sr(e.pr);a.push(t)})),Os.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Al(fs);return t.forEach((function(e){var t=new Vv(e,0),i=new Vv(e,Number.POSITIVE_INFINITY);n.wr.forEachInRange([t,i],(function(e){r=r.add(e.pr)}))})),Os.resolve(this.Dr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;_s.isDocumentKey(i)||(i=i.child(""));var a=new Vv(new _s(i),0),o=new Al(fs);return this.wr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),a),Os.resolve(this.Dr(o))}},{key:"Dr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Sr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;$u(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.wr;return Os.forEach(t.mutations,(function(i){var a=new Vv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.wr=r}))}},{key:"Mn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Vv(t,0),r=this.wr.firstAfterOrEqual(n);return Os.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Os.resolve()}},{key:"vr",value:function(e,t){return this.br(e)}},{key:"br",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Sr",value:function(e){var t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),jv=function(){function e(t){d(this,e),this.Cr=t,this.docs=new Tl(_s.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Os.resolve(n?n.document.mutableCopy():pc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=yf();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():pc.newInvalidDocument(e))})),Os.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=yf(),a=t.path,o=new _s(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),l=s.key,c=s.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||Ns(Cs(c),n)<=0||(r.has(c.key)||cf(t,c))&&(i=i.insert(c.key,c.mutableCopy()))}return Os.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Yu()}},{key:"Fr",value:function(e,t){return Os.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new zv(this)}},{key:"getSize",value:function(e){return Os.resolve(this.size)}}]),e}(),zv=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).ar=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ar.addEntry(e,i)):t.ar.removeEntry(r)})),Os.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ar.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ar.getEntries(e,t)}}]),n}(Sv),Bv=function(){function e(t){d(this,e),this.persistence=t,this.Mr=new vf((function(e){return Bc(e)}),qc),this.lastRemoteSnapshotVersion=ps.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Fv,this.targetCount=0,this.Br=hv.Nn()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.Mr.forEach((function(e,n){return t(n)})),Os.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Os.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Os.resolve(this.Or)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Br.next(),Os.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Os.resolve()}},{key:"qn",value:function(e){this.Mr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Br=new hv(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.qn(t),this.targetCount+=1,Os.resolve()}},{key:"updateTargetData",value:function(e,t){return this.qn(t),Os.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Os.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Mr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Mr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Os.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Os.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Mr.get(t)||null;return Os.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Nr.dr(t,n),Os.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Nr.Rr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Os.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Nr.Vr(t),Os.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Nr.gr(t);return Os.resolve(n)}},{key:"containsKey",value:function(e,t){return Os.resolve(this.Nr.containsKey(t))}}]),e}(),qv=function(){function e(t,n){var r=this;d(this,e),this.Lr={},this.overlays={},this.kr=new Ws(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Bv(this),this.indexManager=new Qd,this.remoteDocumentCache=function(e){return new jv(e)}((function(e){return r.referenceDelegate.Kr(e)})),this.serializer=new fd(n),this.$r=new Lv(this.serializer)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Mv,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Lr[e.toKey()];return n||(n=new Uv(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;Gu("MemoryPersistence","Starting transaction:",e);var i=new Kv(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((function(e){return r.referenceDelegate.Wr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gr",value:function(e,t){return Os.or(Object.values(this.Lr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Kv=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(As),Gv=function(){function e(t){d(this,e),this.persistence=t,this.zr=new Fv,this.jr=null}return m(e,[{key:"Jr",get:function(){if(this.jr)return this.jr;throw Yu()}},{key:"addReference",value:function(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Os.resolve()}},{key:"removeReference",value:function(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Os.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Jr.add(t.toString()),Os.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.zr.Vr(t.targetId).forEach((function(e){return n.Jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ur",value:function(){this.jr=new Set}},{key:"Wr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Os.forEach(this.Jr,(function(r){var i=_s.fromPath(r);return t.Yr(e,i).next((function(e){e||n.removeEntry(i,ps.min())}))})).next((function(){return t.jr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Yr(e,t).next((function(e){e?n.Jr.delete(t.toString()):n.Jr.add(t.toString())}))}},{key:"Kr",value:function(e){return 0}},{key:"Yr",value:function(e,t){var n=this;return Os.or([function(){return Os.resolve(n.zr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gr(e,t)}])}}],[{key:"Hr",value:function(t){return new e(t)}}]),e}(),Wv=function(){function e(t){d(this,e),this.serializer=t}return m(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new Ls("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",el,{unique:!0}),e.createObjectStore("documentMutations")}(e),Hv(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Os.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Hv(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ps.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",el,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Os.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Xr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ei(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ti(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ni(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ri(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:pl});t.createIndex("collectionPathOverlayIndex",yl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ml,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:il});t.createIndex("documentKeyIndex",al),t.createIndex("collectionGroupIndex",ol)}(e)})).next((function(){return i.ii(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fl}).createIndex("sequenceNumberIndex",hl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:dl}).createIndex("documentKeyIndex",vl,{unique:!1})}(e)}))),o}},{key:"ei",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=ov(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Xr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return Os.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return Os.forEach(r,(function(r){$u(r.userId===n.userId);var i=yd(t.serializer,r);return av(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ti",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new ms(n),o=function(e){return[0,$s(e)]}(a);r.push(t.get(o).next((function(n){return n?Os.resolve():function(n){return t.put({targetId:0,path:$s(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Os.waitFor(r)}))}))}},{key:"ni",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:cl});var n=t.store("collectionParents"),r=new Yd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:$s(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new ms(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Zs(r));return i(a.popLast())}))}))}},{key:"ri",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=md(r),a=gd(t.serializer,i);return n.put(a)}))}},{key:"ii",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new _s(ms.fromString(e.document.name).popFirst(5)):e.noDocument?_s.fromSegments(e.noDocument.path):e.unknownDocument?_s.fromSegments(e.unknownDocument.path):Yu()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Os.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Iv(this.serializer),a=new qv(Gv.Hr,this.serializer.ht);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Ef();yd(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Os.forEach(r,(function(e,r){var o=new zu(r),u=Id.Pt(n.serializer,o),s=a.getIndexManager(o),l=uv.Pt(o,n.serializer,s,a.referenceDelegate);return new Ov(i,l,u,s).recalculateAndSaveOverlaysForDocumentKeys(new xl(t,Ws.ae),e).next()}))}))}}]),e}();function Hv(e){e.createObjectStore("targetDocuments",{keyPath:sl}).createIndex("documentTargetsIndex",ll,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ul,{unique:!0}),e.createObjectStore("targetGlobal")}var Qv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Yv=function(){function e(t,n,r,i,a,o,u,s,l,c){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.oi=a,this.window=o,this.document=u,this._i=l,this.ai=c,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=function(e){return Promise.resolve()},!e.v())throw new Zu(Ju.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bv(this,i),this.Ti=n+"main",this.serializer=new fd(s),this.Ei=new Ms(this.Ti,this.ui,new Wv(this.serializer)),this.Qr=new dv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Iv(this.serializer),this.$r=new xd,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Wu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return m(e,[{key:"start",value:function(){var e=this;return this.Ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Zu(Ju.FAILED_PRECONDITION,Qv);return e.Ri(),e.Vi(),e.mi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Qr.getHighestSequenceNumber(t)}))})).then((function(t){e.kr=new Ws(t,e._i)})).then((function(){e.qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"fi",value:function(e){var t=this;return this.Ii=function(){var n=Ze(Xe().mark((function n(r){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=Ze(Xe().mark((function t(n){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Xv(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.gi(t).next((function(t){t||(e.isPrimary=!1,e.oi.enqueueRetryable((function(){return e.Ii(!1)})))}))})).next((function(){return e.pi(t)})).next((function(n){return e.isPrimary&&!n?e.yi(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Us(t))return Gu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Gu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.oi.enqueueRetryable((function(){return e.Ii(t)})),e.isPrimary=t}))}},{key:"gi",value:function(e){var t=this;return $v(e).get("owner").next((function(e){return Os.resolve(t.Si(e))}))}},{key:"bi",value:function(e){return Xv(e).delete(this.clientId)}},{key:"Di",value:function(){var e=Ze(Xe().mark((function e(){var t,n,r,i,a=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vi(this.Pi,18e5)){e.next=6;break}return this.Pi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Sl(e,"clientMetadata");return t.G().next((function(e){var n=a.Ci(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Os.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.di){n=I(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.di.removeItem(this.Fi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mi",value:function(){var e=this;this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ai().then((function(){return e.Di()})).then((function(){return e.mi()}))}))}},{key:"Si",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"pi",value:function(e){var t=this;return this.ai?Os.resolve(!0):$v(e).get("owner").next((function(n){if(null!==n&&t.vi(n.leaseTimestampMs,5e3)&&!t.Mi(n.ownerId)){if(t.Si(n)&&t.networkEnabled)return!0;if(!t.Si(n)){if(!n.allowTabSynchronization)throw new Zu(Ju.FAILED_PRECONDITION,Qv);return!1}}return!(!t.networkEnabled||!t.inForeground)||Xv(e).G().next((function(e){return void 0===t.Ci(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Gu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ze(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new xl(e,Ws.ae);return t.yi(n).next((function(){return t.bi(n)}))}));case 7:this.Ei.close(),this.Bi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ci",value:function(e,t){var n=this;return e.filter((function(e){return n.vi(e.updateTimeMs,t)&&!n.Mi(e.clientId)}))}},{key:"Li",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Xv(t).G().next((function(t){return e.Ci(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.qr}},{key:"getMutationQueue",value:function(e,t){return uv.Pt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Xd(e,this.serializer.ht.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Id.Pt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;Gu("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?bl:14===e?wl:13===e?_l:12===e?kl:11===e?gl:void Yu()}(this.ui);return this.Ei.runTransaction(e,a,o,(function(a){return i=new xl(a,r.kr?r.kr.next():Ws.ae),"readwrite-primary"===t?r.gi(i).next((function(e){return!!e||r.pi(i)})).next((function(t){if(!t)throw Wu("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.oi.enqueueRetryable((function(){return r.Ii(!1)})),new Zu(Ju.FAILED_PRECONDITION,Ds);return n(i)})).next((function(e){return r.wi(i).next((function(){return e}))})):r.ki(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"ki",value:function(e){var t=this;return $v(e).get("owner").next((function(e){if(null!==e&&t.vi(e.leaseTimestampMs,5e3)&&!t.Mi(e.ownerId)&&!t.Si(e)&&!(t.ai||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Zu(Ju.FAILED_PRECONDITION,Qv)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $v(e).put("owner",t)}},{key:"yi",value:function(e){var t=this,n=$v(e);return n.get("owner").next((function(e){return t.Si(e)?(Gu("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Os.resolve()}))}},{key:"vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Wu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=function(){e.oi.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ai()}))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}},{key:"Oi",value:function(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}},{key:"Vi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;_t()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.oi.enterRestrictedMode(!0),t.oi.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"Ni",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Mi",value:function(e){var t;try{var n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Gu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Wu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Wu("Failed to set zombie client id.",e)}}},{key:"Bi",value:function(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}},{key:"Fi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return Ms.v()}}]),e}();function $v(e){return Sl(e,"owner")}function Xv(e){return Sl(e,"clientMetadata")}function Jv(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Zv=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}return m(e,null,[{key:"Ki",value:function(t,n){var r,i=Ef(),a=Ef(),o=I(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ep=function(){function e(){d(this,e),this.$i=!1}return m(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.$i=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Wi(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.zi(e,t)}))}},{key:"Wi",value:function(e,t){var n=this;if(Xc(t))return Os.resolve(null);var r=nf(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=of(t,null,"F"),r=nf(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Ef.apply(void 0,h(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.Hi(t,o,a,r.readTime)?n.Wi(e,of(t,null,"F")):n.Ji(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Xc(t)||r.isEqual(ps.min())?this.zi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.Hi(t,o,n,r)?i.zi(e,t):(Ku()<=Gt.DEBUG&&Gu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lf(t)),i.Ji(e,o,t,Is(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Al(hf(e));return t.forEach((function(t,r){cf(e,r)&&(n=n.add(r))})),n}},{key:"Hi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"zi",value:function(e,t){return Ku()<=Gt.DEBUG&&Gu("QueryEngine","Using full collection scan to execute query:",lf(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ts.min())}},{key:"Ji",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),tp=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Yi=n,this.serializer=i,this.Zi=new Tl(fs),this.Xi=new vf((function(e){return Bc(e)}),qc),this.es=new Map,this.ts=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this.ns(r)}return m(e,[{key:"ns",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ov(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Zi)}))}}]),e}();function np(e,t,n,r){return new tp(e,t,n,r)}function rp(e,t){return ip.apply(this,arguments)}function ip(){return ip=Ze(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.ns(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Ef(),s=I(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.push(l.batchId);var c,f=I(l.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=I(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=I(p.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{rs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function ap(e,t){var n=Xu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Os.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);$u(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Ef(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function op(e){var t=Xu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Qr.getLastRemoteSnapshotVersion(e)}))}function up(e,t){var n=Xu(e),r=t.snapshotVersion,i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Qr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Qr.addMatchingKeys(e,a.addedDocuments,u)})));var l=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?l=l.withResumeToken(Ml.EMPTY_BYTE_STRING,ps.min()).withLastLimboFreeSnapshotVersion(ps.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(u,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,l,a)&&o.push(n.Qr.updateTargetData(e,l))}}));var u=yf(),s=Ef();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(sp(e,a,t.documentUpdates).next((function(e){u=e.ss,s=e.os}))),!r.isEqual(ps.min())){var l=n.Qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return Os.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Zi=i,e}))}function sp(e,t,n){var r=Ef(),i=Ef();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=yf();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ps.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Gu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ss:r,os:i}}))}function lp(e,t){var n=Xu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function cp(e,t){var n=Xu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Qr.getTargetData(e,t).next((function(i){return i?(r=i,Os.resolve(r)):n.Qr.allocateTargetId(e).next((function(i){return r=new cd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Zi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(e.targetId,e),n.Xi.set(t,e.targetId)),e}))}function fp(e,t,n){return hp.apply(this,arguments)}function hp(){return hp=Ze(Xe().mark((function e(t,n,r){var i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xu(t),a=i.Zi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Us(e.t1)){e.next=12;break}throw e.t1;case 12:Gu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Zi=i.Zi.remove(n),i.Xi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),hp.apply(this,arguments)}function dp(e,t,n){var r=Xu(e),i=ps.min(),a=Ef();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Xu(e),i=r.Xi.get(n);return void 0!==i?Os.resolve(r.Zi.get(i)):r.Qr.getTargetData(t,n)}(r,e,nf(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Yi.getDocumentsMatchingQuery(e,t,n?i:ps.min(),n?a:Ef())})).next((function(e){return yp(r,ff(t),e),{documents:e,_s:a}}))}))}function vp(e,t){var n=Xu(e),r=Xu(n.Qr),i=n.Zi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function pp(e,t){var n=Xu(e),r=n.es.get(t)||ps.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ts.getAllFromCollectionGroup(e,t,Is(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return yp(n,t,e),e}))}function yp(e,t,n){var r=e.es.get(t)||ps.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.es.set(t,r)}function mp(e,t,n,r){return gp.apply(this,arguments)}function gp(){return gp=Ze(Xe().mark((function e(t,n,r,i){var a,o,u,s,l,c,f,h,d,v;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Xu(t),o=Ef(),u=yf(),s=I(r);try{for(s.s();!(l=s.n()).done;)c=l.value,f=n.us(c.metadata.name),c.document&&(o=o.add(f)),(h=n.cs(c)).setReadTime(n.ls(c.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.ts.newChangeBuffer({trackRemovals:!0}),e.next=7,cp(a,function(e){return nf($c(ms.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return sp(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Qr.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Qr.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ss,t.os)})).next((function(){return t.ss}))}))})));case 9:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function kp(e,t){return _p.apply(this,arguments)}function _p(){return _p=Ze(Xe().mark((function e(t,n){var r,i,a,o=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Ef(),e.next=3,cp(t,nf(kd(n.bundledQuery)));case 3:return i=e.sent,a=Xu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Vh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$r.saveNamedQuery(e,n);var o=i.withResumeToken(Ml.EMPTY_BYTE_STRING,t);return a.Zi=a.Zi.insert(o.targetId,o),a.Qr.updateTargetData(e,o).next((function(){return a.Qr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Qr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$r.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),_p.apply(this,arguments)}function wp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function bp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function xp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Sp=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return m(e,[{key:"Ps",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"hs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Zu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Wu("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ep=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return m(e,[{key:"Ps",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"hs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Zu(i.error.code,i.error.message))),a?new e(t,i.state,r):(Wu("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ip=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return m(e,null,[{key:"hs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Cf(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ys(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Wu("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Cp=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return m(e,null,[{key:"hs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Wu("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Tp=function(){function e(){d(this,e),this.activeTargetIds=Cf()}return m(e,[{key:"Is",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ts",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Ps",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Np=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.oi=n,this.persistenceKey=r,this.Es=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ds=this.As.bind(this),this.Rs=new Tl(fs),this.started=!1,this.Vs=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.fs=wp(this.persistenceKey,this.Es),this.gs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Rs=this.Rs.insert(this.Es,new Tp),this.ps=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ys=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ws=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ss=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.bs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ds)}return m(e,[{key:"start",value:function(){var e=Ze(Xe().mark((function e(){var t,n,r,i,a,o,u,s,l,c,f,h=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Li();case 2:t=e.sent,n=I(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Es){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(wp(this.persistenceKey,i)))&&(o=Ip.hs(i,a))&&(this.Rs=this.Rs.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ds(),(u=this.storage.getItem(this.Ss))&&(s=this.vs(u))&&this.Cs(s),l=I(this.Vs);try{for(l.s();!(c=l.n()).done;)f=c.value,this.As(f)}catch(d){l.e(d)}finally{l.f()}this.Vs=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.gs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Fs(this.Rs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Rs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ms(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ms(e,t,n),this.xs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(xp(this.persistenceKey,e));if(n){var r=Ep.hs(e,n);r&&(t=r.state)}}return this.Os.Is(e),this.Ds(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Os.Ts(e),this.Ds()}},{key:"isLocalQueryTarget",value:function(e){return this.Os.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(xp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ns(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.xs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Bs(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ls(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ds),this.removeItem(this.fs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Gu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Gu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Gu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"As",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Gu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.fs)return void Wu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(Ze(Xe().mark((function e(){var r,i,a,o,u,s,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ps.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ks(n.key),e.abrupt("return",t.qs(r,null));case 6:if(!(i=t.Qs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.qs(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ys.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Ks(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.$s(a));case 16:e.next=41;break;case 18:if(!t.ws.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Us(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Ws(o));case 23:e.next=41;break;case 25:if(n.key!==t.Ss){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.vs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Cs(u));case 30:e.next=41;break;case 32:if(n.key!==t.gs){e.next=37;break}s=function(e){var t=Ws.ae;if(null!=e)try{var n=JSON.parse(e);$u("number"==typeof n),t=n}catch(e){Wu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ws.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.bs){e.next=41;break}return l=t.Gs(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.zs(e)})));case 41:e.next=44;break;case 43:t.Vs.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Os",get:function(){return this.Rs.get(this.Es)}},{key:"Ds",value:function(){this.setItem(this.fs,this.Os.Ps())}},{key:"Ms",value:function(e,t,n){var r=new Sp(this.currentUser,e,t,n),i=bp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ps())}},{key:"xs",value:function(e){var t=bp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Bs",value:function(e){var t={clientId:this.Es,onlineState:e};this.storage.setItem(this.Ss,JSON.stringify(t))}},{key:"Ns",value:function(e,t,n){var r=xp(this.persistenceKey,e),i=new Ep(e,t,n);this.setItem(r,i.Ps())}},{key:"Ls",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.bs,t)}},{key:"ks",value:function(e){var t=this.ps.exec(e);return t?t[1]:null}},{key:"Qs",value:function(e,t){var n=this.ks(e);return Ip.hs(n,t)}},{key:"Ks",value:function(e,t){var n=this.ys.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sp.hs(new zu(i),r,t)}},{key:"Us",value:function(e,t){var n=this.ws.exec(e),r=Number(n[1]);return Ep.hs(r,t)}},{key:"vs",value:function(e){return Cp.hs(e)}},{key:"Gs",value:function(e){return JSON.parse(e)}},{key:"$s",value:function(){var e=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.js(t.batchId,t.state,t.error));case 2:Gu("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ws",value:function(e){return this.syncEngine.Hs(e.targetId,e.state,e.error)}},{key:"qs",value:function(e,t){var n=this,r=t?this.Rs.insert(e,t):this.Rs.remove(e),i=this.Fs(this.Rs),a=this.Fs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Js(o,u).then((function(){n.Rs=r}))}},{key:"Cs",value:function(e){this.Rs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Fs",value:function(e){var t=Cf();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Dp=function(){function e(){d(this,e),this.Ys=new Tp,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Zs[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ys.Ts(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ys.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Zs[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ys.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ys.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ys=new Tp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ap=function(){function e(){d(this,e)}return m(e,[{key:"Xs",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Rp=function(){function e(){var t=this;d(this,e),this.eo=function(){return t.no()},this.ro=function(){return t.io()},this.so=[],this.oo()}return m(e,[{key:"Xs",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}},{key:"oo",value:function(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}},{key:"no",value:function(){Gu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=I(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"io",value:function(){Gu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=I(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Pp=null;function Op(){return null===Pp?Pp=268435456+Math.round(2147483648*Math.random()):Pp++,"0x"+Pp.toString(16)}var Lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Mp=function(){function e(t){d(this,e),this._o=t._o,this.ao=t.ao}return m(e,[{key:"uo",value:function(e){this.co=e}},{key:"lo",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.Po=e}},{key:"close",value:function(){this.ao()}},{key:"send",value:function(e){this._o(e)}},{key:"Io",value:function(){this.co()}},{key:"To",value:function(e){this.ho(e)}},{key:"Eo",value:function(e){this.Po(e)}}]),e}(),Fp="WebChannelConnection",Vp=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return m(n,[{key:"wo",value:function(e,t,n,r){var i=Op();return new Promise((function(a,o){var u=new Fu;u.setWithCredentials(!0),u.listenOnce(Pu.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Ru.NO_ERROR:var t=u.getResponseJson();Gu(Fp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ru.TIMEOUT:Gu(Fp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Zu(Ju.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:var n=u.getStatus();if(Gu(Fp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ju).indexOf(t)>=0?t:Ju.UNKNOWN}(s.status);o(new Zu(l,s.message))}else o(new Zu(Ju.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Zu(Ju.UNAVAILABLE,"Connection failed."));break;default:Yu()}}finally{Gu(Fp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Gu(Fp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"bo",value:function(e,t,n){var r=Op(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Du(),o=Au(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.yo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var l=i.join("");Gu(Fp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),u);var c=a.createWebChannel(l,u),f=!1,h=!1,d=new Mp({_o:function(t){h?Gu(Fp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Gu(Fp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),f=!0),Gu(Fp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ao:function(){return c.close()}}),v=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return v(c,Mu.EventType.OPEN,(function(){h||Gu(Fp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),v(c,Mu.EventType.CLOSE,(function(){h||(h=!0,Gu(Fp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.To())})),v(c,Mu.EventType.ERROR,(function(t){h||(h=!0,Hu(Fp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.To(new Zu(Ju.UNAVAILABLE,"The operation could not be completed")))})),v(c,Mu.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];$u(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Gu(Fp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=ih[e];if(void 0!==t)return dh(t)}(u),l=o.message;void 0===s&&(s=Ju.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),h=!0,d.To(new Zu(s,l)),c.close()}else Gu(Fp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Eo(i)}})),v(o,Ou.STAT_EVENT,(function(t){t.stat===Lu.PROXY?Gu(Fp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Lu.NOPROXY&&Gu(Fp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Io()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=n+"://"+t.host,this.Ro="projects/".concat(r,"/databases/").concat(i),this.Vo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return m(e,[{key:"mo",get:function(){return!1}},{key:"fo",value:function(e,t,n,r,i){var a=Op(),o=this.po(e,t);Gu("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(u,r,i),this.wo(e,o,u,n).then((function(t){return Gu("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Hu("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"So",value:function(e,t,n,r,i,a){return this.fo(e,t,n,r,i)}},{key:"yo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"po",value:function(e,t){var n=Lp[e];return"".concat(this.Ao,"/v1/").concat(t,":").concat(n)}}]),e}());function Up(){return"undefined"!=typeof window?window:null}function jp(){return"undefined"!=typeof document?document:null}function zp(e){return new Ph(e,!0)}var Bp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.oi=t,this.timerId=n,this.Do=r,this.vo=i,this.Co=a,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.Fo=0}},{key:"Oo",value:function(){this.Fo=this.Co}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&Gu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Fo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,(function(){return t.xo=Date.now(),e()})),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}},{key:"Lo",value:function(){null!==this.Mo&&(this.Mo.skipDelay(),this.Mo=null)}},{key:"cancel",value:function(){null!==this.Mo&&(this.Mo.cancel(),this.Mo=null)}},{key:"Bo",value:function(){return(Math.random()-.5)*this.Fo}}]),e}(),qp=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.oi=t,this.ko=r,this.qo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new Bp(t,n)}return m(e,[{key:"Wo",value:function(){return 1===this.state||5===this.state||this.Go()}},{key:"Go",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.zo()}},{key:"stop",value:function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Wo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jo",value:function(){this.state=0,this.Uo.reset()}},{key:"Ho",value:function(){var e=this;this.Go()&&null===this.Ko&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,(function(){return e.Jo()})))}},{key:"Yo",value:function(e){this.Zo(),this.stream.send(e)}},{key:"Jo",value:function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Go()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}},{key:"Xo",value:function(){this.$o&&(this.$o.cancel(),this.$o=null)}},{key:"close",value:function(){var e=Ze(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,4!==t?this.Uo.reset():n&&n.code===Ju.RESOURCE_EXHAUSTED?(Wu(n.toString()),Wu("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===Ju.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.e_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.lo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"e_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Qo===n&&e.n_(i,a)}),(function(n){t((function(){var t=new Zu(Ju.UNKNOWN,"Fetching auth token failed: "+n.message);return e.r_(t)}))}))}},{key:"n_",value:function(e,t){var n=this,r=this.t_(this.Qo);this.stream=this.i_(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.$o=n.oi.enqueueAfterDelay(n.qo,1e4,(function(){return n.Go()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.lo((function(e){r((function(){return n.r_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"zo",value:function(){var e=this;this.state=5,this.Uo.No(Ze(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"r_",value:function(e){return Gu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"t_",value:function(e){var t=this;return function(n){t.oi.enqueueAndForget((function(){return t.Qo===e?n():(Gu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Kp=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return m(n,[{key:"i_",value:function(e,t){return this.connection.bo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Uo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Yu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?($u(void 0===t||"string"==typeof t),Ml.fromBase64String(t||"")):($u(void 0===t||t instanceof Uint8Array),Ml.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ju.UNKNOWN:dh(e.code);return new Zu(t,e.message||"")}(o);n=new Eh(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var l=Bh(e,s.document.name),c=Vh(s.document.updateTime),f=s.document.createTime?Vh(s.document.createTime):ps.min(),h=new dc({mapValue:{fields:s.document.fields}}),d=pc.newFoundDocument(l,c,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new xh(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Bh(e,y.document),g=y.readTime?Vh(y.readTime):ps.min(),k=pc.newNoDocument(m,g),_=y.removedTargetIds||[];n=new xh([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Bh(e,w.document),x=w.removedTargetIds||[];n=new xh([],x,b,null)}else{if(!("filter"in t))return Yu();t.filter;var S=t.filter;S.targetId;var E=S.count,I=void 0===E?0:E,C=S.unchangedNames,T=new fh(I,C),N=S.targetId;n=new Sh(N,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ps.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ps.min():t.readTime?Vh(t.readTime):ps.min()}(e);return this.listener.s_(t,n)}},{key:"o_",value:function(e){var t={};t.database=Gh(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Kc(r)?{documents:Jh(e,r)}:{query:Zh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Mh(e,t.resumeToken);var i=Oh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(ps.min())>0){n.readTime=Lh(e,t.snapshotVersion.toTimestamp());var a=Oh(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Yo(t)}},{key:"__",value:function(e){var t={};t.database=Gh(this.serializer),t.removeTarget=e,this.Yo(t)}}]),n}(qp),Gp=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.a_=!1,s}return m(n,[{key:"u_",get:function(){return this.a_}},{key:"start",value:function(){this.a_=!1,this.lastStreamToken=void 0,mr(_(n.prototype),"start",this).call(this)}},{key:"e_",value:function(){this.a_&&this.c_([])}},{key:"i_",value:function(e,t){return this.connection.bo("Write",e,t)}},{key:"onMessage",value:function(e){if($u(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();var t=function(e,t){return e&&e.length>0?($u(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Vh(e.updateTime):Vh(t);return n.isEqual(ps.min())&&(n=Vh(t)),new Kf(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Vh(e.commitTime);return this.listener.l_(n,t)}return $u(!e.writeResults||0===e.writeResults.length),this.a_=!0,this.listener.h_()}},{key:"P_",value:function(){var e={};e.database=Gh(this.serializer),this.Yo(e)}},{key:"c_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return $h(t.serializer,e)}))};this.Yo(n)}}]),n}(qp),Wp=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.I_=!1,o}return m(n,[{key:"T_",value:function(){if(this.I_)throw new Zu(Ju.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"fo",value:function(e,t,n){var r=this;return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.fo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ju.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Zu(Ju.UNKNOWN,e.toString())}))}},{key:"So",value:function(e,t,n,r){var i=this;return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.So(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ju.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Zu(Ju.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.I_=!0}}]),n}(m((function e(){d(this,e)})));var Hp=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}return m(e,[{key:"V_",value:function(){var e=this;0===this.d_&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.A_=null,e.f_("Backend didn't respond within 10 seconds."),e.m_("Offline"),Promise.resolve()})))}},{key:"g_",value:function(e){"Online"===this.state?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.m_("Offline")))}},{key:"set",value:function(e){this.p_(),this.d_=0,"Online"===e&&(this.R_=!1),this.m_(e)}},{key:"m_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"f_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.R_?(Wu(t),this.R_=!1):Gu("OnlineStateTracker",t)}},{key:"p_",value:function(){null!==this.A_&&(this.A_.cancel(),this.A_=null)}}]),e}(),Qp=m((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=a,this.D_.Xs((function(e){r.enqueueAndForget(Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ay(o),!e.t0){e.next=5;break}return Gu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ze(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Xu(t)).S_.add(4),e.next=4,Xp(n);case 4:return n.v_.set("Unknown"),n.S_.delete(4),e.next=8,Yp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.v_=new Hp(r,i)}));function Yp(e){return $p.apply(this,arguments)}function $p(){return($p=Ze(Xe().mark((function e(t){var n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ay(t)){e.next=18;break}n=I(t.b_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function Xp(e){return Jp.apply(this,arguments)}function Jp(){return(Jp=Ze(Xe().mark((function e(t){var n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=I(t.b_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Zp(e,t){var n=Xu(e);n.w_.has(t.targetId)||(n.w_.set(t.targetId,t),iy(n)?ry(n):Oy(n).Go()&&ty(n,t))}function ey(e,t){var n=Xu(e),r=Oy(n);n.w_.delete(t),r.Go()&&ny(n,t),0===n.w_.size&&(r.Go()?r.Ho():ay(n)&&n.v_.set("Unknown"))}function ty(e,t){if(e.C_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ps.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Oy(e).o_(t)}function ny(e,t){e.C_.Le(t),Oy(e).__(t)}function ry(e){e.C_=new Ch({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.w_.get(t)||null},st:function(){return e.datastore.serializer.databaseId}}),Oy(e).start(),e.v_.V_()}function iy(e){return ay(e)&&!Oy(e).Wo()&&e.w_.size>0}function ay(e){return 0===Xu(e).S_.size}function oy(e){e.C_=void 0}function uy(e){return sy.apply(this,arguments)}function sy(){return(sy=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.w_.forEach((function(e,n){ty(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ly(e,t){return cy.apply(this,arguments)}function cy(){return(cy=Ze(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oy(t),iy(t)?(t.v_.g_(n),ry(t)):t.v_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fy(e,t,n){return hy.apply(this,arguments)}function hy(){return hy=Ze(Xe().mark((function e(t,n,r){var i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.v_.set("Online"),!(n instanceof Eh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ze(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=I(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.w_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.w_.delete(o),t.C_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Gu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,dy(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof xh?t.C_.Ge(n):n instanceof Sh?t.C_.Xe(n):t.C_.He(n),r.isEqual(ps.min())){e.next=29;break}return e.prev=14,e.next=17,op(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.C_._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.w_.get(r);i&&e.w_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.w_.get(t);if(r){e.w_.set(t,r.withResumeToken(Ml.EMPTY_BYTE_STRING,r.snapshotVersion)),ny(e,t);var i=new cd(r.target,t,n,r.sequenceNumber);ty(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Gu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,dy(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),hy.apply(this,arguments)}function dy(e,t,n){return vy.apply(this,arguments)}function vy(){return(vy=Ze(Xe().mark((function e(t,n,r){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Us(n)){e.next=2;break}throw n;case 2:return t.S_.add(1),e.next=5,Xp(t);case 5:t.v_.set("Offline"),r||(r=function(){return op(t.localStore)}),t.asyncQueue.enqueueRetryable(Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.S_.delete(1),e.next=6,Yp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function py(e,t){return t().catch((function(n){return dy(e,n,t)}))}function yy(e){return my.apply(this,arguments)}function my(){return my=Ze(Xe().mark((function e(t){var n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xu(t),r=Ly(n),i=n.y_.length>0?n.y_[n.y_.length-1].batchId:-1;case 2:if(!gy(n)){e.next=19;break}return e.prev=3,e.next=6,lp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.y_.length&&r.Ho(),e.abrupt("break",19);case 10:i=a.batchId,ky(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,dy(n,e.t0);case 17:e.next=2;break;case 19:_y(n)&&wy(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),my.apply(this,arguments)}function gy(e){return ay(e)&&e.y_.length<10}function ky(e,t){e.y_.push(t);var n=Ly(e);n.Go()&&n.u_&&n.c_(t.mutations)}function _y(e){return ay(e)&&!Ly(e).Wo()&&e.y_.length>0}function wy(e){Ly(e).start()}function by(e){return xy.apply(this,arguments)}function xy(){return(xy=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ly(t).P_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sy(e){return Ey.apply(this,arguments)}function Ey(){return(Ey=Ze(Xe().mark((function e(t){var n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ly(t),r=I(t.y_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.c_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iy(e,t,n){return Cy.apply(this,arguments)}function Cy(){return Cy=Ze(Xe().mark((function e(t,n,r){var i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.y_.shift(),a=lh.from(i,n,r),e.next=3,py(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,yy(t);case 5:case"end":return e.stop()}}),e)}))),Cy.apply(this,arguments)}function Ty(e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=Ze(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Ly(t).u_,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ze(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return hh(e)&&e!==Ju.ABORTED}(n.code)){e.next=7;break}return r=t.y_.shift(),Ly(t).jo(),e.next=5,py(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,yy(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:_y(t)&&wy(t);case 5:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}function Dy(e,t){return Ay.apply(this,arguments)}function Ay(){return Ay=Ze(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Xu(t)).asyncQueue.verifyOperationInProgress(),Gu("RemoteStore","RemoteStore received new credentials"),i=ay(r),r.S_.add(3),e.next=6,Xp(r);case 6:return i&&r.v_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.S_.delete(3),e.next=12,Yp(r);case 12:case"end":return e.stop()}}),e)}))),Ay.apply(this,arguments)}function Ry(e,t){return Py.apply(this,arguments)}function Py(){return(Py=Ze(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),!n){e.next=7;break}return r.S_.delete(2),e.next=5,Yp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.S_.add(2),e.next=12,Xp(r);case 12:r.v_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oy(e){return e.F_||(e.F_=function(e,t,n){var r=Xu(e);return r.T_(),new Kp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:uy.bind(null,e),lo:ly.bind(null,e),s_:fy.bind(null,e)}),e.b_.push(function(){var t=Ze(Xe().mark((function t(n){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.F_.jo(),iy(e)?ry(e):e.v_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.F_.stop();case 6:oy(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.F_}function Ly(e){return e.M_||(e.M_=function(e,t,n){var r=Xu(e);return r.T_(),new Gp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:by.bind(null,e),lo:Ty.bind(null,e),h_:Sy.bind(null,e),l_:Iy.bind(null,e)}),e.b_.push(function(){var t=Ze(Xe().mark((function t(n){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.M_.jo(),t.next=4,yy(e);case 4:t.next=9;break;case 6:return t.next=8,e.M_.stop();case 8:e.y_.length>0&&(Gu("RemoteStore","Stopping write stream with ".concat(e.y_.length," pending writes")),e.y_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.M_}var My=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zu(Ju.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Fy(e,t){if(Wu("AsyncQueue","".concat(t,": ").concat(e)),Us(e))return new Zu(Ju.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Vy=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||_s.comparator(e.key,n.key)}:function(e,t){return _s.comparator(e.key,t.key)},this.keyedMap=gf(),this.sortedSet=new Tl(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Uy=function(){function e(){d(this,e),this.x_=new Tl(_s.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.x_.get(t);n?0!==e.type&&3===n.type?this.x_=this.x_.insert(t,e):3===e.type&&1!==n.type?this.x_=this.x_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.x_=this.x_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.x_=this.x_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.x_=this.x_.remove(t):1===e.type&&2===n.type?this.x_=this.x_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.x_=this.x_.insert(t,{type:2,doc:e.doc}):Yu():this.x_=this.x_.insert(t,e)}},{key:"O_",value:function(){var e=[];return this.x_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),jy=function(){function e(t,n,r,i,a,o,u,s,l){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=l}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Vy.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),zy=m((function e(){d(this,e),this.N_=void 0,this.listeners=[]})),By=m((function e(){d(this,e),this.queries=new vf((function(e){return sf(e)}),uf),this.onlineState="Unknown",this.B_=new Set}));function qy(e,t){return Ky.apply(this,arguments)}function Ky(){return Ky=Ze(Xe().mark((function e(t,n){var r,i,a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new zy),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.N_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Fy(e.t0,"Initialization of query '".concat(lf(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.L_(r.onlineState),o.N_&&n.k_(o.N_)&&Yy(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ky.apply(this,arguments)}function Gy(e,t){return Wy.apply(this,arguments)}function Wy(){return Wy=Ze(Xe().mark((function e(t,n){var r,i,a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Wy.apply(this,arguments)}function Hy(e,t){var n,r=Xu(e),i=!1,a=I(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var l,c=I(s.listeners);try{for(c.s();!(l=c.n()).done;){l.value.k_(o)&&(i=!0)}}catch(f){c.e(f)}finally{c.f()}s.N_=o}}}catch(f){a.e(f)}finally{a.f()}i&&Yy(r)}function Qy(e,t,n){var r=Xu(e),i=r.queries.get(t);if(i){var a,o=I(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Yy(e){e.B_.forEach((function(e){e.next()}))}var $y=function(){function e(t,n,r){d(this,e),this.query=t,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"k_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=I(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new jy(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),a=!0):this.W_(e,this.onlineState)&&(this.G_(e),a=!0),this.K_=e,a}},{key:"onError",value:function(e){this.q_.error(e)}},{key:"L_",value:function(e){this.onlineState=e;var t=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),t=!0),t}},{key:"W_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"U_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"G_",value:function(e){e=jy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}]),e}(),Xy=function(){function e(t,n){d(this,e),this.j_=t,this.byteLength=n}return m(e,[{key:"H_",value:function(){return"metadata"in this.j_}}]),e}(),Jy=function(){function e(t){d(this,e),this.serializer=t}return m(e,[{key:"us",value:function(e){return Bh(this.serializer,e)}},{key:"cs",value:function(e){return e.metadata.exists?Qh(this.serializer,e.document,!1):pc.newNoDocument(this.us(e.metadata.name),this.ls(e.metadata.readTime))}},{key:"ls",value:function(e){return Vh(e)}}]),e}(),Zy=function(){function e(t,n,r){d(this,e),this.J_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=em(t)}return m(e,[{key:"Y_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.j_.namedQuery)this.queries.push(e.j_.namedQuery);else if(e.j_.documentMetadata){this.documents.push({metadata:e.j_.documentMetadata}),e.j_.documentMetadata.exists||++t;var n=ms.fromString(e.j_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.j_.document&&(this.documents[this.documents.length-1].document=e.j_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Z_",value:function(e){var t,n=new Map,r=new Jy(this.serializer),i=I(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.us(a.metadata.name),s=I(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=(n.get(l)||Ef()).add(u);n.set(l,c)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ze(Xe().mark((function e(){var t,n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mp(this.localStore,new Jy(this.serializer),this.documents,this.J_.id);case 2:t=e.sent,n=this.Z_(this.documents),r=I(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,kp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,X_:this.collectionGroups,ea:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function em(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var tm=m((function e(t){d(this,e),this.key=t})),nm=m((function e(t){d(this,e),this.key=t})),rm=function(){function e(t,n){d(this,e),this.query=t,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=Ef(),this.mutatedKeys=Ef(),this.ia=hf(t),this.sa=new Vy(this.ia)}return m(e,[{key:"oa",get:function(){return this.ta}},{key:"_a",value:function(e,t){var n=this,r=t?t.aa:new Uy,i=t?t.sa:this.sa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),f=cf(n.query,t)?t:null,h=!!c&&n.mutatedKeys.has(c.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;c&&f?c.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.ua(c,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.ia(f,s)>0||l&&n.ia(f,l)<0)&&(u=!0)):!c&&f?(r.track({type:0,doc:f}),v=!0):c&&!f&&(r.track({type:1,doc:c}),v=!0,(s||l)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{sa:o,aa:r,Hi:u,mutatedKeys:a}}},{key:"ua",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;var a=e.aa.O_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yu()}};return n(e)-n(t)}(e.type,t.type)||r.ia(e.doc,t.doc)})),this.ca(n);var o=t?this.la():[],u=0===this.ra.size&&this.current?1:0,s=u!==this.na;return this.na=u,0!==a.length||s?{snapshot:new jy(this.query,e.sa,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}},{key:"L_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Uy,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}},{key:"Pa",value:function(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}},{key:"ca",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ta=t.ta.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ta=t.ta.delete(e)})),this.current=e.current)}},{key:"la",value:function(){var e=this;if(!this.current)return[];var t=this.ra;this.ra=Ef(),this.sa.forEach((function(t){e.Pa(t.key)&&(e.ra=e.ra.add(t.key))}));var n=[];return t.forEach((function(t){e.ra.has(t)||n.push(new nm(t))})),this.ra.forEach((function(e){t.has(e)||n.push(new tm(e))})),n}},{key:"Ia",value:function(e){this.ta=e._s,this.ra=Ef();var t=this._a(e.documents);return this.applyChanges(t,!0)}},{key:"Ta",value:function(){return jy.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,0===this.na,this.hasCachedResults)}}]),e}(),im=m((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),am=m((function e(t){d(this,e),this.key=t,this.Ea=!1})),om=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new vf((function(e){return sf(e)}),uf),this.Ra=new Map,this.Va=new Set,this.ma=new Tl(_s.comparator),this.fa=new Map,this.ga=new Fv,this.pa={},this.ya=new Map,this.wa=hv.Bn(),this.onlineState="Unknown",this.Sa=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.Sa}}]),e}();function um(e,t){return sm.apply(this,arguments)}function sm(){return sm=Ze(Xe().mark((function e(t,n){var r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eg(t),!(o=r.Aa.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Ta(),e.next=15;break;case 6:return e.next=8,cp(r.localStore,nf(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,lm(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Zp(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),sm.apply(this,arguments)}function lm(e,t,n,r,i){return cm.apply(this,arguments)}function cm(){return cm=Ze(Xe().mark((function e(t,n,r,i,a){var o,u,s,l,c,f;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ba=function(e,n,r){return function(){var e=Ze(Xe().mark((function e(t,n,r,i){var a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view._a(r),e.t0=a.Hi,!e.t0){e.next=6;break}return e.next=5,dp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view._a(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Dm(t,n.targetId,u.ha),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,dp(t.localStore,n,!0);case 3:return o=e.sent,u=new rm(n,o._s),s=u._a(o.documents),l=bh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),c=u.applyChanges(s,t.isPrimaryClient,l),Dm(t,r,c.ha),f=new im(n,r,u),e.abrupt("return",(t.Aa.set(n,f),t.Ra.has(r)?t.Ra.get(r).push(n):t.Ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function fm(e,t){return hm.apply(this,arguments)}function hm(){return hm=Ze(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xu(t),i=r.Aa.get(n),!((a=r.Ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Ra.set(i.targetId,a.filter((function(e){return!uf(e,n)}))),void r.Aa.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,fp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),ey(r.remoteStore,i.targetId),Tm(r,i.targetId)})).catch(Rs);case 9:e.next=14;break;case 11:return Tm(r,i.targetId),e.next=14,fp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),hm.apply(this,arguments)}function dm(e,t,n){return vm.apply(this,arguments)}function vm(){return vm=Ze(Xe().mark((function e(t,n,r){var i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tg(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Xu(e),a=vs.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ef());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=yf(),s=Ef();return i.ts.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=I(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=Xf(l,n.get(l.key).overlayedDocument);null!=c&&u.push(new eh(l.key,c,vc(c.value.mapValue),Gf.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:kf(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.pa[e.currentUser.toKey()];r||(r=new Tl(fs)),r=r.insert(t,n),e.pa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Pm(i,a.changes);case 9:return e.next=11,yy(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Fy(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),vm.apply(this,arguments)}function pm(e,t){return ym.apply(this,arguments)}function ym(){return ym=Ze(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.prev=1,e.next=4,up(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.fa.get(t);n&&($u(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ea=!0:e.modifiedDocuments.size>0?$u(n.Ea):e.removedDocuments.size>0&&($u(n.Ea),n.Ea=!1))})),e.next=8,Pm(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Rs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ym.apply(this,arguments)}function mm(e,t,n){var r=Xu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Aa.forEach((function(e,n){var r=n.view.L_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Xu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=I(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.L_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Yy(n)}(r.eventManager,t),i.length&&r.da.s_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function gm(e,t,n){return km.apply(this,arguments)}function km(){return km=Ze(Xe().mark((function e(t,n,r){var i,a,o,u,s,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Xu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.fa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Tl(_s.comparator)).insert(o,pc.newNoDocument(o,ps.min())),s=Ef().add(o),l=new wh(ps.min(),new Map,new Tl(fs),u,s),e.next=9,pm(i,l);case 9:i.ma=i.ma.remove(o),i.fa.delete(n),Rm(i),e.next=16;break;case 14:return e.next=16,fp(i.localStore,n,!1).then((function(){return Tm(i,n,r)})).catch(Rs);case 16:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function _m(e,t){return wm.apply(this,arguments)}function wm(){return wm=Ze(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),i=n.batch.batchId,e.prev=1,e.next=4,ap(r.localStore,n);case 4:return a=e.sent,Cm(r,i,null),Im(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Pm(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Rs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),wm.apply(this,arguments)}function bm(e,t,n){return xm.apply(this,arguments)}function xm(){return xm=Ze(Xe().mark((function e(t,n,r){var i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xu(t),e.prev=1,e.next=4,function(e,t){var n=Xu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return $u(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Cm(i,n,r),Im(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Pm(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Rs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),xm.apply(this,arguments)}function Sm(e,t){return Em.apply(this,arguments)}function Em(){return Em=Ze(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ay((r=Xu(t)).remoteStore)||Gu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Xu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ya.get(i)||[]).push(n),r.ya.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Fy(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Em.apply(this,arguments)}function Im(e,t){(e.ya.get(t)||[]).forEach((function(e){e.resolve()})),e.ya.delete(t)}function Cm(e,t,n){var r=Xu(e),i=r.pa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.pa[r.currentUser.toKey()]=i}}function Tm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=I(e.Ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Aa.delete(a),n&&e.da.Da(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Ra.delete(t),e.isPrimaryClient&&e.ga.Vr(t).forEach((function(t){e.ga.containsKey(t)||Nm(e,t)}))}function Nm(e,t){e.Va.delete(t.path.canonicalString());var n=e.ma.get(t);null!==n&&(ey(e.remoteStore,n),e.ma=e.ma.remove(t),e.fa.delete(n),Rm(e))}function Dm(e,t,n){var r,i=I(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof tm?(e.ga.addReference(a.key,t),Am(e,a)):a instanceof nm?(Gu("SyncEngine","Document no longer in limbo: "+a.key),e.ga.removeReference(a.key,t),e.ga.containsKey(a.key)||Nm(e,a.key)):Yu()}}catch(o){i.e(o)}finally{i.f()}}function Am(e,t){var n=t.key,r=n.path.canonicalString();e.ma.get(n)||e.Va.has(r)||(Gu("SyncEngine","New document in limbo: "+n),e.Va.add(r),Rm(e))}function Rm(e){for(;e.Va.size>0&&e.ma.size<e.maxConcurrentLimboResolutions;){var t=e.Va.values().next().value;e.Va.delete(t);var n=new _s(ms.fromString(t)),r=e.wa.next();e.fa.set(r,new am(n)),e.ma=e.ma.insert(n,r),Zp(e.remoteStore,new cd(nf($c(n.path)),r,"TargetPurposeLimboResolution",Ws.ae))}}function Pm(e,t,n){return Om.apply(this,arguments)}function Om(){return Om=Ze(Xe().mark((function e(t,n,r){var i,a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xu(t),a=[],o=[],u=[],e.t0=i.Aa.isEmpty(),e.t0){e.next=9;break}return i.Aa.forEach((function(e,t){u.push(i.ba(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Zv.Ki(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.da.s_(a),e.next=9,function(){var e=Ze(Xe().mark((function e(t,n){var r,i,a,o,u,s,l,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Os.forEach(n,(function(t){return Os.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Os.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Us(e.t0)){e.next=10;break}throw e.t0;case 10:Gu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=I(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Zi.get(u),l=s.snapshotVersion,c=s.withLastLimboFreeSnapshotVersion(l),r.Zi=r.Zi.insert(u,c))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Om.apply(this,arguments)}function Lm(e,t){return Mm.apply(this,arguments)}function Mm(){return(Mm=Ze(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Xu(t)).currentUser.isEqual(n)){e.next=11;break}return Gu("SyncEngine","User change. New user:",n.toKey()),e.next=5,rp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ya.forEach((function(e){e.forEach((function(e){e.reject(new Zu(Ju.CANCELLED,t))}))})),e.ya.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Pm(r,i.rs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fm(e,t){var n=Xu(e),r=n.fa.get(t);if(r&&r.Ea)return Ef().add(r.key);var i=Ef(),a=n.Ra.get(t);if(!a)return i;var o,u=I(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=n.Aa.get(s);i=i.unionWith(l.view.oa)}}catch(c){u.e(c)}finally{u.f()}return i}function Vm(e,t){return Um.apply(this,arguments)}function Um(){return Um=Ze(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.next=3,dp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ia(i),e.abrupt("return",(r.isPrimaryClient&&Dm(r,n.targetId,a.ha),a));case 6:case"end":return e.stop()}}),e)}))),Um.apply(this,arguments)}function jm(e,t){return zm.apply(this,arguments)}function zm(){return(zm=Ze(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),e.abrupt("return",pp(r.localStore,n).then((function(e){return Pm(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bm(e,t,n,r){return qm.apply(this,arguments)}function qm(){return qm=Ze(Xe().mark((function e(t,n,r,i){var a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Xu(t),e.next=3,function(e,t){var n=Xu(e),r=Xu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Cn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Os.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,yy(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Cm(a,n,i||null),Im(a,n),function(e,t){Xu(Xu(e).mutationQueue).Mn(t)}(a.localStore,n)):Yu();case 11:return e.next=13,Pm(a,o);case 13:e.next=16;break;case 15:Gu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),qm.apply(this,arguments)}function Km(e,t){return Gm.apply(this,arguments)}function Gm(){return(Gm=Ze(Xe().mark((function e(t,n){var r,i,a,o,u,s,l,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(eg(r=Xu(t)),tg(r),!0!==n||!0===r.Sa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Wm(r,i.toArray());case 5:return a=e.sent,r.Sa=!0,e.next=9,Ry(r.remoteStore,!0);case 9:o=I(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Zp(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Sa){e.next=25;break}return l=[],c=Promise.resolve(),r.Ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):c=c.then((function(){return Tm(r,t),fp(r.localStore,t,!0)})),ey(r.remoteStore,t)})),e.next=19,c;case 19:return e.next=21,Wm(r,l);case 21:return function(e){var t=Xu(e);t.fa.forEach((function(e,n){ey(t.remoteStore,n)})),t.ga.mr(),t.fa=new Map,t.ma=new Tl(_s.comparator)}(r),r.Sa=!1,e.next=25,Ry(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wm(e,t,n){return Hm.apply(this,arguments)}function Hm(){return Hm=Ze(Xe().mark((function e(t,n,r){var i,a,o,u,s,l,c,f,h,d,v,p,y,m;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Xu(t),a=[],o=[],u=I(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(l=s.value,c=void 0,!(f=i.Ra.get(l))||0===f.length){e.next=34;break}return e.next=11,cp(i.localStore,nf(f[0]));case 11:c=e.sent,h=I(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.Aa.get(v),e.next=20,Vm(i,p);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,vp(i.localStore,l);case 36:return m=e.sent,e.next=39,cp(i.localStore,m);case 39:return c=e.sent,e.next=42,lm(i,Qm(m),l,!1,c.resumeToken);case 42:a.push(c);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.da.s_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Hm.apply(this,arguments)}function Qm(e){return Yc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ym(e){return function(e){return Xu(Xu(e).persistence).Li()}(Xu(e).localStore)}function $m(e,t,n,r){return Xm.apply(this,arguments)}function Xm(){return Xm=Ze(Xe().mark((function e(t,n,r,i){var a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Xu(t)).Sa){e.next=3;break}return e.abrupt("return",void Gu("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.Ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,pp(a.localStore,ff(o[0]));case 10:return u=e.sent,s=wh.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ml.EMPTY_BYTE_STRING),e.next=14,Pm(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,fp(a.localStore,n,!0);case 17:return Tm(a,n,i),e.abrupt("break",20);case 19:Yu();case 20:case"end":return e.stop()}}),e)}))),Xm.apply(this,arguments)}function Jm(e,t,n){return Zm.apply(this,arguments)}function Zm(){return Zm=Ze(Xe().mark((function e(t,n,r){var i,a,o,u,s,l,c,f,h;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=eg(t)).Sa){e.next=45;break}a=I(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Ra.has(u)){e.next=10;break}return Gu("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,vp(i.localStore,u);case 12:return s=e.sent,e.next=15,cp(i.localStore,s);case 15:return l=e.sent,e.next=18,lm(i,Qm(s),l.targetId,!1,l.resumeToken);case 18:Zp(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:c=I(r),e.prev=30,h=Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Ra.has(t),!e.t0){e.next=5;break}return e.next=5,fp(i.localStore,t,!1).then((function(){ey(i.remoteStore,t),Tm(i,t)})).catch(Rs);case 5:case"end":return e.stop()}}),e)})),c.s();case 33:if((f=c.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),c.e(e.t2);case 42:return e.prev=42,c.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Zm.apply(this,arguments)}function eg(e){var t=Xu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gm.bind(null,t),t.da.s_=Hy.bind(null,t.eventManager),t.da.Da=Qy.bind(null,t.eventManager),t}function tg(e){var t=Xu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_m.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bm.bind(null,t),t}function ng(e,t,n){var r=Xu(e);(function(){var e=Ze(Xe().mark((function e(t,n,r){var i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Xu(e),r=Vh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$r.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(em(i)),a=new Zy(i,t.localStore,n.serializer),e.next=15,n.va();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Y_(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.va();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Pm(t,s.ea,void 0);case 31:return e.next=33,function(e,t){var n=Xu(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$r.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.X_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Hu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var rg=function(){function e(){d(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=zp(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return np(this.persistence,new ep,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new qv(Gv.Hr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Dp}},{key:"terminate",value:function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ig=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ca=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return m(n,[{key:"initialize",value:function(){var e=Ze(Xe().mark((function e(t){var r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ca.initialize(this,t);case 4:return e.next=6,tg(this.Ca.syncEngine);case 6:return e.next=8,yy(this.Ca.remoteStore);case 8:return e.next=10,this.persistence.fi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return np(this.persistence,new ep,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new kv(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Gs(t,this.persistence);return new Ks(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Jv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?iv.withCacheSize(this.cacheSizeBytes):iv.DEFAULT;return new Yv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Up(),jp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Dp}}]),n}(rg),ag=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ca=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return m(n,[{key:"initialize",value:function(){var e=Ze(Xe().mark((function e(t){var r,i=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ca.syncEngine,e.t0=this.sharedClientState instanceof Np,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={js:Bm.bind(null,r),Hs:$m.bind(null,r),Js:Jm.bind(null,r),Li:Ym.bind(null,r),zs:jm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.fi(function(){var e=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Km(i.Ca.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Up();if(!Np.v(t))throw new Zu(Ju.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Np(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(ig),og=function(){function e(){d(this,e)}return m(e,[{key:"initialize",value:function(){var e=Ze(Xe().mark((function e(t,n){var r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return mm(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Lm.bind(null,this.syncEngine),e.next=12,Ry(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new By}},{key:"createDatastore",value:function(e){var t=zp(e.databaseInfo.databaseId),n=function(e){return new Vp(e)}(e.databaseInfo);return function(e,t,n,r){return new Wp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Qp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return mm(t.syncEngine,e,0)}),Rp.v()?new Rp:new Ap)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new om(e,t,n,r,i,a);return o&&(u.Sa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ze(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xu(t),Gu("RemoteStore","RemoteStore shutting down."),n.S_.add(5),e.next=5,Xp(n);case 5:n.D_.shutdown(),n.v_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function ug(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ze(Xe().mark((function r(){var i;return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var sg=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Fa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Fa(this.observer.error,e):Wu("Uncaught Error in snapshot listener:",e.toString())}},{key:"Ma",value:function(){this.muted=!0}},{key:"Fa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),lg=function(){function e(t,n){var r=this;d(this,e),this.xa=t,this.serializer=n,this.metadata=new es,this.buffer=new Uint8Array,this.Oa=new TextDecoder("utf-8"),this.Na().then((function(e){e&&e.H_()?r.metadata.resolve(e.j_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.j_))))}),(function(e){return r.metadata.reject(e)}))}return m(e,[{key:"close",value:function(){return this.xa.cancel()}},{key:"getMetadata",value:function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"va",value:function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Na());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Na",value:function(){var e=Ze(Xe().mark((function e(){var t,n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ba();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Oa.decode(t),r=Number(n),isNaN(r)&&this.La("length string (".concat(n,") is not valid number")),e.next=9,this.ka(r);case 9:return i=e.sent,e.abrupt("return",new Xy(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"qa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ba",value:function(){var e=Ze(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.qa()<0)){e.next=7;break}return e.next=3,this.Qa();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.qa())<0&&this.La("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ka",value:function(){var e=Ze(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Qa();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.La("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Oa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"La",value:function(e){throw this.xa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Qa",value:function(){var e=Ze(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.xa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),cg=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return m(e,[{key:"lookup",value:function(){var e=Ze(Xe().mark((function e(t){var n,r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Zu(Ju.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ze(Xe().mark((function e(t,n){var r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),i=Gh(r.serializer)+"/documents",a={documents:n.map((function(e){return zh(r.serializer,e)}))},e.next=5,r.So("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Yh(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());$u(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new oh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ze(Xe().mark((function e(){var t,n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=_s.fromPath(t);n.mutations.push(new uh(r,n.precondition(r)))})),e.next=7,function(){var e=Ze(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xu(t),i=Gh(r.serializer)+"/documents",a={writes:n.map((function(e){return $h(r.serializer,e)}))},e.next=3,r.fo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Yu();t=ps.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Zu(Ju.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ps.min())?Gf.exists(!1):Gf.updateTime(t):Gf.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ps.min()))throw new Zu(Ju.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gf.updateTime(t)}return Gf.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),fg=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Ka=r.maxAttempts,this.Uo=new Bp(this.asyncQueue,"transaction_retry")}return m(e,[{key:"run",value:function(){this.Ka-=1,this.$a()}},{key:"$a",value:function(){var e=this;this.Uo.No(Ze(Xe().mark((function t(){var n,r;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new cg(e.datastore),(r=e.Ua(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Wa(t)}))}))})).catch((function(t){e.Wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ua",value:function(e){try{var t=this.updateFunction(e);return!Hs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Wa",value:function(e){var t=this;this.Ka>0&&this.Ga(e)?(this.Ka-=1,this.asyncQueue.enqueueAndForget((function(){return t.$a(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ga",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!hh(t)}return!1}}]),e}(),hg=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zu.UNAUTHENTICATED,this.clientId=cs.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Gu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Zu(Ju.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ze(Xe().mark((function n(){var r;return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Fy(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function dg(e,t){return vg.apply(this,arguments)}function vg(){return vg=Ze(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Gu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,rp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),vg.apply(this,arguments)}function pg(e,t){return yg.apply(this,arguments)}function yg(){return yg=Ze(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,gg(t);case 3:return r=e.sent,Gu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Dy(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Dy(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),yg.apply(this,arguments)}function mg(e){return"FirebaseError"===e.name?e.code===Ju.FAILED_PRECONDITION||e.code===Ju.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function gg(e){return kg.apply(this,arguments)}function kg(){return(kg=Ze(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Gu("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,dg(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),mg(n=e.t0)){e.next=13;break}throw n;case 13:return Hu("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,dg(t,new rg);case 16:e.next=21;break;case 18:return Gu("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,dg(t,new rg);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function _g(e){return wg.apply(this,arguments)}function wg(){return(wg=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Gu("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,pg(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Gu("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,pg(t,new og);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bg(e){return gg(e).then((function(e){return e.persistence}))}function xg(e){return gg(e).then((function(e){return e.localStore}))}function Sg(e){return _g(e).then((function(e){return e.remoteStore}))}function Eg(e){return _g(e).then((function(e){return e.syncEngine}))}function Ig(e){return _g(e).then((function(e){return e.datastore}))}function Cg(e){return Tg.apply(this,arguments)}function Tg(){return(Tg=Ze(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_g(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=um.bind(null,n.syncEngine),r.onUnlisten=fm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ng(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new es;return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function i(){return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new sg({next:function(a){t.enqueueAndForget((function(){return Gy(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Zu(Ju.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Zu(Ju.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new $y($c(n.path),a,{includeMetadataChanges:!0,z_:!0});return qy(e,o)},i.next=3,Cg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Dg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new es;return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function i(){return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new sg({next:function(n){t.enqueueAndForget((function(){return Gy(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Zu(Ju.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new $y(n,a,{includeMetadataChanges:!0,z_:!0});return qy(e,o)},i.next=3,Cg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Ag(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Rg=new Map;function Pg(e,t,n){if(!n)throw new Zu(Ju.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Og(e,t,n,r){if(!0===t&&!0===r)throw new Zu(Ju.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Lg(e){if(!_s.isDocumentKey(e))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Mg(e){if(_s.isDocumentKey(e))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Yu()}function Vg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Zu(Ju.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fg(e);throw new Zu(Ju.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Ug(e,t){if(t<=0)throw new Zu(Ju.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var jg=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Zu(Ju.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Zu(Ju.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Og("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ag(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Zu(Ju.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Zu(Ju.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Zu(Ju.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),zg=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jg({}),this._settingsFrozen=!1}return m(e,[{key:"app",get:function(){if(!this._app)throw new Zu(Ju.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Zu(Ju.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ns;switch(e.type){case"firstParty":return new os(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Zu(Ju.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Rg.get(e);t&&(Gu("ComponentProvider","Removing Datastore"),Rg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Bg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Vg(e,zg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=zu.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ct(JSON.stringify({alg:"none",type:"JWT"})),ct(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new Zu(Ju.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new zu(l)}e._authCredentials=new rs(new ts(u,s))}}var qg=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Kg=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Gg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Gg=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,$c(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Kg(this.firestore,null,new _s(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(qg);function Wg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),Pg("collection","path",t),e instanceof zg){var a=ms.fromString.apply(ms,[t].concat(r));return Mg(a),new Gg(e,null,a)}if(!(e instanceof Kg||e instanceof Gg))throw new Zu(Ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ms.fromString.apply(ms,[t].concat(r)));return Mg(o),new Gg(e.firestore,null,o)}function Hg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),1===arguments.length&&(t=cs.V()),Pg("doc","path",t),e instanceof zg){var a=ms.fromString.apply(ms,[t].concat(r));return Lg(a),new Kg(e,null,new _s(a))}if(!(e instanceof Kg||e instanceof Gg))throw new Zu(Ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ms.fromString.apply(ms,[t].concat(r)));return Lg(o),new Kg(e.firestore,e instanceof Gg?e.converter:null,new _s(o))}function Qg(e,t){return e=jt(e),t=jt(t),(e instanceof Kg||e instanceof Gg)&&(t instanceof Kg||t instanceof Gg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Yg(e,t){return e=jt(e),t=jt(t),e instanceof qg&&t instanceof qg&&e.firestore===t.firestore&&uf(e._query,t._query)&&e.converter===t.converter}var $g=function(){function e(){var t=this;d(this,e),this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new Bp(this,"async_queue_retry"),this.tu=function(){var e=jp();e&&Gu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Uo.Lo()};var n=jp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.tu)}return m(e,[{key:"isShuttingDown",get:function(){return this.Ha}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.nu(),this.ru(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;var t=jp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.tu)}}},{key:"enqueue",value:function(e){var t=this;if(this.nu(),this.Ha)return new Promise((function(){}));var n=new es;return this.ru((function(){return t.Ha&&t.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ja.push(e),t.iu()}))}},{key:"iu",value:function(){var e=Ze(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ja.length){e.next=14;break}return e.prev=1,e.next=4,this.ja[0]();case 4:this.ja.shift(),this.Uo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Us(e.t0)){e.next=12;break}throw e.t0;case 12:Gu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ja.length>0&&this.Uo.No((function(){return t.iu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ru",value:function(e){var t=this,n=this.za.then((function(){return t.Za=!0,e().catch((function(e){t.Ya=e,t.Za=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Za=!1,e}))}));return this.za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.nu(),this.eu.indexOf(e)>-1&&(t=0);var i=My.createAndSchedule(this,e,t,n,(function(e){return r.su(e)}));return this.Ja.push(i),i}},{key:"nu",value:function(){this.Ya&&Yu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ou",value:function(){var e=Ze(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.za,e.next=3,t;case 3:if(t!==this.za){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_u",value:function(e){var t,n=I(this.Ja);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"au",value:function(e){var t=this;return this.ou().then((function(){t.Ja.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=I(t.Ja);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ou()}))}},{key:"uu",value:function(e){this.eu.push(e)}},{key:"su",value:function(e){var t=this.Ja.indexOf(e);this.Ja.splice(t,1)}}]),e}();function Xg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=I(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Jg=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return m(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Zg=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new $g,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||tk(this),this._firestoreClient.terminate()}}]),n}(zg);function ek(e){return e._firestoreClient||tk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function tk(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Kl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ag(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new hg(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function nk(e,t,n){var r=new es;return e.asyncQueue.enqueue(Ze(Xe().mark((function i(){var a;return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,dg(e,n);case 3:return i.next=5,pg(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),mg(a=i.t0)){i.next=13;break}throw a;case 13:Hu("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function rk(e){return function(e){var t=new es;return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Sm,n.next=3,Eg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ek(e=Vg(e,Zg)))}function ik(e){return function(e){return e.asyncQueue.enqueue(Ze(Xe().mark((function t(){var n,r;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bg(e);case 2:return n=t.sent,t.next=5,Sg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Xu(e);return t.S_.delete(0),Yp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ek(e=Vg(e,Zg)))}function ak(e){return function(e){return e.asyncQueue.enqueue(Ze(Xe().mark((function t(){var n,r;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bg(e);case 2:return n=t.sent,t.next=5,Sg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ze(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Xu(t)).S_.add(0),e.next=4,Xp(n);case 4:n.v_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ek(e=Vg(e,Zg)))}function ok(e,t){var n=ek(e=Vg(e,Zg)),r=new Jg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new lg(e,t)}(function(e,t){if(e instanceof Uint8Array)return ug(e,t);if(e instanceof ArrayBuffer)return ug(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?ph().encode(e):e),t)}(n,zp(t));e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ng,t.next=3,Eg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function uk(e,t){return function(e,t){return e.asyncQueue.enqueue(Ze(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Xu(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$r.getNamedQuery(e,t)}))},n.next=3,xg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ek(e=Vg(e,Zg)),t).then((function(t){return t?new qg(e,null,t.query):null}))}function sk(e){if(e._initialized||e._terminated)throw new Zu(Ju.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var lk=function(){function e(t){d(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ml.fromBase64String(t))}catch(t){throw new Zu(Ju.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ml.fromUint8Array(t))}}]),e}(),ck=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ks(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var fk=m((function e(t){d(this,e),this._methodName=t})),hk=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Zu(Ju.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Zu(Ju.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return fs(this._lat,e._lat)||fs(this._long,e._long)}}]),e}(),dk=/^__.*__$/,vk=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new eh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zf(e,this.data,t,this.fieldTransforms)}}]),e}(),pk=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new eh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function yk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yu()}}var mk=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.cu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"lu",get:function(){return this.settings.lu}},{key:"hu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Pu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.hu({path:n,Iu:!1});return r.Tu(e),r}},{key:"Eu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.hu({path:n,Iu:!1});return r.cu(),r}},{key:"du",value:function(e){return this.hu({path:void 0,Iu:!0})}},{key:"Au",value:function(e){return Fk(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"cu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}},{key:"Tu",value:function(e){if(0===e.length)throw this.Au("Document fields must not be empty");if(yk(this.lu)&&dk.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}]),e}(),gk=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||zp(t)}return m(e,[{key:"mu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mk({lu:e,methodName:t,Vu:n,path:ks.emptyPath(),Iu:!1,Ru:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function kk(e){var t=e._freezeSettings(),n=zp(e._databaseId);return new gk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _k(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.mu(a.merge||a.mergeFields?2:0,t,n,i);Pk("Data must be an object, but it was:",o,r);var u,s,l=Ak(r,o);if(a.merge)u=new Ol(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var c,f=[],h=I(a.mergeFields);try{for(h.s();!(c=h.n()).done;){var d=Ok(t,c.value,n);if(!o.contains(d))throw new Zu(Ju.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Vk(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new Ol(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new vk(new dc(l),u,s)}var wk=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.lu)throw 1===e.lu?e.Au("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Au("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(fk);function bk(e,t,n){return new mk({lu:3,Vu:t.settings.Vu,methodName:e._methodName,Iu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var xk=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new qf(e.path,new Lf)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(fk),Sk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).fu=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=bk(this,e,!0),n=this.fu.map((function(e){return Dk(e,t)})),r=new Mf(n);return new qf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(fk),Ek=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).fu=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=bk(this,e,!0),n=this.fu.map((function(e){return Dk(e,t)})),r=new Vf(n);return new qf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(fk),Ik=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).gu=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=new jf(e.serializer,Df(e.serializer,this.gu));return new qf(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(fk);function Ck(e,t,n,r){var i=e.mu(1,t,n);Pk("Data must be an object, but it was:",i,r);var a=[],o=dc.empty();Il(r,(function(e,r){var u=Mk(t,e,n);r=jt(r);var s=i.Eu(u);if(r instanceof wk)a.push(u);else{var l=Dk(r,s);null!=l&&(a.push(u),o.set(u,l))}}));var u=new Ol(a);return new pk(o,u,i.fieldTransforms)}function Tk(e,t,n,r,i,a){var o=e.mu(1,t,n),u=[Ok(t,r,n)],s=[i];if(a.length%2!=0)throw new Zu(Ju.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)u.push(Ok(t,a[l])),s.push(a[l+1]);for(var c=[],f=dc.empty(),h=u.length-1;h>=0;--h)if(!Vk(c,u[h])){var d=u[h],v=s[h];v=jt(v);var p=o.Eu(d);if(v instanceof wk)c.push(d);else{var y=Dk(v,p);null!=y&&(c.push(d),f.set(d,y))}}var m=new Ol(c);return new pk(f,m,o.fieldTransforms)}function Nk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Dk(n,e.mu(r?4:3,t))}function Dk(e,t){if(Rk(e=jt(e)))return Pk("Unsupported field value:",t,e),Ak(e,t);if(e instanceof fk)return function(e,t){if(!yk(t.lu))throw t.Au("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Au("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Iu&&4!==t.lu)throw t.Au("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=I(e);try{for(a.s();!(n=a.n()).done;){var o=Dk(n.value,t.du(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=jt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Df(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=vs.fromDate(e);return{timestampValue:Lh(t.serializer,n)}}if(e instanceof vs){var r=new vs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lh(t.serializer,r)}}if(e instanceof hk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lk)return{bytesValue:Mh(t.serializer,e._byteString)};if(e instanceof Kg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Au("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Uh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Au("Unsupported field value: ".concat(Fg(e)))}(e,t)}function Ak(e,t){var n={};return Cl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Il(e,(function(e,r){var i=Dk(r,t.Pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Rk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof vs||e instanceof hk||e instanceof lk||e instanceof Kg||e instanceof fk)}function Pk(e,t,n){if(!Rk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Fg(n);throw"an object"===r?t.Au(e+" a custom object"):t.Au(e+" "+r)}}function Ok(e,t,n){if((t=jt(t))instanceof ck)return t._internalPath;if("string"==typeof t)return Mk(e,t);throw Fk("Field path arguments must be of type string or ",e,!1,void 0,n)}var Lk=new RegExp("[~\\*/\\[\\]]");function Mk(e,t,n){if(t.search(Lk)>=0)throw Fk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(ck,h(t.split(".")))._internalPath}catch(Ar){throw Fk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Fk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Zu(Ju.INVALID_ARGUMENT,u+e+s)}function Vk(e,t){return e.some((function(e){return e.isEqual(t)}))}var Uk=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Kg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new jk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(zk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),jk=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return mr(_(n.prototype),"data",this).call(this)}}]),n}(Uk);function zk(e,t){return"string"==typeof t?Mk(e,t):t instanceof ck?t._internalPath:t._delegate._internalPath}function Bk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Zu(Ju.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qk=m((function e(){d(this,e)})),Kk=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(qk);function Gk(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof qk&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Hk})).length,n=e.filter((function(e){return e instanceof Wk})).length;if(t>1||t>0&&n>0)throw new Zu(Ju.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=I(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Wk=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=this._parse(e);return a_(e._query,t),new qg(e.firestore,e.converter,af(e._query,t))}},{key:"_parse",value:function(e){var t=kk(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){i_(o,a);var s,l=[],c=I(o);try{for(c.s();!(s=c.n()).done;){var f=s.value;l.push(r_(r,e,f))}}catch(h){c.e(h)}finally{c.f()}u={arrayValue:{values:l}}}else u=r_(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||i_(o,a),u=Nk(n,t,o,"in"===a||"not-in"===a);return bc.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Kk);var Hk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return m(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:xc.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=I(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;a_(r,a),r=af(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new qg(e.firestore,e.converter,af(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(qk);var Qk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new kc(t,n);return function(e,t){if(null===Jc(e)){var n=Zc(e);null!==n&&o_(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new qg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Qc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Kk);var Yk=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return m(n,[{key:"_apply",value:function(e){return new qg(e.firestore,e.converter,of(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Kk);var $k=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=n_(e,this.type,this._docOrFields,this._inclusive);return new qg(e.firestore,e.converter,function(e,t){return new Qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Kk);function Xk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $k._create("startAt",t,!0)}function Jk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $k._create("startAfter",t,!1)}var Zk=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=n_(e,this.type,this._docOrFields,this._inclusive);return new qg(e.firestore,e.converter,function(e,t){return new Qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Kk);function e_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zk._create("endBefore",t,!1)}function t_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zk._create("endAt",t,!0)}function n_(e,t,n,r){if(n[0]=jt(n[0]),n[0]instanceof Uk)return function(e,t,n,r,i){if(!r)throw new Zu(Ju.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=I(tf(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(tc(t,r.key));else{var l=r.data.field(s.field);if(zl(l))throw new Zu(Ju.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=s.field.canonicalString();throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(c,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(f){u.e(f)}finally{u.f()}return new yc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=kk(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Zu(Ju.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof l));if(!ef(e)&&-1!==l.indexOf("/"))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(l,"' contains a slash."));var c=e.path.child(ms.fromString(l));if(!_s.isDocumentKey(c))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(c,"' is not because it contains an odd number of segments."));var f=new _s(c);u.push(tc(t,f))}else{var h=Nk(n,r,l);u.push(h)}}return new yc(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function r_(e,t,n){if("string"==typeof(n=jt(n))){if(""===n)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ef(t)&&-1!==n.indexOf("/"))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ms.fromString(n));if(!_s.isDocumentKey(r))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tc(e,new _s(r))}if(n instanceof Kg)return tc(e,n._key);throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Fg(n),"."))}function i_(e,t){if(!Array.isArray(e)||0===e.length)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function a_(e,t){if(t.isInequality()){var n=Zc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Jc(e);null!==i&&o_(e,r,i)}var a=function(e,t){var n,r=I(e);try{for(r.s();!(n=r.n()).done;){var i,a=I(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function o_(e,t,n){if(!n.isEqual(t))throw new Zu(Ju.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var u_=function(){function e(){d(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ul(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yu()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Il(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new hk(Ul(e.latitude),Ul(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Bl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ql(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Vl(e);return new vs(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ms.fromString(e);$u(ld(n));var r=new Gl(n.get(1),n.get(3)),i=new _s(n.popFirst(5));return r.isEqual(t)||Wu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function s_(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var l_=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new lk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kg(this.firestore,null,t)}}]),n}(u_);var c_=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),f_=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return m(n,[{key:"exists",value:function(){return mr(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new h_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(zk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Uk),h_=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mr(_(n.prototype),"data",this).call(this,e)}}]),n}(f_),d_=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new c_(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new h_(n._firestore,n._userDataWriter,r.key,r,new c_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Zu(Ju.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new h_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new c_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new h_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new c_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:v_(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function v_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yu()}}function p_(e,t){return e instanceof f_&&t instanceof f_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof d_&&t instanceof d_&&e._firestore===t._firestore&&Yg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var y_=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new lk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kg(this.firestore,null,t)}}]),n}(u_);function m_(e){e=Vg(e,Kg);var t=Vg(e.firestore,Zg),n=ek(t),r=new y_(t);return function(e,t){var n=new es;return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function r(){return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ze(Xe().mark((function e(t,n,r){var i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Xu(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Zu(Ju.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Fy(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new f_(t,r,e._key,n,new c_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function g_(e){e=Vg(e,qg);var t=Vg(e.firestore,Zg),n=ek(t),r=new y_(t);return Bk(e._query),Dg(n,e._query).then((function(n){return new d_(t,r,e,n)}))}function k_(e){e=Vg(e,qg);var t=Vg(e.firestore,Zg),n=ek(t),r=new y_(t);return function(e,t){var n=new es;return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function r(){return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ze(Xe().mark((function e(t,n,r){var i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dp(t,n,!0);case 3:i=e.sent,a=new rm(n,i._s),o=a._a(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Fy(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new d_(t,r,e,n)}))}function __(e){e=Vg(e,qg);var t=Vg(e.firestore,Zg),n=ek(t),r=new y_(t);return Dg(n,e._query,{source:"server"}).then((function(n){return new d_(t,r,e,n)}))}function w_(e,t,n){e=Vg(e,Kg);var r=Vg(e.firestore,Zg),i=s_(e.converter,t,n);return E_(r,[_k(kk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gf.none())])}function b_(e,t,n){e=Vg(e,Kg);for(var r=Vg(e.firestore,Zg),i=kk(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return E_(r,[("string"==typeof(t=jt(t))||t instanceof ck?Tk(i,"updateDoc",e._key,t,n,o):Ck(i,"updateDoc",e._key,t)).toMutation(e._key,Gf.exists(!0))])}function x_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=jt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Xg(n[s])||(u=n[s],s++);var l,c,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Xg(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Kg)c=Vg(e.firestore,Zg),f=$c(e._key.path),l={next:function(t){n[s]&&n[s](I_(c,e,t))},error:n[s+1],complete:n[s+2]};else{var v=Vg(e,qg);c=Vg(v.firestore,Zg),f=v._query;var p=new y_(c);l={next:function(e){n[s]&&n[s](new d_(c,p,v,e))},error:n[s+1],complete:n[s+2]},Bk(e._query)}return function(e,t,n,r){var i=new sg(r),a=new $y(t,i,n);return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=qy,t.next=3,Cg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ma(),e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Gy,t.next=3,Cg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ek(c),f,h,l)}function S_(e,t){return function(e,t){var n=new sg(t);return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Xu(e).B_.add(t),t.next()},t.next=3,Cg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ma(),e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Xu(e).B_.delete(t)},t.next=3,Cg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ek(e=Vg(e,Zg)),Xg(t)?t:{next:t})}function E_(e,t){return function(e,t){var n=new es;return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function r(){return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=dm,r.next=3,Eg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ek(e),t)}function I_(e,t,n){var r=n.docs.get(t._key),i=new y_(e);return new f_(e,i,t._key,r,new c_(n.hasPendingWrites,n.fromCache),t.converter)}var C_={maxAttempts:5},T_=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kk(t)}return m(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=N_(e,this._firestore),i=s_(r.converter,t,n),a=_k(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gf.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=N_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=jt(t))||t instanceof ck?Tk(this._dataReader,"WriteBatch.update",i._key,t,n,o):Ck(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gf.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=N_(e,this._firestore);return this._mutations=this._mutations.concat(new oh(t._key,Gf.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Zu(Ju.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function N_(e,t){if((e=jt(e)).firestore!==t)throw new Zu(Ju.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var D_=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return m(n,[{key:"get",value:function(e){var t=this,r=N_(e,this._firestore),i=new y_(this._firestore);return mr(_(n.prototype),"get",this).call(this,e).then((function(e){return new f_(t._firestore,i,r._key,e._document,new c_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=kk(t)}return m(e,[{key:"get",value:function(e){var t=this,n=N_(e,this._firestore),r=new l_(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Yu();var i=e[0];if(i.isFoundDocument())return new Uk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Uk(t._firestore,r,n._key,null,n.converter);throw Yu()}))}},{key:"set",value:function(e,t,n){var r=N_(e,this._firestore),i=s_(r.converter,t,n),a=_k(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=N_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=jt(t))||t instanceof ck?Tk(this._dataReader,"Transaction.update",i._key,t,n,o):Ck(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=N_(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function A_(e,t,n){e=Vg(e,Zg);var r=Object.assign(Object.assign({},C_),n);return function(e){if(e.maxAttempts<1)throw new Zu(Ju.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new es;return e.asyncQueue.enqueueAndForget(Ze(Xe().mark((function i(){var a;return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Ig(e);case 2:a=i.sent,new fg(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(ek(e),(function(n){return t(new D_(e,n))}),r)}function R_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sk("arrayUnion",t)}function P_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ek("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Bu=e}(Vn),An(new zt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Zg(new is(e.getProvider("auth-internal")),new ss(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Zu(Ju.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Kn(ju,"4.1.2",e),Kn(ju,"4.1.2","esm2017")}();function O_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Zu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function L_(){if("undefined"===typeof Uint8Array)throw new Zu("unimplemented","Uint8Arrays are not available in this environment.")}function M_(){if("undefined"==typeof atob)throw new Zu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var F_=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"toBase64",value:function(){return M_(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return L_(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return M_(),new e(lk.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return L_(),new e(lk.fromUint8Array(t))}}]),e}();function V_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=I(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var U_=function(){function e(){d(this,e)}return m(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){sk(e=Vg(e,Zg));var n=ek(e);if(n._uninitializedComponentsProvider)throw new Zu(Ju.FAILED_PRECONDITION,"SDK cache is already specified.");Hu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new og;return nk(n,i,new ig(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){sk(e=Vg(e,Zg));var t=ek(e);if(t._uninitializedComponentsProvider)throw new Zu(Ju.FAILED_PRECONDITION,"SDK cache is already specified.");Hu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new og;return nk(t,r,new ag(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Zu(Ju.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new es;return e._queue.enqueueAndForgetEvenWhileRestricted(Ze(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ze(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ms.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ms.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Jv(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),j_=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Gl||(this._appCompat=t)}return m(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Hu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ik(this._delegate)}},{key:"disableNetwork",value:function(){return ak(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Og("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return rk(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return S_(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Zu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new ew(this,Wg(this._delegate,e))}catch(t){throw W_(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new G_(this,Hg(this._delegate,e))}catch(t){throw W_(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new X_(this,function(e,t){if(e=Vg(e,zg),Pg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Zu(Ju.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new qg(e,null,function(e){return new Qc(ms.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw W_(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return A_(this._delegate,(function(n){return e(new B_(t,n))}))}},{key:"batch",value:function(){var e=this;return ek(this._delegate),new q_(new T_(this._delegate,(function(t){return E_(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return ok(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return uk(this._delegate,e).then((function(e){return e?new X_(t,e):null}))}}]),e}(),z_=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new F_(new lk(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return G_.forKey(t,this.firestore,null)}}]),n}(u_);var B_=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new z_(t)}return m(e,[{key:"get",value:function(e){var t=this,n=tw(e);return this._delegate.get(n).then((function(e){return new Y_(t._firestore,new f_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=tw(e);return n?(O_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=tw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tw(e);return this._delegate.delete(t),this}}]),e}(),q_=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"set",value:function(e,t,n){var r=tw(e);return n?(O_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=tw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tw(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),K_=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return m(e,[{key:"fromFirestore",value:function(e,t){var n=new h_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $_(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new z_(t),n),i.set(n,a)),a}}]),e}();K_.INSTANCES=new WeakMap;var G_=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new z_(t)}return m(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new ew(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new ew(this.firestore,Wg(this._delegate,e))}catch(t){throw W_(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=jt(e))instanceof Kg&&Qg(this._delegate,e)}},{key:"set",value:function(e,t){t=O_("DocumentReference.set",t);try{return t?w_(this._delegate,e,t):w_(this._delegate,e)}catch(n){throw W_(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?b_(this._delegate,e):b_.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw W_(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return E_(Vg((e=this._delegate).firestore,Zg),[new oh(e._key,Gf.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=H_(n),a=Q_(n,(function(t){return new Y_(e.firestore,new f_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return x_(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?m_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Vg(e,Kg);var t=Vg(e.firestore,Zg);return Ng(ek(t),e._key,{source:"server"}).then((function(n){return I_(t,e,n)}))}(this._delegate):function(e){e=Vg(e,Kg);var t=Vg(e.firestore,Zg);return Ng(ek(t),e._key).then((function(n){return I_(t,e,n)}))}(this._delegate)).then((function(e){return new Y_(t.firestore,new f_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(K_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Zu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Kg(n._delegate,r,new _s(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Kg(n._delegate,r,t))}}]),e}();function W_(e,t,n){return e.message=e.message.replace(t,n),e}function H_(e){var t,n=I(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!V_(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Q_(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=V_(e[0])?e[0]:V_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Y_=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"ref",get:function(){return new G_(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return p_(this._delegate,e._delegate)}}]),e}(),$_=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Yu(),t}}]),n}(Y_),X_=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new z_(t)}return m(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Gk(this._delegate,function(e,t,n){var r=t,i=zk("where",e);return Wk._create(i,r,n)}(t,n,r)))}catch(i){throw W_(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Gk(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=zk("orderBy",e);return Qk._create(n,t)}(t,n)))}catch(r){throw W_(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Gk(this._delegate,(Ug("limit",n=t),Yk._create("limit",n,"F"))))}catch(n){throw W_(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Gk(this._delegate,(Ug("limitToLast",n=t),Yk._create("limitToLast",n,"L"))))}catch(n){throw W_(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,Gk(this._delegate,Xk.apply(void 0,arguments)))}catch(t){throw W_(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Gk(this._delegate,Jk.apply(void 0,arguments)))}catch(t){throw W_(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Gk(this._delegate,e_.apply(void 0,arguments)))}catch(t){throw W_(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Gk(this._delegate,t_.apply(void 0,arguments)))}catch(t){throw W_(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Yg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?k_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?__(this._delegate):g_(this._delegate)).then((function(e){return new Z_(t.firestore,new d_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=H_(n),a=Q_(n,(function(t){return new Z_(e.firestore,new d_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return x_(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(K_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),J_=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new $_(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Z_=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"query",get:function(){return new X_(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new $_(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new J_(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new $_(n._firestore,r))}))}},{key:"isEqual",value:function(e){return p_(this._delegate,e._delegate)}}]),e}(),ew=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return m(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new G_(this.firestore,e):null}},{key:"doc",value:function(e){try{return new G_(this.firestore,void 0===e?Hg(this._delegate):Hg(this._delegate,e))}catch(t){throw W_(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Vg(e.firestore,Zg),r=Hg(e),i=s_(e.converter,t);return E_(n,[_k(kk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gf.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new G_(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Qg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(K_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(X_);function tw(e){return Vg(e,Kg)}var nw,rw=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(ck,n)}return m(e,[{key:"isEqual",value:function(e){return(e=jt(e))instanceof ck&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(ks.keyField().canonicalString())}}]),e}(),iw=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new xk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new wk("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=R_.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=P_.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new Ik("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),aw={Firestore:j_,GeoPoint:hk,Timestamp:vs,Blob:F_,Transaction:B_,WriteBatch:q_,DocumentReference:G_,DocumentSnapshot:Y_,Query:X_,QueryDocumentSnapshot:$_,QuerySnapshot:Z_,CollectionReference:ew,FieldPath:rw,FieldValue:iw,setLogLevel:function(e){var t;t=e,qu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new zt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},aw)))})(nw=yr,(function(e,t){return new j_(e,t,new U_)})),nw.registerVersion("@firebase/firestore-compat","0.3.16");yr.initializeApp({apiKey:"AIzaSyBs4-1KdtY1xaXLOe6QMagHLNwMSu03wL0",authDomain:"quiz-740fb.firebaseapp.com",projectId:"quiz-740fb",storageBucket:"quiz-740fb.appspot.com",messagingSenderId:"510220594975",appId:"1:510220594975:web:6b9d0299a46d12fdbc4a2a",measurementId:"G-LPCS4J0PYY"});var ow=yr.firestore();var uw=function(e){var t=e.setScore,n=["BELT","EAT","ATE","LET","TABLE"],i=sessionStorage.getItem("studentId"),a=c((0,r.useState)(""),2),o=a[0],u=a[1],s=c((0,r.useState)([]),2),l=(s[0],s[1],function(){var e=Ze(Xe().mark((function e(r){var a,s,l,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.includes(o)){e.next=27;break}return e.prev=1,a=ow.collection("quizResults").doc(i),e.next=5,a.get();case 5:if(!(s=e.sent).exists){e.next=19;break}if(l=s.data(),(c=l.wordarray||[]).includes(o)){e.next=16;break}return c.push(o),e.next=13,a.update({wordarray:c,score:l.score+1});case 13:t((function(e){return parseInt(e)+1})),e.next=17;break;case 16:alert("Word Counts Already");case 17:e.next=20;break;case 19:alert("Student not found");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),console.error("Error updating data:",e.t0);case 25:e.next=28;break;case 27:alert("You entered the wrong word");case 28:u("");case 29:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}());return(0,Ye.jsxs)("div",{children:[(0,Ye.jsx)("div",{children:["B","L","E","T","A"].map((function(e,t){return(0,Ye.jsx)("button",{className:"letterbutton",onClick:function(){return function(e){u(o+e)}(e)},children:e},t)}))}),(0,Ye.jsxs)("div",{className:"input-field-box",children:[(0,Ye.jsx)("input",{type:"text",value:o,className:"input-letter"}),(0,Ye.jsx)("br",{}),(0,Ye.jsxs)("div",{children:[(0,Ye.jsx)("button",{onClick:l,children:"SUBMIT"}),"\xa0",(0,Ye.jsx)("button",{onClick:function(){u("")},children:"RESET"})]})]})]})};var sw=function(){var e=sessionStorage.getItem("studentId"),t=c((0,r.useState)(0),2),n=t[0],i=t[1],a=c((0,r.useState)([]),2),o=a[0],u=a[1];return(0,r.useEffect)((function(){ow.collection("quizResults").doc(e).onSnapshot((function(e){if(e.exists){var t=e.data();i(t.score||0),u(t.wordarray||[]),console.log("if statement runs"),console.log(n),console.log(o)}}))}),[e]),(0,Ye.jsxs)("div",{className:"main-page",children:[(0,Ye.jsxs)("div",{className:"round",children:[(0,Ye.jsx)("header",{children:(0,Ye.jsxs)("ul",{children:[(0,Ye.jsx)("li",{children:"Round 1"}),(0,Ye.jsx)("li",{children:(0,Ye.jsx)("h3",{children:(0,Ye.jsx)($e,{})})}),(0,Ye.jsxs)("li",{children:["Score ",n]})]})}),(0,Ye.jsxs)("main",{children:[(0,Ye.jsx)("h1",{children:"MAKE WORDS"}),(0,Ye.jsx)("div",{className:"showletter ",children:(0,Ye.jsx)(uw,{setScore:i})})]})]}),(0,Ye.jsx)("div",{className:"correctWords",children:(0,Ye.jsxs)("table",{className:"table",children:[(0,Ye.jsx)("thead",{children:(0,Ye.jsx)("tr",{children:(0,Ye.jsx)("th",{scope:"col",children:"Data"})})}),(0,Ye.jsx)("tbody",{children:o.map((function(e,t){return(0,Ye.jsx)("tr",{children:(0,Ye.jsx)("td",{children:e})},t)}))})]})})]})};var lw=function(){return(0,Ye.jsx)("h1",{children:"StudentDashboard"})};var cw=function(){_e();var e=c((0,r.useState)("******"),2),t=e[0],n=e[1],i=c((0,r.useState)(!1),2),a=i[0],o=i[1],u=function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ow.collection("singlecode").doc("singlevalue").set({data:t});case 2:o(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Ye.jsxs)("div",{children:[(0,Ye.jsx)("nav",{children:(0,Ye.jsx)("ul",{children:(0,Ye.jsx)("li",{children:(0,Ye.jsx)(We,{to:"/test",children:(0,Ye.jsx)("img",{className:"img",src:"https://cdn-icons-png.flaticon.com/256/11826/11826847.png",alt:""})})})})}),(0,Ye.jsxs)("div",{className:"main-item",children:[t,(0,Ye.jsx)("button",{onClick:function(){var e=Math.floor(9e5*Math.random());n(e)},children:"GENERATE CODE"}),(0,Ye.jsx)("br",{}),(0,Ye.jsx)(We,{to:"/teacherdashboard",children:(0,Ye.jsx)("button",{onClick:u,children:a?"Data Updated":"Submit Code"})})]})]})},fw="@firebase/database",hw="1.0.1",dw="";function vw(e){dw=e}var pw=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return m(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),It(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Et(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),yw=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return m(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Tt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),mw=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new pw(t)}}catch(n){}return new yw},gw=mw("localStorage"),kw=mw("sessionStorage"),_w=new Jt("@firebase/database"),ww=function(){var e=1;return function(){return e++}}(),bw=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,it(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ot;n.update(t);var r=n.digest();return ut.encodeByteArray(r)},xw=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?It(r):r,t+=" "}return t},Sw=null,Ew=!0,Iw=function(e,t){it(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(_w.logLevel=Gt.VERBOSE,Sw=_w.log.bind(_w),t&&kw.set("logging_enabled",!0)):"function"===typeof e?Sw=e:(Sw=null,kw.remove("logging_enabled"))},Cw=function(){if(!0===Ew&&(Ew=!1,null===Sw&&!0===kw.get("logging_enabled")&&Iw(!0)),Sw){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=xw.apply(null,t);Sw(r)}},Tw=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Cw.apply(void 0,[e].concat(n))}},Nw=function(){var e="FIREBASE INTERNAL ERROR: "+xw.apply(void 0,arguments);_w.error(e)},Dw=function(){var e="FIREBASE FATAL ERROR: ".concat(xw.apply(void 0,arguments));throw _w.error(e),new Error(e)},Aw=function(){var e="FIREBASE WARNING: "+xw.apply(void 0,arguments);_w.warn(e)},Rw=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Pw="[MIN_NAME]",Ow="[MAX_NAME]",Lw=function(e,t){if(e===t)return 0;if(e===Pw||t===Ow)return-1;if(t===Pw||e===Ow)return 1;var n=qw(e),r=qw(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Mw=function(e,t){return e===t?0:e<t?-1:1},Fw=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+It(t))},Vw=function e(t){if("object"!==typeof t||null===t)return It(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=It(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Uw=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function jw(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var zw=function(e){it(!Rw(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var Bw=new RegExp("^-?(0*)\\d{1,10}$"),qw=function(e){if(Bw.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Kw=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Aw("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Gw=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Ww=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Aw('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Hw=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return m(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Cw("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Aw(e)}}]),e}(),Qw=function(){function e(t){d(this,e),this.accessToken=t}return m(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Qw.OWNER="owner";var Yw="5",$w=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xw="ac",Jw="websocket",Zw="long_polling",eb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gw.get("host:"+t)||this._host}return m(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gw.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function tb(e,t,n){var r;if(it("string"===typeof t,"typeof type must == string"),it("object"===typeof n,"typeof params must == object"),t===Jw)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Zw)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return jw(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var nb=function(){function e(){d(this,e),this.counters_={}}return m(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Tt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ht(void 0,this.counters_)}}]),e}(),rb={},ib={};function ab(e){var t=e.toString();return rb[t]||(rb[t]=new nb),rb[t]}var ob=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return m(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Kw((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),1;n.currentResponseNum++};this.pendingResponses[this.currentResponseNum]&&!r(););}}]),e}(),ub="start",sb=function(){function e(t,n,r,i,a,o,u){var s=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tw(t),this.stats_=ab(n),this.urlFn=function(e){return s.appCheckToken&&(e[Xw]=s.appCheckToken),tb(n,Zw,e)}}return m(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ob(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(kt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new lb((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ub)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[ub]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Yw,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Xw]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&$w.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=It(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=lt(t),r=Uw(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!kt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=It(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!kt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),lb=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,kt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ww(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Cw("frame writing exception"),u.stack&&Cw(u.stack),Cw(u)}}}return m(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;kt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Cw("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Cw("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),cb=null;"undefined"!==typeof MozWebSocket?cb=MozWebSocket:"undefined"!==typeof WebSocket&&(cb=WebSocket);var fb=function(){function e(t,n,r,i,a,o,u){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tw(this.connId),this.stats_=ab(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return m(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gw.set("previous_websocket_failure",!0);try{var r;if(kt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Yw,"/").concat(dw,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new cb(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){gw.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Et(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(it(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=It(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Uw(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Yw,!kt()&&"undefined"!==typeof location&&location.hostname&&$w.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Xw]=r),i&&(a.p=i),tb(e,Jw,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==cb&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return gw.isInMemoryStorage||!0===gw.get("previous_websocket_failure")}}]),e}();fb.responsesRequiredToBeHealthy=2,fb.healthyTimeout=3e4;var hb=function(){function e(t){d(this,e),this.initTransports_(t)}return m(e,[{key:"initTransports_",value:function(t){var n=fb&&fb.isAvailable(),r=n&&!fb.previouslyFailed();if(t.webSocketOnly&&(n||Aw("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[fb];else{var i,a=this.transports_=[],o=I(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[sb,fb]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();hb.globalTransportInitialized_=!1;var db=function(){function e(t,n,r,i,a,o,u,s,l,c){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tw("c:"+this.id+":"),this.transportManager_=new hb(n),this.log_("Connection created"),this.start_()}return m(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Gw((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Fw("t",e),n=Fw("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Fw("t",e),n=Fw("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Fw("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Nw("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nw("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Yw!==n&&Aw("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Gw((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gw((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gw.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),vb=function(){function e(){d(this,e)}return m(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),pb=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},it(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return m(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=h(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){it(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),yb=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||gt()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return m(n,[{key:"getInitialEvent",value:function(e){return it("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(pb),mb=32,gb=768,kb=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return m(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function _b(){return new kb("")}function wb(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function bb(e){return e.pieces_.length-e.pieceNum_}function xb(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new kb(e.pieces_,t)}function Sb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Eb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Ib(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new kb(t,0)}function Cb(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof kb)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new kb(n,0)}function Tb(e){return e.pieceNum_>=e.pieces_.length}function Nb(e,t){var n=wb(e),r=wb(t);if(null===n)return t;if(n===r)return Nb(xb(e),xb(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Db(e,t){if(bb(e)!==bb(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ab(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(bb(e)>bb(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Rb=m((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=Eb(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ut(this.parts_[r]);Pb(this)}));function Pb(e){if(e.byteLength_>gb)throw new Error(e.errorPrefix_+"has a key path longer than "+gb+" bytes ("+e.byteLength_+").");if(e.parts_.length>mb)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mb+") or object contains a cycle "+Ob(e))}function Ob(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Lb=function(e){k(n,e);var t=x(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return m(n,[{key:"getInitialEvent",value:function(e){return it("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(pb),Mb=1e3,Fb=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u,s,l){var c;if(d(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=u,c.appCheckTokenProvider_=s,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=Tw("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=Mb,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!kt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Lb.getInstance().on("visible",c.onVisible_,b(c)),-1===e.host.indexOf("fblocal")&&yb.getInstance().on("online",c.onOnline_,b(c)),c}return m(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(It(i)),it(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new yt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),it(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),it(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Ct(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Ct(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),it(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+It(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Nw("Unrecognized action received from server: "+It(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;it(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Mb),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ze(Xe().mark((function e(){var t,r,i,a,o,u,s,l,f,h,d,v,p,y,m=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},f=function(e){it(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,v=c(d,2),p=v[0],y=v[1],u?Cw("getToken() completed but was canceled"):(Cw("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=y&&y.token,s=new db(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Aw(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Aw(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Cw("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Cw("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dt(this.interruptReasons_)&&(this.reconnectDelay_=Mb,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Vw(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new kb(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Cw("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Cw("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=I(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=I(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";kt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+dw.replace(/\./g,"-")]=1,gt()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=yb.getInstance().currentlyOnline();return Dt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Tt(e,"w")){var n=Nt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Aw("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(vb);Fb.nextPersistentConnectionId_=0,Fb.nextConnectionId_=0;var Vb,Ub=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return m(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),jb=function(){function e(){d(this,e)}return m(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Ub(Pw,e),r=new Ub(Pw,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Ub.MIN}}]),e}(),zb=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){return Lw(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw at("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Ub.MIN}},{key:"maxPost",value:function(){return new Ub(Ow,Vb)}},{key:"makePost",value:function(e,t){return it("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ub(e,Vb)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Vb},set:function(e){Vb=e}}]),n}(jb),Bb=new zb,qb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return m(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Kb=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Hb.EMPTY_NODE,this.right=null!=a?a:Hb.EMPTY_NODE}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Hb.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Hb.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Kb.RED=!0,Kb.BLACK=!1;var Gb,Wb=function(){function e(){d(this,e)}return m(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Kb(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Hb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Kb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Kb.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new qb(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new qb(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new qb(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new qb(this.root_,null,this.comparator_,!0,e)}}]),e}();function Qb(e,t){return Lw(e.name,t.name)}function Yb(e,t){return Lw(e,t)}Hb.EMPTY_NODE=new Wb;var $b,Xb,Jb,Zb=function(e){return"number"===typeof e?"number:"+zw(e):"string:"+e},ex=function(e){if(e.isLeafNode()){var t=e.val();it("string"===typeof t||"number"===typeof t||"object"===typeof t&&Tt(t,".sv"),"Priority must be a string or number.")}else it(e===Gb||e.isEmpty(),"priority of unexpected type.");it(e===Gb||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},tx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,it(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ex(this.priorityNode_)}return m(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Tb(t)?this:".priority"===wb(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=wb(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(it(".priority"!==r||1===bb(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(xb(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Zb(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?zw(this.value_):this.value_,this.lazyHash_=bw(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(it(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return it(i>=0,"Unknown leaf type: "+n),it(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return $b},set:function(e){$b=e}}]),e}();tx.VALUE_TYPE_ORDER=["object","boolean","number","string"];var nx,rx,ix=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Lw(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Ub.MIN}},{key:"maxPost",value:function(){return new Ub(Ow,new tx("[PRIORITY-POST]",Jb))}},{key:"makePost",value:function(e,t){var n=Xb(e);return new Ub(t,new tx("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(jb),ax=new ix,ox=Math.log(2),ux=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ox,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return m(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),sx=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Kb(o,a.node,Kb.BLACK,null,null);var s=parseInt(u/2,10)+r,l=t(r,s),c=t(s+1,i);return a=e[s],o=n?n(a):a,new Kb(o,a.node,Kb.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var l=i(a+1,u),c=e[a],f=n?n(c):c;s(new Kb(f,c.node,r,null,l))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),f=Math.pow(2,t.count-(l+1));c?u(f,Kb.BLACK):(u(f,Kb.BLACK),u(f,Kb.RED))}return a}(new ux(e.length));return new Hb(r||t,a)},lx={},cx=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return m(e,[{key:"get",value:function(e){var t=Nt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Hb?t:null}},{key:"hasIndex",value:function(e){return Tt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){it(t!==Bb,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Ub.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?sx(i,t.getCompare()):lx;var s=t.toString(),l=Object.assign({},this.indexSet_);l[s]=t;var c=Object.assign({},this.indexes_);return c[s]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(At(this.indexes_,(function(e,i){var a=Nt(r.indexSet_,i);if(it(a,"Missing index implementation for "+i),e===lx){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Ub.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),sx(o,a.getCompare())}return lx}var l=n.get(t.name),c=e;return l&&(c=c.remove(new Ub(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(At(this.indexes_,(function(e){if(e===lx)return e;var r=n.get(t.name);return r?e.remove(new Ub(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return it(lx&&ax,"ChildrenNode.ts has not been loaded"),nx=nx||new e({".priority":lx},{".priority":ax})}}]),e}(),fx=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ex(this.priorityNode_),this.children_.isEmpty()&&it(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return m(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||rx}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?rx:t}},{key:"getChild",value:function(e){var t=wb(e);return null===t?this:this.getImmediateChild(t).getChild(xb(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(it(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Ub(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?rx:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=wb(e);if(null===n)return t;it(".priority"!==wb(e)||1===bb(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(xb(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ax,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Zb(this.getPriority().val())+":"),this.forEachChild(ax,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":bw(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ub(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Ub(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Ub(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Ub.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Ub.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hx?-1:0}},{key:"withIndex",value:function(t){if(t===Bb||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Bb||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ax),r=t.getIterator(ax),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Bb?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return rx||(rx=new e(new Hb(Yb),null,cx.Default))}}]),e}();fx.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var hx=new(function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,new Hb(Yb),fx.EMPTY_NODE,cx.Default)}return m(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return fx.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(fx));Object.defineProperties(Ub,{MIN:{value:new Ub(Pw,fx.EMPTY_NODE)},MAX:{value:new Ub(Ow,hx)}}),zb.__EMPTY_NODE=fx.EMPTY_NODE,tx.__childrenNodeConstructor=fx,Gb=hx,function(e){Jb=e}(hx);var dx=!0;function vx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return fx.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),it(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new tx(e,vx(t));if(e instanceof Array||!dx){var n=fx.EMPTY_NODE;return jw(e,(function(t,r){if(Tt(e,t)&&"."!==t.substring(0,1)){var i=vx(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(vx(t))}var r=[],i=!1;if(jw(e,(function(e,t){if("."!==e.substring(0,1)){var n=vx(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ub(e,n)))}})),0===r.length)return fx.EMPTY_NODE;var a=sx(r,Qb,(function(e){return e.name}),Yb);if(i){var o=sx(r,ax.getCompare());return new fx(a,vx(t),new cx({".priority":o},{".priority":ax}))}return new fx(a,vx(t),cx.Default)}!function(e){Xb=e}(vx);var px=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,it(!Tb(e)&&".priority"!==wb(e),"Can't create PathIndex with empty path or .priority key"),r}return m(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Lw(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=vx(e),r=fx.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ub(t,r)}},{key:"maxPost",value:function(){var e=fx.EMPTY_NODE.updateChild(this.indexPath_,hx);return new Ub(Ow,e)}},{key:"toString",value:function(){return Eb(this.indexPath_,0).join("/")}}]),n}(jb),yx=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Lw(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Ub.MIN}},{key:"maxPost",value:function(){return Ub.MAX}},{key:"makePost",value:function(e,t){var n=vx(e);return new Ub(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(jb),mx=new yx;function gx(e){return{type:"value",snapshotNode:e}}function kx(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _x(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function wx(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var bx=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ax}return m(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return it(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return it(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pw}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return it(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return it(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ow}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return it(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ax}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function xx(e){var t,n={};if(e.isDefault())return n;if(e.index_===ax?t="$priority":e.index_===mx?t="$value":e.index_===Bb?t="$key":(it(e.index_ instanceof px,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=It(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=It(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+It(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=It(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+It(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Sx(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ax&&(t.i=e.index_.toString()),t}var Ex=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Tw("p:rest:"),o.listens_={},o}return m(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var l=xx(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Nt(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=xx(e._queryParams),r=e._path.toString(),i=new yt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+function(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Et(l.responseText)}catch(n){Aw("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Aw("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(it(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(vb),Ix=function(){function e(){d(this,e),this.rootNode_=fx.EMPTY_NODE}return m(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Cx(){return{value:null,children:new Map}}function Tx(e,t,n){if(Tb(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=wb(t);e.children.has(r)||e.children.set(r,Cx()),Tx(e.children.get(r),t=xb(t),n)}}function Nx(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Nx(r,new kb(t.toString()+"/"+e),n)}))}var Dx,Ax=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return m(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&jw(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Rx=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Ax(t);var r=1e4+2e4*Math.random();Gw(this.reportStats_.bind(this),Math.floor(r))}return m(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;jw(t,(function(t,i){i>0&&Tt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Gw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Px(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Dx||(Dx={}));var Ox,Lx=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Dx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return m(e,[{key:"operationForChild",value:function(t){if(Tb(this.path)){if(null!=this.affectedTree.value)return it(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new kb(t));return new e(_b(),n,this.revert)}return it(wb(this.path)===t,"operationForChild called for unrelated child."),new e(xb(this.path),this.affectedTree,this.revert)}}]),e}(),Mx=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=Dx.OVERWRITE}return m(e,[{key:"operationForChild",value:function(t){return Tb(this.path)?new e(this.source,_b(),this.snap.getImmediateChild(t)):new e(this.source,xb(this.path),this.snap)}}]),e}(),Fx=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=Dx.MERGE}return m(e,[{key:"operationForChild",value:function(t){if(Tb(this.path)){var n=this.children.subtree(new kb(t));return n.isEmpty()?null:n.value?new Mx(this.source,_b(),n.value):new e(this.source,_b(),n)}return it(wb(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,xb(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Vx=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return m(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Tb(e))return this.isFullyInitialized()&&!this.filtered_;var t=wb(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function Ux(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw at("Should only compare child_ events.");var r=new Ub(t.childName,t.snapshotNode),i=new Ub(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function jx(e,t){return{eventCache:e,serverCache:t}}function zx(e,t,n,r){return jx(new Vx(t,n,r),e.serverCache)}function Bx(e,t,n,r){return jx(e.eventCache,new Vx(t,n,r))}function qx(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Kx(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Gx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Ox||(Ox=new Hb(Mw)),Ox);d(this,e),this.value=t,this.children=n}return m(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:_b(),value:this.value};if(Tb(e))return null;var n=wb(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(xb(e),t);return null!=i?{path:Cb(new kb(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Tb(t))return this;var n=wb(t),r=this.children.get(n);return null!==r?r.subtree(xb(t)):new e(null)}},{key:"set",value:function(t,n){if(Tb(t))return new e(n,this.children);var r=wb(t),i=(this.children.get(r)||new e(null)).set(xb(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Tb(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=wb(t),r=this.children.get(n);if(r){var i,a=r.remove(xb(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Tb(e))return this.value;var t=wb(e),n=this.children.get(t);return n?n.get(xb(e)):null}},{key:"setTree",value:function(t,n){if(Tb(t))return n;var r,i=wb(t),a=(this.children.get(i)||new e(null)).setTree(xb(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(_b(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Cb(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,_b(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Tb(e))return null;var i=wb(e),a=this.children.get(i);return a?a.findOnPath_(xb(e),Cb(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,_b(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Tb(t))return this;this.value&&r(n,this.value);var i=wb(t),a=this.children.get(i);return a?a.foreachOnPath_(xb(t),Cb(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(_b(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Cb(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return jw(t,(function(e,t){n=n.set(new kb(e),t)})),n}}]),e}(),Wx=function(){function e(t){d(this,e),this.writeTree_=t}return m(e,null,[{key:"empty",value:function(){return new e(new Gx(null))}}]),e}();function Hx(e,t,n){if(Tb(t))return new Wx(new Gx(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Nb(i,t);return a=a.updateChild(o,n),new Wx(e.writeTree_.set(i,a))}var u=new Gx(n),s=e.writeTree_.setTree(t,u);return new Wx(s)}function Qx(e,t,n){var r=e;return jw(n,(function(e,n){r=Hx(r,Cb(t,e),n)})),r}function Yx(e,t){if(Tb(t))return Wx.empty();var n=e.writeTree_.setTree(t,new Gx(null));return new Wx(n)}function $x(e,t){return null!=Xx(e,t)}function Xx(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Nb(n.path,t)):null}function Jx(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ax,(function(e,n){t.push(new Ub(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Ub(e,n.value))})),t}function Zx(e,t){if(Tb(t))return e;var n=Xx(e,t);return new Wx(null!=n?new Gx(n):e.writeTree_.subtree(t))}function eS(e){return e.writeTree_.isEmpty()}function tS(e,t){return nS(_b(),e.writeTree_,t)}function nS(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(it(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=nS(Cb(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Cb(e,".priority"),r)),n}function rS(e,t){return yS(t,e)}function iS(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));it(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&aS(u,r.path)?i=!1:Ab(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=uS(e.allWrites,oS,_b()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Yx(e.visibleWrites,r.path):jw(r.children,(function(t){e.visibleWrites=Yx(e.visibleWrites,Cb(r.path,t))}));return!0}return!1}function aS(e,t){if(e.snap)return Ab(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ab(Cb(e.path,n),t))return!0;return!1}function oS(e){return e.visible}function uS(e,t,n){for(var r=Wx.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Ab(n,o)?r=Hx(r,u=Nb(n,o),a.snap):Ab(o,n)&&(u=Nb(o,n),r=Hx(r,_b(),a.snap.getChild(u)));else{if(!a.children)throw at("WriteRecord should have .snap or .children");if(Ab(n,o))r=Qx(r,u=Nb(n,o),a.children);else if(Ab(o,n))if(Tb(u=Nb(o,n)))r=Qx(r,_b(),a.children);else{var s=Nt(a.children,wb(u));if(s){var l=s.getChild(xb(u));r=Hx(r,_b(),l)}}}}}return r}function sS(e,t,n,r,i){if(r||i){var a=Zx(e.visibleWrites,t);if(!i&&eS(a))return n;if(i||null!=n||$x(a,_b())){return tS(uS(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ab(e.path,t)||Ab(t,e.path))}),t),n||fx.EMPTY_NODE)}return null}var o=Xx(e.visibleWrites,t);if(null!=o)return o;var u=Zx(e.visibleWrites,t);return eS(u)?n:null!=n||$x(u,_b())?tS(u,n||fx.EMPTY_NODE):null}function lS(e,t,n,r){return sS(e.writeTree,e.treePath,t,n,r)}function cS(e,t){return function(e,t,n){var r=fx.EMPTY_NODE,i=Xx(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ax,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Zx(e.visibleWrites,t);return n.forEachChild(ax,(function(e,t){var n=tS(Zx(a,new kb(e)),t);r=r.updateImmediateChild(e,n)})),Jx(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Jx(Zx(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function fS(e,t,n,r){return function(e,t,n,r,i){it(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Cb(t,n);if($x(e.visibleWrites,a))return null;var o=Zx(e.visibleWrites,a);return eS(o)?i.getChild(n):tS(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function hS(e,t){return function(e,t){return Xx(e.visibleWrites,t)}(e.writeTree,Cb(e.treePath,t))}function dS(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=Zx(e.visibleWrites,t),l=Xx(s,_b());if(null!=l)u=l;else{if(null==n)return[];u=tS(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var c=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&c.length<i;)0!==f(d,r)&&c.push(d),d=h.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function vS(e,t,n){return function(e,t,n,r){var i=Cb(t,n),a=Xx(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?tS(Zx(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function pS(e,t){return yS(Cb(e.treePath,t),e.writeTree)}function yS(e,t){return{treePath:e,writeTree:t}}var mS=function(){function e(){d(this,e),this.changeMap=new Map}return m(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;it("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),it(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,wx(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,_x(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,kx(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw at("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,wx(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),gS=new(function(){function e(){d(this,e)}return m(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),kS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return m(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Vx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vS(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kx(this.viewCache_),i=dS(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function _S(e,t,n,r,i){var a,o,u=new mS;if(n.type===Dx.OVERWRITE){var s=n;s.source.fromUser?a=xS(e,t,s.path,s.snap,r,i,u):(it(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Tb(s.path),a=bS(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Dx.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var l=Cb(n,r);SS(t,wb(l))&&(u=xS(e,u,l,s,i,a,o))})),r.foreach((function(r,s){var l=Cb(n,r);SS(t,wb(l))||(u=xS(e,u,l,s,i,a,o))})),u}(e,t,l.path,l.children,r,i,u):(it(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=IS(e,t,l.path,l.children,r,i,o,u))}else if(n.type===Dx.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=hS(r,n))return t;var u,s=new kS(r,t,i),l=t.eventCache.getNode();if(Tb(n)||".priority"===wb(n)){var c;if(t.serverCache.isFullyInitialized())c=lS(r,Kx(t));else{var f=t.serverCache.getNode();it(f instanceof fx,"serverChildren would be complete if leaf node"),c=cS(r,f)}u=e.filter.updateFullNode(l,c,a)}else{var h=wb(n),d=vS(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(l,h,d,xb(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(l,h,fx.EMPTY_NODE,xb(n),s,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=lS(r,Kx(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=hS(r,_b()),zx(t,u,o,e.filter.filtersNodes())}(e,t,c.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=hS(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Tb(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return bS(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Tb(n)){var l=new Gx(null);return s.getNode().forEachChild(Bb,(function(e,t){l=l.set(new kb(e),t)})),IS(e,t,n,l,i,a,u,o)}return t}var c=new Gx(null);return r.foreach((function(e,t){var r=Cb(n,e);s.isCompleteForPath(r)&&(c=c.set(e,s.getNode().getChild(r)))})),IS(e,t,n,c,i,a,u,o)}(e,t,c.path,c.affectedTree,r,i,u)}else{if(n.type!==Dx.LISTEN_COMPLETE)throw at("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Bx(t,a.getNode(),a.isFullyInitialized()||Tb(n),a.isFiltered());return wS(e,o,n,r,gS,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=qx(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(gx(qx(t)))}}(t,a,f),{viewCache:a,changes:f}}function wS(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=hS(r,n))return t;if(Tb(n))if(it(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Kx(t),c=cS(r,l instanceof fx?l:fx.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var f=lS(r,Kx(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=wb(n);if(".priority"===h){it(1===bb(n),"Can't have a priority with additional path components");var d=s.getNode(),v=fS(r,n,d,u=t.serverCache.getNode());o=null!=v?e.filter.updatePriority(d,v):s.getNode()}else{var p,y=xb(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=fS(r,n,s.getNode(),u);p=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else p=vS(r,h,t.serverCache);o=null!=p?e.filter.updateChild(s.getNode(),h,p,y,i,a):s.getNode()}}return zx(t,o,s.isFullyInitialized()||Tb(n),e.filter.filtersNodes())}function bS(e,t,n,r,i,a,o,u){var s,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(Tb(n))s=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var f=l.getNode().updateChild(n,r);s=c.updateFullNode(l.getNode(),f,null)}else{var h=wb(n);if(!l.isCompleteForPath(n)&&bb(n)>1)return t;var d=xb(n),v=l.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?c.updatePriority(l.getNode(),v):c.updateChild(l.getNode(),h,v,d,gS,null)}var p=Bx(t,s,l.isFullyInitialized()||Tb(n),c.filtersNodes());return wS(e,p,n,i,new kS(i,p,a),u)}function xS(e,t,n,r,i,a,o){var u,s,l=t.eventCache,c=new kS(i,t,a);if(Tb(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=zx(t,s,!0,e.filter.filtersNodes());else{var f=wb(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=zx(t,s,l.isFullyInitialized(),l.isFiltered());else{var h,d=xb(n),v=l.getNode().getImmediateChild(f);if(Tb(d))h=r;else{var p=c.getCompleteChild(f);h=null!=p?".priority"===Sb(d)&&p.getChild(Ib(d)).isEmpty()?p:p.updateChild(d,r):fx.EMPTY_NODE}if(v.equals(h))u=t;else u=zx(t,e.filter.updateChild(l.getNode(),f,h,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return u}function SS(e,t){return e.eventCache.isCompleteForChild(t)}function ES(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function IS(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,l=t;s=Tb(n)?r:new Gx(null).setTree(n,r);var c=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var s=ES(0,t.serverCache.getNode().getImmediateChild(n),r);l=bS(e,l,new kb(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!s){var f=ES(0,t.serverCache.getNode().getImmediateChild(n),r);l=bS(e,l,new kb(n),f,i,a,o,u)}})),l}var CS;function TS(e,t){var n=Kx(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Tb(t)&&!n.getImmediateChild(wb(t)).isEmpty())?n.getChild(t):null}function NS(e,t,n,r){t.type===Dx.MERGE&&null!==t.source.queryId&&(it(Kx(e.viewCache_),"We should always have a full cache before handling merges"),it(qx(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=_S(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,it(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),it(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),it(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,DS(e,u.changes,u.viewCache.eventCache.getNode(),null)}function DS(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ux(e,i,"child_removed",t,r,n),Ux(e,i,"child_added",t,r,n),Ux(e,i,"child_moved",a,r,n),Ux(e,i,"child_changed",t,r,n),Ux(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var AS;function RS(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return it(null!=a,"SyncTree gave us an op for an invalid query."),NS(a,t,n,r)}var o,u=[],s=I(e.views.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;u=u.concat(NS(l,t,n,r))}}catch(c){s.e(c)}finally{s.f()}return u}function PS(e,t){var n,r=null,i=I(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||TS(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var OS=m((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new Gx(null),this.pendingWriteTree_={visibleWrites:Wx.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function LS(e,t,n,r,i){return function(e,t,n,r,i){it(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Hx(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?jS(e,new Mx({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function MS(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(iS(e.pendingWriteTree_,t)){var i=new Gx(null);return null!=r.snap?i=i.set(_b(),!0):jw(r.children,(function(e){i=i.set(new kb(e),!0)})),jS(e,new Lx(r.path,i,n))}return[]}function FS(e,t,n){return jS(e,new Mx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function VS(e,t,n,r){var i=qS(e,r);if(null!=i){var a=KS(i),o=a.path,u=a.queryId,s=Nb(o,t);return GS(e,o,new Mx(Px(u),s,n))}return[]}function US(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=PS(n,Nb(e,t));if(r)return r}));return sS(r,t,i,n,!0)}function jS(e,t){return zS(t,e.syncPointTree_,null,rS(e.pendingWriteTree_,_b()))}function zS(e,t,n,r){if(Tb(e.path))return BS(e,t,n,r);var i=t.get(_b());null==n&&null!=i&&(n=PS(i,_b()));var a=[],o=wb(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var l=n?n.getImmediateChild(o):null,c=pS(r,o);a=a.concat(zS(u,s,l,c))}return i&&(a=a.concat(RS(i,e,r,n))),a}function BS(e,t,n,r){var i=t.get(_b());null==n&&null!=i&&(n=PS(i,_b()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=pS(r,t),s=e.operationForChild(t);s&&(a=a.concat(BS(s,i,o,u)))})),i&&(a=a.concat(RS(i,e,r,n))),a}function qS(e,t){return e.tagToQueryMap.get(t)}function KS(e){var t=e.indexOf("$");return it(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new kb(e.substr(0,t))}}function GS(e,t,n){var r=e.syncPointTree_.get(t);return it(r,"Missing sync point for query tag that we're tracking"),RS(r,n,rS(e.pendingWriteTree_,t),null)}var WS=function(){function e(t){d(this,e),this.node_=t}return m(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),HS=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return m(e,[{key:"getImmediateChild",value:function(t){var n=Cb(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return US(this.syncTree_,this.path_)}}]),e}(),QS=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},YS=function(e,t,n){return e&&"object"===typeof e?(it(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?$S(e[".sv"],t,n):"object"===typeof e[".sv"]?XS(e[".sv"],t):void it(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},$S=function(e,t,n){if("timestamp"===e)return n.timestamp;it(!1,"Unexpected server value: "+e)},XS=function(e,t,n){e.hasOwnProperty("increment")||it(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&it(!1,"Unexpected increment value: "+r);var i=t.node();if(it(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},JS=function(e,t,n,r){return eE(t,new HS(n,e),r)},ZS=function(e,t,n){return eE(e,new WS(t),n)};function eE(e,t,n){var r,i=e.getPriority().val(),a=YS(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=YS(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new tx(u,vx(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new tx(a))),s.forEachChild(ax,(function(e,i){var a=eE(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var tE=m((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function nE(e,t){for(var n=t instanceof kb?t:new kb(t),r=e,i=wb(n);null!==i;){var a=Nt(r.node.children,i)||{children:{},childCount:0};r=new tE(i,r,a),i=wb(n=xb(n))}return r}function rE(e){return e.node.value}function iE(e,t){e.node.value=t,lE(e)}function aE(e){return e.node.childCount>0}function oE(e,t){jw(e.node.children,(function(n,r){t(new tE(n,e,r))}))}function uE(e,t,n,r){n&&!r&&t(e),oE(e,(function(e){uE(e,t,!0,r)})),n&&r&&t(e)}function sE(e){return new kb(null===e.parent?e.name:sE(e.parent)+"/"+e.name)}function lE(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===rE(e)&&!aE(e)}(n),i=Tt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,lE(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,lE(e))}(e.parent,e.name,e)}var cE=/[\[\].#$\/\u0000-\u001F\u007F]/,fE=/[\[\].#$\u0000-\u001F\u007F]/,hE=10485760,dE=function(e){return"string"===typeof e&&0!==e.length&&!cE.test(e)},vE=function(e){return"string"===typeof e&&0!==e.length&&!fE.test(e)},pE=function e(t,n,r){var i=r instanceof kb?new Rb(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ob(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ob(i)+" with contents = "+n.toString());if(Rw(n))throw new Error(t+"contains "+n.toString()+" "+Ob(i));if("string"===typeof n&&n.length>hE/3&&Ut(n)>hE)throw new Error(t+"contains a string greater than "+hE+" utf8 bytes "+Ob(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(jw(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!dE(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ob(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Ut(s),Pb(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ut(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ob(i)+" in addition to actual children.")}},yE=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!dE(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),vE(e)}(n))throw new Error(Vt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mE=m((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function gE(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Db(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function kE(e,t,n){gE(e,n),_E(e,(function(e){return Ab(e,t)||Ab(t,e)}))}function _E(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(wE(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function wE(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Sw&&Cw("event: "+n.toString()),Kw(r)}}}var bE="repo_interrupt",xE=25,SE=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cx(),this.transactionQueueTree_=new tE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return m(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function EE(e,t,n){if(e.stats_=ab(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ex(e.repoInfo_,(function(t,n,r,i){TE(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return NE(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{It(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Fb(e.repoInfo_,t,(function(t,n,r,i){TE(e,t,n,r,i)}),(function(t){NE(e,t)}),(function(t){!function(e,t){jw(t,(function(t,n){DE(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ib[n]||(ib[n]=t()),ib[n]}(e.repoInfo_,(function(){return new Rx(e.stats_,e.server_)})),e.infoData_=new Ix,e.infoSyncTree_=new OS({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=FS(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),DE(e,"connected",!1),e.serverSyncTree_=new OS({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);kE(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function IE(e){var t=e.infoData_.getNode(new kb(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CE(e){return QS({timestamp:IE(e)})}function TE(e,t,n,r,i){e.dataUpdateCount++;var a=new kb(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=At(n,(function(e){return vx(e)}));o=function(e,t,n,r){var i=qS(e,r);if(i){var a=KS(i),o=a.path,u=a.queryId,s=Nb(o,t),l=Gx.fromObject(n);return GS(e,o,new Fx(Px(u),s,l))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=vx(n);o=VS(e.serverSyncTree_,a,s,i)}else if(r){var l=At(n,(function(e){return vx(e)}));o=function(e,t,n){var r=Gx.fromObject(n);return jS(e,new Fx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=vx(n);o=FS(e.serverSyncTree_,a,c)}var f=a;o.length>0&&(f=ME(e,a)),kE(e.eventQueue_,f,o)}function NE(e,t){DE(e,"connected",t),!1===t&&function(e){PE(e,"onDisconnectEvents");var t=CE(e),n=Cx();Nx(e.onDisconnect_,_b(),(function(r,i){var a=JS(r,i,e.serverSyncTree_,t);Tx(n,r,a)}));var r=[];Nx(n,_b(),(function(t,n){r=r.concat(FS(e.serverSyncTree_,t,n));var i=zE(e,t);ME(e,i)})),e.onDisconnect_=Cx(),kE(e.eventQueue_,_b(),r)}(e)}function DE(e,t,n){var r=new kb("/.info/"+t),i=vx(n);e.infoData_.updateSnapshot(r,i);var a=FS(e.infoSyncTree_,r,i);kE(e.eventQueue_,r,a)}function AE(e){return e.nextWriteId_++}function RE(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bE)}function PE(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Cw.apply(void 0,[t].concat(r))}function OE(e,t,n){return US(e.serverSyncTree_,t,n)||fx.EMPTY_NODE}function LE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||jE(e,t),rE(t)){var n=VE(e,t);it(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=OE(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];it(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var l=Nb(t,s.path);a=a.updateChild(l,s.currentOutputSnapshotRaw)}var c=a.val(!0),f=t;e.server_.put(f.toString(),c,(function(r){PE(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(MS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);jE(e,nE(e.transactionQueueTree_,t)),LE(e,e.transactionQueueTree_),kE(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Kw(a[s])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Aw("transaction at "+f.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}ME(e,t)}}),o)}(e,sE(t),n)}else aE(t)&&oE(t,(function(t){LE(e,t)}))}function ME(e,t){var n=FE(e,t),r=sE(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,l=t[a],c=Nb(n,l.path),f=!1;if(it(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)f=!0,u=l.abortReason,i=i.concat(MS(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=xE)f=!0,u="maxretry",i=i.concat(MS(e.serverSyncTree_,l.currentWriteId,!0));else{var h=OE(e,l.path,o);l.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){pE("transaction failed: Data returned ",d,l.path);var v=vx(d);"object"===typeof d&&null!=d&&Tt(d,".priority")||(v=v.updatePriority(h.getPriority()));var p=l.currentWriteId,y=CE(e),m=ZS(v,h,y);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=m,l.currentWriteId=AE(e),o.splice(o.indexOf(p),1),i=(i=i.concat(LS(e.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally))).concat(MS(e.serverSyncTree_,p,!0))}else f=!0,u="nodata",i=i.concat(MS(e.serverSyncTree_,l.currentWriteId,!0))}kE(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);jE(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Kw(r[l]);LE(e,e.transactionQueueTree_)}(e,VE(e,n),r),r}function FE(e,t){var n,r=e.transactionQueueTree_;for(n=wb(t);null!==n&&void 0===rE(r);)r=nE(r,n),n=wb(t=xb(t));return r}function VE(e,t){var n=[];return UE(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function UE(e,t,n){var r=rE(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);oE(t,(function(t){UE(e,t,n)}))}function jE(e,t){var n=rE(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,iE(t,n.length>0?n:void 0)}oE(t,(function(t){jE(e,t)}))}function zE(e,t){var n=sE(FE(e,t)),r=nE(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){BE(e,t)})),BE(e,r),uE(r,(function(t){BE(e,t)})),n}function BE(e,t){var n=rE(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(it(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(it(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(MS(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?iE(t,void 0):n.length=a+1,kE(e.eventQueue_,sE(t),i);for(var u=0;u<r.length;u++)Kw(r[u])}}var qE=function(e,t){var n=KE(e),r=n.namespace;"firebase.com"===n.domain&&Dw(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Dw("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Aw("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new eb(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new kb(n.pathString)}},KE=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(c,f)),c<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=I(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Aw("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},GE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",WE=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return m(e,[{key:"key",get:function(){return Tb(this._path)?null:Sb(this._path)}},{key:"ref",get:function(){return new HE(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Sx(this._queryParams),t=Vw(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Sx(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=jt(t))instanceof e))return!1;var n=this._repo===t._repo,r=Db(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());var HE=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,r,new bx,!1)}return m(n,[{key:"parent",get:function(){var e=Ib(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(WE);!function(e){it(!CS,"__referenceConstructor has already been defined"),CS=e}(HE),function(e){it(!AS,"__referenceConstructor has already been defined"),AS=e}(HE);var QE="FIREBASE_DATABASE_EMULATOR_HOST",YE={},$E=!1;function XE(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Dw("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cw("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=qE(a,i),s=u.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[QE]),l?(o=!0,a="http://".concat(l,"?ns=").concat(s.namespace),s=(u=qE(a,i)).repoInfo):o=!u.repoInfo.secure;var c=i&&o?new Qw(Qw.OWNER):new Hw(e.name,e.options,t);yE("Invalid Firebase Database URL",u),Tb(u.path)||Dw("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=YE[t.name];i||(i={},YE[t.name]=i);var a=i[e.toURLString()];a&&Dw("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new SE(e,$E,n,r),i[e.toURLString()]=a,a}(s,e,c,new Ww(e.name,n));return new JE(f,e)}var JE=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return m(e,[{key:"_repo",get:function(){return this._instanceStarted||(EE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new HE(this._repo,_b())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=YE[t];n&&n[e.key]===e||Dw("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),RE(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Dw("Cannot call "+e+" on a deleted database.")}}]),e}();Fb.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Fb.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){vw(Vn),An(new zt("database",(function(e,t){var n=t.instanceIdentifier;return XE(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Kn(fw,hw,e),Kn(fw,hw,"esm2017")}();var ZE=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=c((0,r.useState)([]),2),s=u[0],l=u[1];(0,r.useEffect)((function(){ow.collection("singlecode").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().data}));l(t)}))}),[]);var f=c((0,r.useState)(!1),2),h=(f[0],f[1]),d=function(){var e=Ze(Xe().mark((function e(r){var i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),s[0]=s[0].toString(),!(s.length>0&&t===s[0])){e.next=17;break}return e.prev=3,i=a.toLowerCase(),sessionStorage.setItem("studentId",i),e.next=8,ow.collection("quizResults").doc(i).set({code:t,name:a,score:0,id:i,status:"waiting",wordarray:[]});case 8:h(!0),window.location.href="/waitingroom",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("Error saving data:",e.t0);case 15:e.next=18;break;case 17:alert("you entered wrong code");case 18:n(""),o("");case 20:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,Ye.jsxs)("div",{children:[(0,Ye.jsx)("nav",{children:(0,Ye.jsx)("ul",{children:(0,Ye.jsx)("li",{children:(0,Ye.jsx)(We,{to:"/",children:(0,Ye.jsx)("img",{className:"img",src:"https://cdn-icons-png.flaticon.com/256/11826/11826847.png",alt:""})})})})}),(0,Ye.jsxs)("div",{className:"main-item",children:[(0,Ye.jsx)("input",{type:"number",placeholder:"Enter code here",className:"inputtext",value:t,onChange:function(e){n(e.target.value)}}),(0,Ye.jsx)("input",{type:"text",placeholder:"Enter your name",className:"inputtext",value:a,onChange:function(e){o(e.target.value)}}),(0,Ye.jsx)("button",{onClick:d,children:"START QUIZ"})]})]})};var eI=function(){var e=c((0,r.useState)(!1),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=ow.collection("quizResults").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()})).some((function(e){return"inside"===e.status}));n(t)}));return function(){return e()}}),[]),(0,r.useEffect)((function(){t&&(window.location.href="/mainpage")})),(0,Ye.jsxs)("div",{className:"waitingbox",children:[(0,Ye.jsx)("h1",{children:"Waiting Room"}),(0,Ye.jsx)("p",{children:"Waiting for the quiz to start..."})]})};var tI=function(){var e=c((0,r.useState)([]),2),t=e[0],n=e[1];(0,r.useEffect)((function(){var e=ow.collection("quizResults").where("status","==","waiting").onSnapshot((function(e){var t=e.docs.map((function(e){return en({id:e.id},e.data())}));n(t)}));return function(){return e()}}),[]);var i=function(){var e=Ze(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Ze(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ow.collection("quizResults").doc(t.id).update({status:"inside"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Ye.jsxs)("div",{children:[(0,Ye.jsx)("nav",{children:(0,Ye.jsx)("ul",{children:(0,Ye.jsx)("li",{children:(0,Ye.jsx)(We,{to:"/",children:(0,Ye.jsx)("img",{className:"img",src:"https://cdn-icons-png.flaticon.com/256/11826/11826847.png",alt:""})})})})}),(0,Ye.jsxs)("div",{className:"main-item",children:[(0,Ye.jsx)("h1",{children:"Waiting Students"}),(0,Ye.jsx)("ul",{children:t.map((function(e,t){return(0,Ye.jsx)("li",{children:e.name},t)}))}),(0,Ye.jsx)("button",{onClick:i,children:"Start Quiz"})]})]})};var nI=function(){return(0,Ye.jsx)("div",{className:"App",children:(0,Ye.jsx)(qe,{children:(0,Ye.jsxs)(Le,{children:[(0,Ye.jsx)(Pe,{path:"/",element:(0,Ye.jsx)(ZE,{})}),(0,Ye.jsx)(Pe,{path:"/mainpage",element:(0,Ye.jsx)(sw,{})}),(0,Ye.jsx)(Pe,{path:"/teacherportal",element:(0,Ye.jsx)(cw,{})}),(0,Ye.jsx)(Pe,{path:"/studentdashboard",element:(0,Ye.jsx)(lw,{})}),(0,Ye.jsx)(Pe,{path:"/waitingroom",element:(0,Ye.jsx)(eI,{})}),(0,Ye.jsx)(Pe,{path:"/teacherdashboard",element:(0,Ye.jsx)(tI,{})}),(0,Ye.jsx)(Pe,{path:"/showletter",element:(0,Ye.jsx)(uw,{})})]})})})},rI=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,Ye.jsx)(r.StrictMode,{children:(0,Ye.jsx)(nI,{})})),rI()}()}();
//# sourceMappingURL=main.67771670.js.map